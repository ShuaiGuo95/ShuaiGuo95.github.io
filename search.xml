<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>CVä¸­ä¸â€œäººâ€å’Œâ€œè§†é¢‘â€æœ‰å…³çš„ç ”ç©¶</title>
      <link href="/2021/11/17/CV%E4%B8%AD%E4%B8%8E%E2%80%9C%E4%BA%BA%E2%80%9D%E5%92%8C%E2%80%9C%E8%A7%86%E9%A2%91%E2%80%9D%E6%9C%89%E5%85%B3%E7%9A%84%E7%A0%94%E7%A9%B6/"/>
      <url>/2021/11/17/CV%E4%B8%AD%E4%B8%8E%E2%80%9C%E4%BA%BA%E2%80%9D%E5%92%8C%E2%80%9C%E8%A7%86%E9%A2%91%E2%80%9D%E6%9C%89%E5%85%B3%E7%9A%84%E7%A0%94%E7%A9%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="CVä¸­ä¸â€œäººâ€å’Œâ€œè§†é¢‘â€æœ‰å…³çš„ç ”ç©¶"><a href="#CVä¸­ä¸â€œäººâ€å’Œâ€œè§†é¢‘â€æœ‰å…³çš„ç ”ç©¶" class="headerlink" title="CVä¸­ä¸â€œäººâ€å’Œâ€œè§†é¢‘â€æœ‰å…³çš„ç ”ç©¶"></a>CVä¸­ä¸â€œäººâ€å’Œâ€œè§†é¢‘â€æœ‰å…³çš„ç ”ç©¶</h1><p>è¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥ä»‹ç»ä¸€äº›CVä¸­ä¸â€œäººâ€å’Œâ€œè§†é¢‘â€æœ‰å…³çš„ç ”ç©¶ã€‚</p><h2 id="è§†é¢‘æƒ…ç»ªè¯†åˆ«"><a href="#è§†é¢‘æƒ…ç»ªè¯†åˆ«" class="headerlink" title="è§†é¢‘æƒ…ç»ªè¯†åˆ«"></a>è§†é¢‘æƒ…ç»ªè¯†åˆ«</h2><blockquote><p>F. Noroozi, M. Marjanovic, A. Njegus, S. Escalera and G. Anbarjafari, â€œAudio-Visual Emotion Recognition in Video Clips,â€ in IEEE Transactions on Affective Computing, vol. 10, no. 1, pp. 60-75, 1 Jan.-March 2019, doi: 10.1109/TAFFC.2017.2713783.</p><p>Z. Du, S. Wu, D. Huang, W. Li and Y. Wang, â€œSpatio-Temporal Encoder-Decoder Fully Convolutional Network for Video-Based Dimensional Emotion Recognition,â€ in <em>IEEE Transactions on Affective Computing</em>, vol. 12, no. 3, pp. 565-578, 1 July-Sept. 2021, doi: 10.1109/TAFFC.2019.2940224.</p></blockquote><h2 id="è§†é¢‘åŠ¨ä½œè¯†åˆ«"><a href="#è§†é¢‘åŠ¨ä½œè¯†åˆ«" class="headerlink" title="è§†é¢‘åŠ¨ä½œè¯†åˆ«"></a>è§†é¢‘åŠ¨ä½œè¯†åˆ«</h2><blockquote><p>Deepti Ghadiyaram, Du Tran, Dhruv Mahajan; Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition (CVPR), 2019, pp. 12046-12055</p><p>Li C, Zhong Q, Xie D, et al. Collaborative spatiotemporal feature learning for video action recognition[C]//Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition. 2019: 7872-7881.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦CV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVåŸºæœ¬ç ”ç©¶æ–¹å‘ç®€ä»‹</title>
      <link href="/2021/11/17/CV%E5%9F%BA%E6%9C%AC%E7%A0%94%E7%A9%B6%E6%96%B9%E5%90%91%E7%AE%80%E4%BB%8B/"/>
      <url>/2021/11/17/CV%E5%9F%BA%E6%9C%AC%E7%A0%94%E7%A9%B6%E6%96%B9%E5%90%91%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="CVåŸºæœ¬ç ”ç©¶æ–¹å‘ç®€ä»‹"><a href="#CVåŸºæœ¬ç ”ç©¶æ–¹å‘ç®€ä»‹" class="headerlink" title="CVåŸºæœ¬ç ”ç©¶æ–¹å‘ç®€ä»‹"></a>CVåŸºæœ¬ç ”ç©¶æ–¹å‘ç®€ä»‹</h1><p>CVå…¨ç§°Computer Visionï¼Œå³è®¡ç®—æœºè§†è§‰ï¼Œæ˜¯äººå·¥æ™ºèƒ½é‡Œé¢å¾ˆå¤§ã€åº”ç”¨å¾ˆå¹¿æ³›ã€å·¥ä¸šåŒ–ç¨‹åº¦å¾ˆé«˜çš„ä¸€ä¸ªç ”ç©¶é¢†åŸŸï¼Œä¸»è¦ç ”ç©¶å¯¹è±¡æ˜¯å›¾åƒå’Œè§†é¢‘ï¼Œæœ¬æ–‡æˆ‘ä»¬ç®€å•ä»‹ç»ä»¥ä¸‹CVé¢†åŸŸæ•´ä½“ä¸Šçš„ä¸»è¦ç ”ç©¶å†…å®¹ã€‚</p><h2 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h2><p>å¸¸è§çš„åŒ…æ‹¬å›¾ç‰‡åˆ†ç±»å’Œè§†é¢‘åˆ†ç±»ï¼Œåªè¦æœ‰æ•°æ®é›†ï¼Œä¸è®ºæ ‡ç­¾æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œå¦‚ä¸åŒçš„ç‰©å“ï¼Œä¸åŒçš„æƒ…ç»ªï¼Œä¸åŒçš„åŠ¨ä½œï¼Œéƒ½å¯ä»¥è¿›è¡Œå­¦ä¹ å’Œåˆ†ç±»ã€‚</p><p>ä¼ ç»Ÿæœºå™¨å­¦ä¹ æ–¹æ³•ä¼šé€šè¿‡å„ç§ç»å…¸çš„ç‰¹å¾ç®—å­+ç»å…¸åˆ†ç±»å™¨ç»„åˆå­¦ä¹ ï¼Œæ¯”å¦‚ HOGç‰¹å¾+SVMåˆ†ç±»ã€‚ç°åœ¨ä¸»æµçš„æ–¹æ³•æ˜¯æ·±åº¦å­¦ä¹ çš„æ–¹æ³•ï¼ŒCNNå·ç§¯ç¥ç»ç½‘ç»œï¼Œå¯ä»¥ç›´æ¥å¯¹å›¾åƒæå–ç‰¹å¾è¿›è¡Œåˆ†ç±»å­¦ä¹ ï¼Œç»å…¸ä¸»æµçš„æ–¹æ³•åŒ…æ‹¬ResNetï¼ŒGoogleNetç­‰ã€‚è§†é¢‘çš„ç‰¹å¾æå–æ–¹æ³•æœ‰3Då·ç§¯ç­‰ã€‚</p><h2 id="æ£€æµ‹"><a href="#æ£€æµ‹" class="headerlink" title="æ£€æµ‹"></a>æ£€æµ‹</h2><p>ç›®æ ‡æ£€æµ‹ä»»åŠ¡åˆ™å…³æ³¨å›¾ç‰‡ä¸­ç‰¹å®šçš„ç›®æ ‡ï¼Œæ¯”å¦‚å®šä½å›¾ç‰‡ä¸­äººè„¸çš„ä½ç½®ï¼Œäº”å®˜çš„ä½ç½®ã€‚æ£€æµ‹ä»»åŠ¡åŒ…å«ä¸¤ä¸ªå­ä»»åŠ¡ï¼Œå…¶ä¸€æ˜¯è¿™ä¸€ç›®æ ‡çš„ç±»åˆ«ä¿¡æ¯å’Œæ¦‚ç‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªåˆ†ç±»ä»»åŠ¡ã€‚å…¶äºŒæ˜¯ç›®æ ‡çš„å…·ä½“ä½ç½®ä¿¡æ¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå®šä½ä»»åŠ¡ã€‚ç»å…¸ä¸»æµçš„æ–¹æ³•åŒ…æ‹¬YOLOç³»åˆ—å’ŒSSDç³»åˆ—ã€‚</p><p><img src="detect.jpg" alt="ç›®æ ‡ç›‘æµ‹"></p><p>ä¸è®¡ç®—æœºè§†è§‰é¢†åŸŸé‡Œå¤§éƒ¨åˆ†çš„ç®—æ³•ä¸€æ ·ï¼Œç›®æ ‡æ£€æµ‹ä¹Ÿç»å†äº†ä»ä¼ ç»Ÿçš„äººå·¥è®¾è®¡ç‰¹å¾å’Œæµ…å±‚åˆ†ç±»å™¨çš„æ€è·¯ï¼Œåˆ°å¤§æ•°æ®æ—¶ä»£ä½¿ç”¨æ·±åº¦ç¥ç»ç½‘ç»œè¿›è¡Œç‰¹å¾å­¦ä¹ çš„æ€è·¯ã€‚</p><h2 id="åˆ†å‰²"><a href="#åˆ†å‰²" class="headerlink" title="åˆ†å‰²"></a>åˆ†å‰²</h2><p>å›¾åƒåˆ†å‰²å°±æ˜¯æŠŠå›¾åƒåˆ†å‰²æˆå…·æœ‰ç›¸ä¼¼çš„é¢œè‰²æˆ–çº¹ç†ç‰¹æ€§çš„è‹¥å¹²å­åŒºåŸŸï¼Œå¹¶ä½¿å®ƒä»¬å¯¹åº”ä¸åŒçš„ç‰©ä½“æˆ–ç‰©ä½“çš„ä¸åŒéƒ¨åˆ†çš„æŠ€æœ¯ã€‚è¿™äº›å­åŒºåŸŸï¼Œç»„æˆå›¾åƒçš„å®Œå¤‡å­é›†ï¼Œåˆç›¸äº’ä¹‹é—´ä¸é‡å ã€‚æ˜¯ç›®å‰çš„çƒ­é—¨æ–¹å‘ã€‚</p><p><img src="segmentation.jpg" alt="å›¾åƒåˆ†å‰²"></p><p>å¸¸è§ä»»åŠ¡åŒ…æ‹¬æ–‡æœ¬å›¾åƒåˆ†å‰²ï¼Œä»æ–‡æœ¬å›¾ç‰‡ä¸­å®šä½æ–‡å­—ï¼Œè½¦ç‰Œè¯†åˆ«ï¼Œä»åŒ…å«è½¦ç‰Œçš„å›¾ç‰‡ä¸­å®šä½è½¦ç‰Œç­‰ã€‚ç»å…¸ä¸»æµçš„æ–¹æ³•åŒ…æ‹¬R-CNNç³»åˆ—ï¼ŒFCNï¼ŒSetNetç­‰ã€‚</p><h2 id="è·Ÿè¸ª"><a href="#è·Ÿè¸ª" class="headerlink" title="è·Ÿè¸ª"></a>è·Ÿè¸ª</h2><p>æ£€æµ‹æ˜¯åœ¨å›¾ç‰‡ä¸­å®šä½ç‰¹å®šç›®æ ‡ï¼Œè€Œè·Ÿè¸ªæ˜¯åœ¨è§†é¢‘ä¸­æŒç»­å®šä½ç‰¹å®šç›®æ ‡ã€‚è·Ÿè¸ªçš„ç»“æœé€šå¸¸å°±æ˜¯ä¸€ä¸ªæ¡†ã€‚æ˜¯ç›®å‰çš„çƒ­é—¨æ–¹å‘ã€‚å¤§å·¥çš„å¢æ¹–å·å›¢é˜Ÿæ˜¯å›½å†…è¿™ä¸ªé¢†åŸŸåšçš„æœ€å¥½çš„å›¢é˜Ÿä¹‹ä¸€ã€‚</p><p><img src="tracking.gif" alt="ç›®æ ‡è·Ÿè¸ª"></p><p>ä¸»è¦æ€è·¯åŒ…æ‹¬æˆå¼æ¨¡å‹æ–¹æ³•ä¸åˆ¤åˆ«å¼æ¨¡å‹æ–¹æ³•ã€‚ç»å…¸æ–¹æ³•åŒ…æ‹¬å•ç›®æ ‡è¿½è¸ªé¢†åŸŸçš„SOTï¼Œå¤šç›®æ ‡è¿½è¸ªé¢†åŸŸçš„MOTç­‰ç­‰ã€‚</p><h2 id="é™å™ª"><a href="#é™å™ª" class="headerlink" title="é™å™ª"></a>é™å™ª</h2><p>æ•°å­—å›¾åƒåœ¨æ•°å­—åŒ–å’Œä¼ è¾“è¿‡ç¨‹ä¸­å¸¸å—åˆ°æˆåƒè®¾å¤‡ä¸å¤–éƒ¨ç¯å¢ƒå™ªå£°å¹²æ‰°ç­‰å½±å“ï¼Œç§°ä¸ºå«å™ªå›¾åƒæˆ–å™ªå£°å›¾åƒã€‚å‡å°‘æ•°å­—å›¾åƒä¸­å™ªå£°çš„è¿‡ç¨‹ç§°ä¸ºå›¾åƒé™å™ªã€‚</p><p><img src="denoise.jpg" alt="å›¾åƒå»å™ª"></p><p>ä¼ ç»Ÿé™å™ªç®—æ³•æ ¹æ®é™å™ªçš„åŸç†ä¸åŒå¯åˆ†ä¸ºåŸºäºé‚»åŸŸåƒç´ ç‰¹å¾çš„æ–¹æ³•ï¼ŒåŸºäºé¢‘åŸŸå˜æ¢çš„æ–¹æ³•ï¼Œå’ŒåŸºäºç‰¹å®šæ¨¡å‹çš„æ–¹æ³•ã€‚ç›®å‰æ·±åº¦å­¦ä¹ å·²ç»èƒ½è¾¾åˆ°å’Œä¼ ç»Ÿæ–¹æ³•ä¸€æ ·å¥½çš„æ•ˆæœã€‚</p><h2 id="å¢å¼º"><a href="#å¢å¼º" class="headerlink" title="å¢å¼º"></a>å¢å¼º</h2><p>å›¾åƒå¢å¼ºï¼Œå³å¢å¼ºå›¾åƒä¸­çš„æœ‰ç”¨ä¿¡æ¯ï¼Œæ”¹å–„å›¾åƒçš„è§†è§‰æ•ˆæœã€‚å¸¸è§ç»†åˆ†ç±»åˆ«åŒ…æ‹¬å¯¹æ¯”åº¦å¢å¼ºã€è¶…åˆ†è¾¨ç‡ã€å›¾åƒä¿®å¤ç­‰ã€‚</p><p><img src="zengqiang.jpg" alt="å›¾åƒå¢å¼º"></p><p>ç›®å‰ä¸åŒçš„ç»†åˆ†é¢†åŸŸéƒ½å·²ç»å¹¿æ³›é‡‡ç”¨æ·±åº¦å­¦ä¹ ï¼Œåœ¨ç‰¹å®šæ•°æ®é›†ä¸Šä¹Ÿè¾¾åˆ°äº†å¾ˆå¥½çš„æ•ˆæœã€‚</p><h2 id="æ£€ç´¢"><a href="#æ£€ç´¢" class="headerlink" title="æ£€ç´¢"></a>æ£€ç´¢</h2><p>å³å¯»æ‰¾ä¸ç»™å®šå›¾ç‰‡æœ€æ¥è¿‘çš„å›¾ç‰‡ã€‚æ£€ç´¢å…·æœ‰å¾ˆå¤§çš„å•†ä¸šä»·å€¼ï¼Œç›®å‰æ·˜å®ã€ç™¾åº¦ã€è°·æ­Œçš„æœå›¾åŠŸèƒ½éƒ½æ˜¯åŸºäºæ£€ç´¢æ¥åšçš„ï¼Œäººè„¸è¯†åˆ«è¦å¿«é€Ÿå®Œæˆä¹Ÿç¦»ä¸å¼€æ£€ç´¢æŠ€æœ¯ã€‚åœ¨å›¾ç‰‡ç‰¹å¾æå–å®Œæˆä¹‹åï¼Œæƒ³è¦å¯»æ‰¾æœ€æ¥è¿‘æœ€åŒ¹é…çš„å›¾ç‰‡ï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯æš´åŠ›æœç´¢ä¸€éï¼Œä½†æ˜¯è¿™æ ·åšæ—¶é—´å¤æ‚åº¦å¤ªé«˜äº†ã€‚ç›®å‰åšçš„æ¯”è¾ƒå¥½çš„æ˜¯åŸºäºå“ˆå¸Œçš„ç®—æ³•ã€‚</p><p><img src="retrieval.jpg" alt="å›¾åƒæ£€ç´¢"></p><p>æ·±åº¦å­¦ä¹ åœ¨å›¾åƒæ£€ç´¢é‡Œé¢çš„ä½œç”¨å°±æ˜¯æŠŠè¡¨å¾æ ·æœ¬çš„ç‰¹å¾å­¦ä¹ å¥½ï¼Œå°±å¤Ÿäº†ã€‚</p><h2 id="é£æ ¼è¿ç§»"><a href="#é£æ ¼è¿ç§»" class="headerlink" title="é£æ ¼è¿ç§»"></a>é£æ ¼è¿ç§»</h2><p>å¸¸è§åº”ç”¨å°±æ˜¯æˆ‘ä»¬ç”¨è¿‡çš„åŠ¨æ¼«ç‰¹æ•ˆï¼Œè¿˜æœ‰æ¢è„¸ç­‰ç­‰ï¼Œç›®å‰ç»å…¸çš„æ–¹æ³•æ˜¯åŸºäºGANçš„ä¸€äº›æ–¹æ³•ã€‚</p><p><img src="gan.jpg" alt="é£æ ¼è¿ç§»"></p><h2 id="3Dé‡å»º"><a href="#3Dé‡å»º" class="headerlink" title="3Dé‡å»º"></a>3Dé‡å»º</h2><p>3Dé‡å»ºå°±æ˜¯å»ºç«‹çœŸå®ç‰©å“çš„3Dæ¨¡å‹ï¼Œå¯ä»¥ç”¨äºæ¸¸æˆã€ç”µå½±ã€åœ°å›¾ç­‰é¢†åŸŸã€‚ç›®å‰è·å–ä¸‰ç»´æ¨¡å‹çš„æ–¹æ³•ä¸»è¦åŒ…æ‹¬ä¸‰ç§ï¼Œæ‰‹å·¥å»ºæ¨¡ï¼Œä»ªå™¨é‡‡é›†ä¸åŸºäºå›¾åƒçš„å»ºæ¨¡ã€‚å…¶ä¸­åŸºäºå›¾åƒçš„å»ºæ¨¡æ˜¯CVé¢†åŸŸçš„ç ”ç©¶çƒ­é—¨ã€‚åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸèƒ½åª²ç¾ä¼ ç»Ÿ3Dé‡å»ºæ–¹æ³•çš„æ–¹æ³•è¿˜æ¯”è¾ƒå°‘ã€‚ç»å…¸ä¼ ç»Ÿ3Dé‡å»ºæ–¹æ³•çš„é›†å¤§æˆè€…æ˜¯colmap.</p><p><img src="reconstruction.png" alt="3Dé‡å»º"></p><p>ä¸3Dé‡å»ºç›¸å…³çš„è¿˜æœ‰ä¸€äº›é¢†åŸŸï¼Œæ¯”å¦‚æ·±åº¦ä¼°è®¡ã€Nerfã€‚</p><p>å¤§çš„ç ”ç©¶æ–¹å‘ä¸»è¦å°±æ˜¯è¿™äº›å•¦ï¼Œå½“ç„¶å…¶å®æ¯ä¸€ç±»éƒ½æ˜¯å¾ˆå¤§çš„é¢†åŸŸå‘¢ï¼Œè¿™é‡Œæˆ‘ä»¬åªåšæ€»ä½“äº†è§£ï¼Œåé¢å…·ä½“å…³æ³¨æˆ‘ä»¬æƒ³åšçš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦CV </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python3çš„PDFæ–‡ä»¶è¯»å–ä¸å¤„ç†</title>
      <link href="/2021/11/16/Python3%E7%9A%84PDF%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%A4%84%E7%90%86/"/>
      <url>/2021/11/16/Python3%E7%9A%84PDF%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="Python3çš„PDFæ–‡ä»¶è¯»å–ä¸å¤„ç†"><a href="#Python3çš„PDFæ–‡ä»¶è¯»å–ä¸å¤„ç†" class="headerlink" title="Python3çš„PDFæ–‡ä»¶è¯»å–ä¸å¤„ç†"></a>Python3çš„PDFæ–‡ä»¶è¯»å–ä¸å¤„ç†</h1><p>ç”±äºè´¢æŠ¥å’Œç¤¾ä¼šè´£ä»»æŠ¥å‘Šéƒ½æ˜¯PDFæ ¼å¼çš„ï¼Œæ‰€ä»¥ä¸ºäº†ä¸æˆ‘ä»¬çš„BERTåˆ†ç±»å·¥ä½œè¡”æ¥èµ·æ¥ï¼Œéœ€è¦è¯»å–å¹¶ä¸”ç®€å•å¤„ç†ä¸€ä¸‹PDFæ–‡ä»¶ï¼Œå˜æˆæˆ‘ä»¬éœ€è¦çš„å­—ç¬¦ä¸²æ ¼å¼ï¼Œå¹¶ä¸”ä»ä¸­æå–æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯ã€‚</p><h2 id="PDFæ–‡ä»¶è¯»å–"><a href="#PDFæ–‡ä»¶è¯»å–" class="headerlink" title="PDFæ–‡ä»¶è¯»å–"></a>PDFæ–‡ä»¶è¯»å–</h2><p>é¦–å…ˆæˆ‘ä»¬æŠŠPDFæ–‡ä»¶è¯»è¿›æ¥ï¼Œéœ€è¦å®‰è£…ä¸€ä¸ªåŒ…<code>pdfminer.six</code>ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">pip install pdfminer.six<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™æ˜¯Python3ç”¨äºå¤„ç†PDFæ–‡ä»¶ï¼Œæå–æ–‡å­—å†…å®¹çš„åŒ…ã€‚ç„¶åå‚è€ƒ<a href="https://cloud.tencent.com/developer/article/1395339">è¿™ç¯‡æ–‡ç« </a>çš„ä»£ç ï¼Œå…ˆè·‘ä¸€ä¸‹è¯•è¯•çœ‹çœ‹èƒ½ä¸èƒ½è¯»å–PDFæ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯æºç ï¼Œè¿™é‡Œæˆ‘ä»¬è¯»å–ä¸­å›½å¹³å®‰2020å¹´çš„è´¢æŠ¥ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> sys<span class="token keyword">import</span> importlibimportlib<span class="token punctuation">.</span><span class="token builtin">reload</span><span class="token punctuation">(</span>sys<span class="token punctuation">)</span><span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>pdfparser <span class="token keyword">import</span> PDFParser<span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>pdfdocument <span class="token keyword">import</span> PDFDocument<span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>pdfpage <span class="token keyword">import</span> PDFPage<span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>pdfinterp <span class="token keyword">import</span> PDFResourceManager<span class="token punctuation">,</span> PDFPageInterpreter<span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>converter <span class="token keyword">import</span> PDFPageAggregator<span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>layout <span class="token keyword">import</span> LTTextBoxHorizontal<span class="token punctuation">,</span>LAParams<span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>pdfpage <span class="token keyword">import</span> PDFTextExtractionNotAllowed<span class="token comment"># å¯¹æœ¬åœ°ä¿å­˜çš„pdfæ–‡ä»¶è¿›è¡Œè¯»å–å’Œå†™å…¥åˆ°txtæ–‡ä»¶å½“ä¸­</span><span class="token comment"># å®šä¹‰è§£æå‡½æ•°</span><span class="token keyword">def</span> <span class="token function">pdftotxt</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>new_name<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># åˆ›å»ºä¸€ä¸ªæ–‡æ¡£åˆ†æå™¨</span>    parser <span class="token operator">=</span> PDFParser<span class="token punctuation">(</span>path<span class="token punctuation">)</span>    <span class="token comment"># åˆ›å»ºä¸€ä¸ªPDFæ–‡æ¡£å¯¹è±¡å­˜å‚¨æ–‡æ¡£ç»“æ„</span>    document <span class="token operator">=</span>PDFDocument<span class="token punctuation">(</span>parser<span class="token punctuation">)</span>    <span class="token comment"># åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å…è®¸æ–‡æœ¬æå–</span>    <span class="token keyword">if</span> <span class="token keyword">not</span> document<span class="token punctuation">.</span>is_extractable<span class="token punctuation">:</span>        <span class="token keyword">raise</span> PDFTextExtractionNotAllowed    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token comment"># åˆ›å»ºä¸€ä¸ªPDFèµ„æºç®¡ç†å™¨å¯¹è±¡æ¥å­˜å‚¨èµ„æº</span>        resmag <span class="token operator">=</span>PDFResourceManager<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># è®¾å®šå‚æ•°è¿›è¡Œåˆ†æ</span>        laparams <span class="token operator">=</span>LAParams<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># åˆ›å»ºä¸€ä¸ªPDFè®¾å¤‡å¯¹è±¡</span>        <span class="token comment"># device=PDFDevice(resmag)</span>        device <span class="token operator">=</span>PDFPageAggregator<span class="token punctuation">(</span>resmag<span class="token punctuation">,</span>laparams<span class="token operator">=</span>laparams<span class="token punctuation">)</span>        <span class="token comment"># åˆ›å»ºä¸€ä¸ªPDFè§£é‡Šå™¨å¯¹è±¡</span>        interpreter <span class="token operator">=</span> PDFPageInterpreter<span class="token punctuation">(</span>resmag<span class="token punctuation">,</span> device<span class="token punctuation">)</span>        <span class="token comment"># å¤„ç†æ¯ä¸€é¡µ</span>        <span class="token keyword">for</span> page <span class="token keyword">in</span> PDFPage<span class="token punctuation">.</span>create_pages<span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">:</span>            interpreter<span class="token punctuation">.</span>process_page<span class="token punctuation">(</span>page<span class="token punctuation">)</span>            <span class="token comment"># æ¥å—è¯¥é¡µé¢çš„LTPageå¯¹è±¡</span>            layout <span class="token operator">=</span>device<span class="token punctuation">.</span>get_result<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> y <span class="token keyword">in</span> layout<span class="token punctuation">:</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span>LTTextBoxHorizontal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token operator">%</span><span class="token punctuation">(</span>new_name<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>                        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>y<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token comment"># è·å–æ–‡ä»¶çš„è·¯å¾„</span>path <span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span> <span class="token string">"æµ·å¤©å‘³ä¸šï¼šæµ·å¤©å‘³ä¸š2020å¹´å¹´åº¦æŠ¥å‘Š.pdf"</span><span class="token punctuation">,</span><span class="token string">'rb'</span><span class="token punctuation">)</span>pdftotxt<span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"pdfminer.txt"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç»è¿‡è¿è¡Œä¹‹åå¾—åˆ°<code>pdfminer.txt</code>ï¼Œæ‰“å¼€ä¹‹åå‘ç°å¯¹äºè¿ç»­çš„æ–‡å­—å†…å®¹çš„æå–æ•ˆæœè¿˜æ˜¯å¯ä»¥çš„ï¼Œå¤§æ¦‚å¯ä»¥æŠŠè´¢æŠ¥ä¸­è¿ç»­çš„æ–‡å­—éƒ¨åˆ†çš„æ¯ä¸€è¡Œï¼Œå¤„ç†ä¸ºå­—ç¬¦ä¸²å½¢å¼çš„ä¸€è¡Œï¼Œæ˜¯å¯ä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨çš„ã€‚</p><h2 id="ç®€å•å¤„ç†"><a href="#ç®€å•å¤„ç†" class="headerlink" title="ç®€å•å¤„ç†"></a>ç®€å•å¤„ç†</h2><p>ä¸€ä»½å…¸å‹çš„è´¢æŠ¥ä¸»è¦å†…å®¹åŒ…æ‹¬ï¼šé‡Šä¹‰ã€å…¬å¸ç®€ä»‹åŠä¸»è¦è´¢åŠ¡æŒ‡æ ‡ã€å…¬å¸ä¸šåŠ¡æ¦‚è¦ã€ç»è¥æƒ…å†µè®¨è®ºä¸åˆ†æã€é‡è¦äº‹é¡¹ç­‰æƒ…å†µï¼Œæ¯ä¸€éƒ¨åˆ†åˆæœ‰ç‰¹å®šçš„å°æ ‡é¢˜ï¼Œæˆ‘ä»¬æ¥åŠ ä¸€ä¸ªç®€å•çš„ç­›é€‰ï¼ŒæŠŠâ€œå…¬å¸ä¸šåŠ¡æ¦‚è¦â€ä¸­çš„â€œæŠ¥å‘ŠæœŸå†…æ ¸å¿ƒç«äº‰åŠ›åˆ†æâ€éƒ¨åˆ†æå–å‡ºæ¥ï¼Œå¹¶ä¸”æŠŠå¾—åˆ°çš„å†…å®¹å˜æˆå¥å·åˆ†å‰²çš„å•ç‹¬æ–‡æœ¬ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> sys<span class="token keyword">import</span> importlibimportlib<span class="token punctuation">.</span><span class="token builtin">reload</span><span class="token punctuation">(</span>sys<span class="token punctuation">)</span><span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>pdfparser <span class="token keyword">import</span> PDFParser<span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>pdfdocument <span class="token keyword">import</span> PDFDocument<span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>pdfpage <span class="token keyword">import</span> PDFPage<span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>pdfinterp <span class="token keyword">import</span> PDFResourceManager<span class="token punctuation">,</span> PDFPageInterpreter<span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>converter <span class="token keyword">import</span> PDFPageAggregator<span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>layout <span class="token keyword">import</span> LTTextBoxHorizontal<span class="token punctuation">,</span>LAParams<span class="token keyword">from</span> pdfminer<span class="token punctuation">.</span>pdfpage <span class="token keyword">import</span> PDFTextExtractionNotAllowed<span class="token comment"># å¯¹æœ¬åœ°ä¿å­˜çš„pdfæ–‡ä»¶è¿›è¡Œè¯»å–å’Œå†™å…¥åˆ°txtæ–‡ä»¶å½“ä¸­</span>index <span class="token operator">=</span> <span class="token number">0</span><span class="token comment"># å®šä¹‰è§£æå‡½æ•°</span><span class="token keyword">def</span> <span class="token function">pdftotxt</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment"># åˆ›å»ºä¸€ä¸ªæ–‡æ¡£åˆ†æå™¨</span>parser <span class="token operator">=</span> PDFParser<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token comment"># åˆ›å»ºä¸€ä¸ªPDFæ–‡æ¡£å¯¹è±¡å­˜å‚¨æ–‡æ¡£ç»“æ„</span>document <span class="token operator">=</span>PDFDocument<span class="token punctuation">(</span>parser<span class="token punctuation">)</span><span class="token comment"># åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å…è®¸æ–‡æœ¬æå–</span><span class="token keyword">if</span> <span class="token keyword">not</span> document<span class="token punctuation">.</span>is_extractable<span class="token punctuation">:</span><span class="token keyword">raise</span> PDFTextExtractionNotAllowed<span class="token keyword">else</span><span class="token punctuation">:</span><span class="token comment"># åˆ›å»ºä¸€ä¸ªPDFèµ„æºç®¡ç†å™¨å¯¹è±¡æ¥å­˜å‚¨èµ„æº</span>resmag <span class="token operator">=</span>PDFResourceManager<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># è®¾å®šå‚æ•°è¿›è¡Œåˆ†æ</span>laparams <span class="token operator">=</span>LAParams<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># åˆ›å»ºä¸€ä¸ªPDFè®¾å¤‡å¯¹è±¡</span><span class="token comment"># device=PDFDevice(resmag)</span>device <span class="token operator">=</span>PDFPageAggregator<span class="token punctuation">(</span>resmag<span class="token punctuation">,</span>laparams<span class="token operator">=</span>laparams<span class="token punctuation">)</span><span class="token comment"># åˆ›å»ºä¸€ä¸ªPDFè§£é‡Šå™¨å¯¹è±¡</span>interpreter <span class="token operator">=</span> PDFPageInterpreter<span class="token punctuation">(</span>resmag<span class="token punctuation">,</span> device<span class="token punctuation">)</span><span class="token comment"># å¤„ç†æ¯ä¸€é¡µ</span>flag <span class="token operator">=</span> <span class="token number">0</span>content <span class="token operator">=</span> <span class="token string">''</span><span class="token keyword">for</span> page <span class="token keyword">in</span> PDFPage<span class="token punctuation">.</span>create_pages<span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">:</span>interpreter<span class="token punctuation">.</span>process_page<span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token comment"># æ¥å—è¯¥é¡µé¢çš„LTPageå¯¹è±¡</span>layout <span class="token operator">=</span>device<span class="token punctuation">.</span>get_result<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">for</span> y <span class="token keyword">in</span> layout<span class="token punctuation">:</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span>LTTextBoxHorizontal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>temp <span class="token operator">=</span> y<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> <span class="token string">'æŠ¥å‘ŠæœŸå†…æ ¸å¿ƒç«äº‰åŠ›åˆ†æ'</span> <span class="token keyword">in</span> temp<span class="token punctuation">:</span> flag <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">if</span> <span class="token string">'ç»è¥æƒ…å†µè®¨è®ºä¸åˆ†æ'</span> <span class="token keyword">in</span> temp<span class="token punctuation">:</span> flag <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">if</span> flag<span class="token punctuation">:</span> content <span class="token operator">=</span> content<span class="token operator">+</span>temp<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token keyword">global</span> indexcontent <span class="token operator">=</span> content<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'ã€‚'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token keyword">for</span> temp <span class="token keyword">in</span> content<span class="token punctuation">:</span><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'.txt'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>temp<span class="token punctuation">)</span>f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>index <span class="token operator">=</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token comment"># è·å–æ–‡ä»¶çš„è·¯å¾„</span>path <span class="token operator">=</span><span class="token builtin">open</span><span class="token punctuation">(</span> <span class="token string">"æµ·å¤©å‘³ä¸šï¼šæµ·å¤©å‘³ä¸š2020å¹´å¹´åº¦æŠ¥å‘Š.pdf"</span><span class="token punctuation">,</span><span class="token string">'rb'</span><span class="token punctuation">)</span>pdftotxt<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°å¾ˆå¤šä¸ªæ–‡æœ¬å•¦ã€‚åé¢æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦ï¼Œä»¥ä¸åŒçš„æ–¹å¼è¿›è¡Œåˆ†å‰²ï¼Œç„¶åå°ä»™å¥³æ¥æ‰“æ ‡ç­¾ï¼Œå†æ¥ç€è¿›è¡Œè®­ç»ƒã€‚å› ä¸ºè¿™é‡Œçš„æ–‡æœ¬å˜åŒ–æ˜¯ä»0é€’å¢çš„ï¼Œæ‰€ä»¥å°†æ¥å°±æ–°å»ºä¸€ä¸ªexcelï¼ŒæŒ‰åˆ—æ¥å†™å…¥æ ‡ç­¾å³å¯ï¼Œæœ‰ç±»åˆ«æˆ–è€…æ— ç±»åˆ«ï¼Œæœ‰ç±»åˆ«çš„è¯å±äºä»€ä¹ˆç±»åˆ«ï¼Œå°±å¯ä»¥è¿›è¡Œåç»­BERTæ­¥éª¤å•¦ã€‚</p><p>å¼€å¿ƒï¼åŸºäºBERTé¢„è®­ç»ƒæ¨¡å‹çš„åˆ†ç±»æ•´ä¸ªpipelineå°±æ‰“é€šå•¦ï¼å®Œç»“æ’’èŠ±ï¼</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦NLP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¥è´ºå°çˆ¸çˆ¸è£è·Best Paper</title>
      <link href="/2021/11/14/%E7%A5%9D%E8%B4%BA%E5%B0%8F%E7%88%B8%E7%88%B8%E8%8D%A3%E8%8E%B7Best-Paper/"/>
      <url>/2021/11/14/%E7%A5%9D%E8%B4%BA%E5%B0%8F%E7%88%B8%E7%88%B8%E8%8D%A3%E8%8E%B7Best-Paper/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¥è´ºå°çˆ¸çˆ¸è£è·Best-Paper"><a href="#ç¥è´ºå°çˆ¸çˆ¸è£è·Best-Paper" class="headerlink" title="ç¥è´ºå°çˆ¸çˆ¸è£è·Best Paper"></a>ç¥è´ºå°çˆ¸çˆ¸è£è·Best Paper</h1><p>æ‚²å–œåƒèˆ¬è¯­ä»“çš‡ï¼Œä¸æ‰æ—¥æ—¥è‹¦å¥”å¿™ã€‚</p><p>å­—å­—çœ‹æ¥çš†è¾›è‹¦ï¼Œä¸‰å¹´ç£¨ç ºä¸å¯»å¸¸ã€‚</p><p>åš¼å¾—èœæ ¹ç»ˆæˆäº‹ï¼Œè¦†é›ªæ¢…èŠ±åˆ†å¤–é¦™ã€‚</p><p>ä»Šæœç—›é¥®åº†åŠŸé…’ï¼Œæ›´ç«‹å£®å¿—æ¥æ—¥é•¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ²¹å…ˆç”Ÿé€‰é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç§‹æ€ï¼ˆå…¶äºŒï¼‰</title>
      <link href="/2021/11/06/%E7%A7%8B%E6%80%9D%EF%BC%88%E5%85%B6%E4%BA%8C%EF%BC%89/"/>
      <url>/2021/11/06/%E7%A7%8B%E6%80%9D%EF%BC%88%E5%85%B6%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="ç§‹æ€ï¼ˆå…¶äºŒï¼‰"><a href="#ç§‹æ€ï¼ˆå…¶äºŒï¼‰" class="headerlink" title="ç§‹æ€ï¼ˆå…¶äºŒï¼‰"></a>ç§‹æ€ï¼ˆå…¶äºŒï¼‰</h1><p>ç§‹é£å¹è€æ¢§æ¡æ ‘ï¼Œå½©ç¬”æ–°é¢˜ç›¸æ€å¥ã€‚</p><p>æƒ…æ·±è‹¥é—®æ·±å‡ è®¸ï¼Œç§‹é£ç§‹æœˆæ·±ç§‹é›¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ²¹å…ˆç”Ÿé€‰é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>transformers BERTé¢„è®­ç»ƒæ¨¡å‹åº¦é‡æ–‡æœ¬ç›¸ä¼¼æ€§</title>
      <link href="/2021/11/04/transformers-BERT%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B%E5%BA%A6%E9%87%8F%E6%96%87%E6%9C%AC%E7%9B%B8%E4%BC%BC%E6%80%A7/"/>
      <url>/2021/11/04/transformers-BERT%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B%E5%BA%A6%E9%87%8F%E6%96%87%E6%9C%AC%E7%9B%B8%E4%BC%BC%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<h1 id="transformers-BERTé¢„è®­ç»ƒæ¨¡å‹åº¦é‡æ–‡æœ¬ç›¸ä¼¼æ€§"><a href="#transformers-BERTé¢„è®­ç»ƒæ¨¡å‹åº¦é‡æ–‡æœ¬ç›¸ä¼¼æ€§" class="headerlink" title="transformers BERTé¢„è®­ç»ƒæ¨¡å‹åº¦é‡æ–‡æœ¬ç›¸ä¼¼æ€§"></a>transformers BERTé¢„è®­ç»ƒæ¨¡å‹åº¦é‡æ–‡æœ¬ç›¸ä¼¼æ€§</h1><p>ç»è¿‡ä¸ä¸“ä¸šäººå£«äº¤æµï¼Œäº†è§£åˆ°ç›®å‰ä¸šå†…å¸¸ç”¨çš„åº¦é‡æ–‡æœ¬ç›¸ä¼¼æ€§çš„åšæ³•æœ‰ä¸¤ç§ï¼Œæ•ˆæœå·®ä¸å¤šï¼š</p><ol><li>æŠŠæ–‡æœ¬Aå’Œæ–‡æœ¬Bæ‹¼æ¥èµ·æ¥ï¼Œè¿›è¡ŒäºŒåˆ†ç±»ä»»åŠ¡ï¼Œåˆ†ç±»æ ‡ç­¾ä¸ºç›¸ä¼¼æˆ–ä¸ç›¸ä¼¼ã€‚è¿™ç§åšæ³•éœ€è¦å¾®è°ƒBERTæ¨¡å‹ï¼Œå’Œæˆ‘ä»¬ä¹‹å‰å¾®è°ƒBERTç”¨äºåƒåœ¾é‚®ä»¶çš„äºŒåˆ†ç±»ä»»åŠ¡æ˜¯ä¸€æ ·çš„æ€è·¯å’Œç»“æœï¼Œå¯ä»¥ç”¨ç½‘ç»œè¾“å‡ºå¤§äº0.5æ˜¯ç›¸ä¼¼ï¼Œå°äº0.5æ˜¯ä¸ç›¸ä¼¼ï¼›</li><li>ç›´æ¥ç”¨æ–‡æœ¬Aå’Œæ–‡æœ¬Båœ¨é¢„è®­ç»ƒæ¨¡å‹ä¸Šåº¦é‡ç›¸ä¼¼æ€§ï¼Œå¾—åˆ°çš„æ˜¯ä¸¤ä¸ª<code>tensor</code>ï¼Œè®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦å³å¯ã€‚è¿™æ ·å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ•°å€¼ï¼Œæ¥è¡¡é‡ç›¸ä¼¼æ€§ã€‚</li></ol><p>ç¬¬ä¸€ç§åšæ³•ä¸å‰é¢ä¸€æ ·ï¼Œå°±ä¸å†™äº†ï¼Œæœ¬æ–‡å±•ç¤ºçš„æ˜¯ç¬¬äºŒç§åšæ³•</p><h2 id="Sentence-Similarity"><a href="#Sentence-Similarity" class="headerlink" title="Sentence Similarity"></a>Sentence Similarity</h2><p>åœ¨<a href="https://huggingface.co/models">Hugging Face/Models</a>æœç´¢ä»»åŠ¡ä¸º<code>Sentence Similarity</code>å’Œè¯­è¨€ä¸º<code>zh</code>çš„æ¨¡å‹ï¼Œæ‰¾åˆ°äº†<a href="https://huggingface.co/symanto/sn-xlm-roberta-base-snli-mnli-anli-xnli">è¿™ä¸€ä¸ª</a>ï¼Œç»™çš„æ ·ä¾‹ä»£ç ç®€å•æ˜äº†ï¼Œæˆ‘ä»¬æ¥è·‘ä¸€ä¸‹è¯•è¯•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> transformers <span class="token keyword">import</span> AutoTokenizer<span class="token punctuation">,</span> AutoModel<span class="token keyword">import</span> torch<span class="token comment">#Mean Pooling - Take attention mask into account for correct averaging</span><span class="token keyword">def</span> <span class="token function">mean_pooling</span><span class="token punctuation">(</span>model_output<span class="token punctuation">,</span> attention_mask<span class="token punctuation">)</span><span class="token punctuation">:</span>    token_embeddings <span class="token operator">=</span> model_output<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">#First element of model_output contains all token embeddings</span>    input_mask_expanded <span class="token operator">=</span> attention_mask<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>expand<span class="token punctuation">(</span>token_embeddings<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> torch<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>token_embeddings <span class="token operator">*</span> input_mask_expanded<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> torch<span class="token punctuation">.</span>clamp<span class="token punctuation">(</span>input_mask_expanded<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token operator">=</span><span class="token number">1e</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">)</span>sentences <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'æˆ‘çˆ±ä½ '</span><span class="token punctuation">,</span> <span class="token string">'æˆ‘å–œæ¬¢ä½ '</span><span class="token punctuation">]</span><span class="token comment"># Load model from HuggingFace Hub</span>tokenizer <span class="token operator">=</span> AutoTokenizer<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">'symanto/sn-xlm-roberta-base-snli-mnli-anli-xnli'</span><span class="token punctuation">)</span>model <span class="token operator">=</span> AutoModel<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">'symanto/sn-xlm-roberta-base-snli-mnli-anli-xnli'</span><span class="token punctuation">)</span><span class="token comment"># æ–‡æœ¬tokenize</span>encoded_input <span class="token operator">=</span> tokenizer<span class="token punctuation">(</span>sentences<span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> truncation<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> return_tensors<span class="token operator">=</span><span class="token string">'pt'</span><span class="token punctuation">)</span><span class="token comment"># Compute token embeddings</span><span class="token keyword">with</span> torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    model_output <span class="token operator">=</span> model<span class="token punctuation">(</span><span class="token operator">**</span>encoded_input<span class="token punctuation">)</span><span class="token comment"># Perform pooling. In this case, max pooling.</span>sentence_embeddings <span class="token operator">=</span> mean_pooling<span class="token punctuation">(</span>model_output<span class="token punctuation">,</span> encoded_input<span class="token punctuation">[</span><span class="token string">'attention_mask'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Sentence embeddings:"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>sentence_embeddings<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¾—åˆ°è¾“å‡ºä¸ºï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">tensor([[ 0.2630,  1.8734, -0.6537,  ..., -0.4792, -0.0700, -0.0297],        [ 0.0908,  1.9412, -0.8271,  ..., -0.5505, -0.2465, -0.1056]])<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™æ˜¯ä¸€ä¸ªäºŒç»´<code>tensor</code>ï¼Œæˆ‘ä»¬è®¡ç®—ä½™å¼¦è·ç¦»ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">similarity <span class="token operator">=</span> torch<span class="token punctuation">.</span>cosine_similarity<span class="token punctuation">(</span>sentence_embeddings<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sentence_embeddings<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>similarity<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¾—åˆ°çš„ç»“æœä¸º;</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">0.8886765241622925<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¡¨é¢è¿™ä¸¤å¥è¯æ˜¯éå¸¸ç›¸ä¼¼çš„ã€‚</p><h2 id="æ›´æ¢æ¨¡å‹"><a href="#æ›´æ¢æ¨¡å‹" class="headerlink" title="æ›´æ¢æ¨¡å‹"></a>æ›´æ¢æ¨¡å‹</h2><p>ç°åœ¨æˆ‘ä»¬æŠŠæ¨¡å‹æ¢æˆç†Ÿæ‚‰çš„å“ˆå·¥å¤§çš„<code>hfl/chinese-roberta-wwm-ext</code>æ¨¡å‹ï¼Œå†è·‘ä¸€ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> transformers <span class="token keyword">import</span> AutoTokenizer<span class="token punctuation">,</span> AutoModel<span class="token keyword">import</span> torch<span class="token comment">#Mean Pooling - Take attention mask into account for correct averaging</span><span class="token keyword">def</span> <span class="token function">mean_pooling</span><span class="token punctuation">(</span>model_output<span class="token punctuation">,</span> attention_mask<span class="token punctuation">)</span><span class="token punctuation">:</span>    token_embeddings <span class="token operator">=</span> model_output<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">#First element of model_output contains all token embeddings</span>    input_mask_expanded <span class="token operator">=</span> attention_mask<span class="token punctuation">.</span>unsqueeze<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>expand<span class="token punctuation">(</span>token_embeddings<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> torch<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>token_embeddings <span class="token operator">*</span> input_mask_expanded<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> torch<span class="token punctuation">.</span>clamp<span class="token punctuation">(</span>input_mask_expanded<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">min</span><span class="token operator">=</span><span class="token number">1e</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">)</span>sentences <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'æˆ‘çˆ±ä½ '</span><span class="token punctuation">,</span> <span class="token string">'æˆ‘å–œæ¬¢ä½ '</span><span class="token punctuation">]</span><span class="token comment"># Load model from HuggingFace Hub</span>tokenizer <span class="token operator">=</span> AutoTokenizer<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">'hfl/chinese-roberta-wwm-ext'</span><span class="token punctuation">)</span>model <span class="token operator">=</span> AutoModel<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">'hfl/chinese-roberta-wwm-ext'</span><span class="token punctuation">)</span><span class="token comment"># æ–‡æœ¬tokenize</span>encoded_input <span class="token operator">=</span> tokenizer<span class="token punctuation">(</span>sentences<span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> truncation<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> return_tensors<span class="token operator">=</span><span class="token string">'pt'</span><span class="token punctuation">)</span><span class="token comment"># Compute token embeddings</span><span class="token keyword">with</span> torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    model_output <span class="token operator">=</span> model<span class="token punctuation">(</span><span class="token operator">**</span>encoded_input<span class="token punctuation">)</span><span class="token comment"># Perform pooling. In this case, max pooling.</span>sentence_embeddings <span class="token operator">=</span> mean_pooling<span class="token punctuation">(</span>model_output<span class="token punctuation">,</span> encoded_input<span class="token punctuation">[</span><span class="token string">'attention_mask'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Sentence embeddings:"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>sentence_embeddings<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¾—åˆ°è¾“å‡ºä¸ºï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">tensor([[ 0.4178, -0.1403,  0.1729,  ..., -0.5353,  0.1616, -0.5226],        [ 0.3651,  0.0084, -0.1581,  ..., -0.5166,  0.2051, -0.5374]])<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è®¡ç®—ä½™å¼¦è·ç¦»ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">similarity <span class="token operator">=</span> torch<span class="token punctuation">.</span>cosine_similarity<span class="token punctuation">(</span>sentence_embeddings<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sentence_embeddings<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>similarity<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¾—åˆ°çš„ç»“æœä¸º;</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">0.9244731664657593<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¡¨é¢å“ˆå·¥å¤§æ¨¡å‹è®¤ä¸ºè¿™ä¸¤å¥è¯æ›´ç›¸ä¼¼ã€‚</p><p>è‡³æ­¤æˆ‘ä»¬æŠŠæ–‡æœ¬ç›¸ä¼¼æ€§åº¦é‡ä¹ŸæŒ‰ç…§ä¸šç•Œç›®å‰æœ€å¸¸ç”¨æœ€æ ‡æ†çš„æ–¹æ³•åšå®Œå•¦ï¼Œç»ä¸“ä¸šäººå£«é‰´å®šï¼Œæˆ‘è·ç¦»NLPé¡¶ä¼šACLå·²ç»å¾ˆè¿‘äº†<span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦NLP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®è°ƒtransformersè¿›è¡ŒBERTåƒåœ¾é‚®ä»¶åˆ†ç±»</title>
      <link href="/2021/11/03/%E5%BE%AE%E8%B0%83transformers%E8%BF%9B%E8%A1%8C%E5%9E%83%E5%9C%BE%E9%82%AE%E4%BB%B6%E5%88%86%E7%B1%BB/"/>
      <url>/2021/11/03/%E5%BE%AE%E8%B0%83transformers%E8%BF%9B%E8%A1%8C%E5%9E%83%E5%9C%BE%E9%82%AE%E4%BB%B6%E5%88%86%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®è°ƒtransformersè¿›è¡ŒBERTåƒåœ¾é‚®ä»¶åˆ†ç±»"><a href="#å¾®è°ƒtransformersè¿›è¡ŒBERTåƒåœ¾é‚®ä»¶åˆ†ç±»" class="headerlink" title="å¾®è°ƒtransformersè¿›è¡ŒBERTåƒåœ¾é‚®ä»¶åˆ†ç±»"></a>å¾®è°ƒtransformersè¿›è¡ŒBERTåƒåœ¾é‚®ä»¶åˆ†ç±»</h1><p>ç°åœ¨æˆ‘ä»¬ä½¿ç”¨Hugging Faceçš„transformersåŒ…æä¾›çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œåœ¨æˆ‘ä»¬ä¹‹å‰åšçš„åƒåœ¾é‚®ä»¶åˆ†ç±»ä»»åŠ¡ä¸Šåšä¸€ä¸ªå¾®è°ƒï¼Œä¸ºå°†æ¥æˆ‘ä»¬çš„å…·ä½“ä»»åŠ¡åšå‡†å¤‡ã€‚</p><p>æœ¬æ–‡ä¸»è¦å‚è€ƒ<a href="https://mccormickml.com/2019/07/22/BERT-fine-tuning/#21-download--extract">è¿™ç¯‡è‹±æ–‡åšå®¢</a>ï¼Œå¹¶ç»“åˆæˆ‘ä»¬çš„æ•°æ®é›†å®Œæˆã€‚</p><p>æœ¬æ–‡ä½¿ç”¨<code>PyTorch</code>æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œåœ¨<code>GTX 1080ti</code>æ˜¾å¡ä¸Šè¿è¡Œã€‚</p><p>æœ¬æ–‡è·Ÿä¸Šä¸€ç¯‡çš„ä¸»è¦åŒºåˆ«åœ¨äºä½¿ç”¨çš„æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®é›†ï¼Œè€Œä¸æ˜¯Hugging Faceå°è£…å¥½çš„æ•°æ®é›†ã€‚</p><h2 id="æ•°æ®é›†è¯»å…¥ä¸åœç”¨è¯å»é™¤"><a href="#æ•°æ®é›†è¯»å…¥ä¸åœç”¨è¯å»é™¤" class="headerlink" title="æ•°æ®é›†è¯»å…¥ä¸åœç”¨è¯å»é™¤"></a>æ•°æ®é›†è¯»å…¥ä¸åœç”¨è¯å»é™¤</h2><p>é¦–å…ˆè¿˜æ˜¯è¯»å…¥æ•°æ®ï¼Œè¿™éƒ¨åˆ†ä¸ä¹‹å‰ç”¨BOWç­‰æ–¹æ³•çš„æ—¶å€™åŸºæœ¬ä¸€æ ·ã€‚é¦–å…ˆæ˜¯è¯»å…¥<code>index</code>æ–‡ä»¶ä½œä¸ºç´¢å¼•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> codecs<span class="token keyword">import</span> re<span class="token keyword">import</span> jiebaindex <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">,</span> names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'spam'</span><span class="token punctuation">,</span> <span class="token string">'path'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># è¯»å…¥æ˜¯ä¸¤åˆ—ï¼Œä¸€åˆ—spam ä¸€åˆ—path</span>index<span class="token punctuation">.</span>spam <span class="token operator">=</span> index<span class="token punctuation">.</span>spam<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token string">'spam'</span> <span class="token keyword">else</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># æ•°æ®æ ‡ç­¾ï¼Œæ ‡ç­¾ä¸ºspamçš„è®¾ç½®ä¸º1 å¦åˆ™è®¾ç½®ä¸º0</span>index<span class="token punctuation">.</span>path <span class="token operator">=</span> index<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># æ›´æ”¹æ–‡ä»¶è·¯å¾„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>spam</code>åˆ—æ˜¯æ ‡ç­¾åˆ—ï¼Œè‹¥å€¼ä¸º<code>spam</code>åˆ™ä¸ºåƒåœ¾é‚®ä»¶ï¼›<code>path</code>åˆ—æ˜¯é‚®ä»¶æ–‡ä»¶å­˜å‚¨çš„è·¯å¾„åˆ—ï¼Œå¯ä»¥ç›´æ¥è¯»å–ã€‚è¿™æ˜¯ä¸€ä¸ªäºŒåˆ†ç±»ä»»åŠ¡ã€‚</p><p>ç„¶åæ˜¯æŒ‰ç…§è·¯å¾„è¯»å…¥é‚®ä»¶å†…å®¹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_mail_content</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    éå†å¾—åˆ°æ¯å°é‚®ä»¶çš„è¯æ±‡å­—ç¬¦ä¸²    :param path: é‚®ä»¶è·¯å¾„    :return:(Str)content    """</span>    <span class="token keyword">with</span> codecs<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"gbk"</span><span class="token punctuation">,</span> errors<span class="token operator">=</span><span class="token string">"ignore"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span> <span class="token comment"># ä»¥gbkç¼–ç æ‰“å¼€æ–‡ä»¶ï¼Œå¿½ç•¥é”™è¯¯</span>        lines <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># è¯»å…¥æ‰€æœ‰è¡Œï¼Œå¾—åˆ°ä¸€ä¸ªåŒ…å«å¤šä¸ªå­—ç¬¦ä¸²çš„listï¼Œä¸€è¡Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> lines<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\n'</span><span class="token punctuation">:</span>            <span class="token comment"># å»é™¤ç¬¬ä¸€ä¸ªç©ºè¡Œï¼Œå³åœ¨ç¬¬ä¸€ä¸ªç©ºè¡Œä¹‹å‰çš„é‚®ä»¶åè®®å†…å®¹å…¨éƒ¨èˆå¼ƒ</span>            lines <span class="token operator">=</span> lines<span class="token punctuation">[</span>i<span class="token punctuation">:</span><span class="token punctuation">]</span>            <span class="token keyword">break</span>    content <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment"># strip()æ˜¯ä¸¢å¼ƒæ¢è¡Œç¬¦ï¼Œsplit()æ˜¯æŒ‰ç…§ç©ºæ ¼åˆ†éš”å¼€ï¼ˆèµ·åˆ°å‰”é™¤å¤šä¸ªç©ºæ ¼åªç•™ä¸‹ä¸€ä¸ªç©ºæ ¼çš„ä½œç”¨ï¼‰ï¼Œç„¶åå†joinåœ¨ä¸€èµ·</span>    <span class="token comment"># print(content)</span>    <span class="token keyword">return</span> contentindex<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span> <span class="token operator">=</span> index<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> get_mail_content<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># å¯¹contentåˆ—ä½¿ç”¨å‡½æ•°ï¼Œå¾—åˆ°é‚®ä»¶å†…å®¹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®šä¹‰<code>get_mail_content()</code>å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªæ¢è¡Œç¬¦ä¹‹å‰çš„å†…å®¹ä¸ºè‹±æ–‡å†…å®¹ï¼Œç›´æ¥ä¸¢å¼ƒï¼›ä¸­æ–‡å†…å®¹æŒ‰è¡Œè¯»å…¥å¹¶æ•´åˆï¼Œå†™å…¥æ–°å»ºçš„<code>content</code>åˆ—ã€‚</p><p>ç°åœ¨æˆ‘ä»¬è½½å…¥æ•°æ®é›†æä¾›çš„åœç”¨è¯åˆ—è¡¨ï¼Œç„¶åä»<code>content</code>åˆ—ä¸­å»é™¤åœç”¨è¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">load_stop_word</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è¯»å‡ºåœç”¨è¯åˆ—è¡¨    :return: (List)_stop_words    """</span>    <span class="token keyword">with</span> codecs<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"stop"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span> <span class="token comment"># è½½å…¥åœç”¨è¯åˆ—è¡¨</span>        lines <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># è¯»å…¥æ‰€æœ‰è¡Œï¼Œå¾—åˆ°ä¸€ä¸ªåŒ…å«å¤šä¸ªå­—ç¬¦ä¸²çš„listï¼Œä¸€è¡Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span>    _stop_words <span class="token operator">=</span> <span class="token punctuation">[</span>i<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> lines<span class="token punctuation">]</span> <span class="token comment"># èˆå¼ƒæ‰æ‰€æœ‰æ¢è¡Œç¬¦</span>    <span class="token keyword">return</span> _stop_wordsstop_words <span class="token operator">=</span> load_stop_word<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">create_word_dict</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> stop_words_list<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    ä¾æ®é‚®ä»¶çš„è¯æ±‡å­—ç¬¦ä¸²ç»Ÿè®¡è¯æ±‡å‡ºç°è®°å½•ï¼Œä¾æ®åœæ­¢è¯åˆ—è¡¨é™¤å»æŸäº›è¯è¯­    :param content: é‚®ä»¶çš„è¯æ±‡å­—ç¬¦ä¸²    :param stop_words_list:åœæ­¢è¯åˆ—è¡¨    :return:(Dict)word_dict    """</span>    word_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    word_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token comment"># word_dict key:word, value:1</span>    content <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">u"[\u4e00-\u9fa5]"</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>     <span class="token comment"># æ­£åˆ™è¡¨è¾¾å¼ï¼Œåªä¿ç•™æ±‰å­—ï¼Œå…¶ä»–å­—ç¬¦å…¨éƒ¨å‰”é™¤ï¼Œè¿™å¥å¾—åˆ°çš„æ˜¯å«æœ‰å¤šä¸ªå­—ç¬¦ä¸²çš„listï¼Œå…¶ä¸­ä¸€ä¸ªæ±‰å­—ä¸€ä¸ªå­—ç¬¦ä¸²</span>    content <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token comment"># æ‹¼èµ·æ¥</span>    word_list_temp <span class="token operator">=</span> jieba<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token comment"># ä½¿ç”¨jiebaè¿›è¡Œåˆ†è¯</span>    <span class="token keyword">for</span> word <span class="token keyword">in</span> word_list_temp<span class="token punctuation">:</span>        <span class="token keyword">if</span> word <span class="token operator">!=</span> <span class="token string">''</span> <span class="token keyword">and</span> word <span class="token keyword">not</span> <span class="token keyword">in</span> stop_words_list<span class="token punctuation">:</span> <span class="token comment"># å»æ‰ç©ºè¯å’Œåœæ­¢è¯</span>            word_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>word<span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>word_list<span class="token punctuation">)</span>index<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span> <span class="token operator">=</span> index<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> create_word_dict<span class="token punctuation">(</span>x<span class="token punctuation">,</span> stop_words<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># å¾—åˆ°æ–°çš„åˆ—contentï¼Œå»é™¤äº†åœç”¨è¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ°è¿™é‡Œæ•°æ®è¯»å…¥å’Œé¢„å¤„ç†å°±åšå®Œå•¦ã€‚ç°åœ¨çœ‹åˆ°çš„<code>index</code>å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š</p><table><thead><tr><th align="left"></th><th align="right">spam</th><th align="right">path</th><th align="right">content</th></tr></thead><tbody><tr><td align="left">0</td><td align="right">1</td><td align="right">./data/000/000</td><td align="right">éè´¢åŠ¡çº æ·¼ç‰Ÿè†çª†èŠ¾æ²™ç›˜æ¨¡æ‹Ÿè¿ç”¨è´¢åŠ¡å²³ç¡–å²£å–èŠ¾ç ‘è¯¾ç¨‹èƒŒæ™¯ä¸€ä½ç®¡ç†æŠ€æœ¯äººå‘˜æ¸…æ¥šæ‡‚å¾—æŠ€æœ¯è§’åº¦è¡¡é‡åˆâ€¦</td></tr><tr><td align="left">1</td><td align="right">0</td><td align="right">./data/000/001</td><td align="right">è®²å­”å­åäººæ•…äº‹ä¸€ä¸ªé¢†å¯¼å›åˆ°å®¶ä¹¡å„¿å­æ„Ÿæƒ…è´ªè´¢å­™å­å­”ä¸ºå’Œç¦é¢†å¯¼å¼Ÿå¼Ÿé­å®—ä¸‡é©¬è½¦æ´‹å¦è€ƒå¯Ÿæ°‘ä¿—å®¶è¿‡å¹´å­”â€¦</td></tr><tr><td align="left">2</td><td align="right">1</td><td align="right">./data/000/002</td><td align="right">å°Šæ•¬è´µå…¬å¸è´¢åŠ¡ç»ç†è´Ÿè´£äººæ‚¨å¥½æ·±åœ³é‡‘æµ·å®ä¸šæœ‰é™å…¬å¸å¹¿å·ä¸œèçœå¸‚åˆ†å…¬å¸æˆ‘å¸è‰¯å¥½ç¤¾ä¼šå…³ç³»å®åŠ›æ¯æœˆè¿›â€¦</td></tr><tr><td align="left">3</td><td align="right">1</td><td align="right">./data/000/003</td><td align="right">è´µå…¬å¸è´Ÿè´£äººç»ç†è´¢åŠ¡æ‚¨å¥½æ·±åœ³å¸‚åé¾™å…¬å¸å—å¤šå®¶å…¬å¸å§”æ‰˜å‘å¤–ä½ç‚¹ä»£å¼€éƒ¨åˆ†å¢å€¼ç¨ç”µè„‘å‘ç¥¨å·¦å³æ™®é€šå•†â€¦</td></tr><tr><td align="left">4</td><td align="right">1</td><td align="right">./data/000/004</td><td align="right">è¿™æ˜¯ä¸€å°æ ¼å¼ä¿¡ä»¶å¹¿å‘Šç½‘ç»œç”µè¯åŒ…å¹´å¡å…ƒé•¿é€”å¸‚è¯å…¨åŒ…æœ€å¿«è®ºå›é‚®å€æœç´¢ä¸“å®¶æœ€å¥½é‚®ä»¶ç¾¤å‘ä¸“å®¶è®ºå›çŸ­ä¿¡â€¦</td></tr><tr><td align="left">â€¦</td><td align="right">â€¦</td><td align="right">â€¦</td><td align="right">â€¦</td></tr><tr><td align="left">64615</td><td align="right">1</td><td align="right">./data/215/115</td><td align="right">è´µå…¬å¸è´Ÿè´£äººç»ç†è´¢åŠ¡æ‚¨å¥½å…¬å¸æ·±åœ³å¸‚åæºå®ä¸šæœ‰é™å…¬å¸å…¬å¸å®åŠ›é›„åšå…¨å›½å„åœ°åˆ†å…¬å¸æœ‰ç€è‰¯å¥½ç¤¾ä¼šå…³ç³»â€¦</td></tr><tr><td align="left">64616</td><td align="right">1</td><td align="right">./data/215/116</td><td align="right">å°Šæ•¬å•†å®¶æœ‹å‹æ‚¨å¥½æ·±åœ³å¸‚è£•åå®ä¸šæœ‰é™å…¬å¸æˆ‘å¸å®åŠ›é›„åšæœ‰ç€è‰¯å¥½ç¤¾ä¼šå…³ç³»éƒ¨åˆ†å¤–çœå¸‚ç¥¨æ®è¿›é¡¹è¾ƒå¤šç°å®Œâ€¦</td></tr><tr><td align="left">64617</td><td align="right">1</td><td align="right">./data/215/117</td><td align="right">è´µå…¬å¸è´Ÿè´£äººç»ç†è´¢åŠ¡æ‚¨å¥½æ·±åœ³å¸‚åº·ç‰¹å®ä¸šæœ‰é™å…¬å¸å…¬å¸å…¨å›½å„åœ°è®¾æœ‰åˆ†å…¬å¸å¹¿å·ä¸œèç­‰å¸‚åˆ†å…¬å¸å…¨å›½åˆ†â€¦</td></tr><tr><td align="left">64618</td><td align="right">1</td><td align="right">./data/215/118</td><td align="right">è¿™æ˜¯ä¸€ä¸ªæ ¼å¼é‚®ä»¶</td></tr><tr><td align="left">64619</td><td align="right">1</td><td align="right">./data/215/119</td><td align="right">è´µå…¬å¸è´Ÿè´£äººç»ç†è´¢åŠ¡æ‚¨å¥½æ·±åœ³å¸‚åº·ç‰¹å®ä¸šæœ‰é™å…¬å¸å…¬å¸å…¨å›½å„åœ°è®¾æœ‰åˆ†å…¬å¸å¹¿å·ä¸œèç­‰å¸‚åˆ†å…¬å¸å…¨å›½åˆ†â€¦</td></tr></tbody></table><h2 id="æ–‡æœ¬tokenize"><a href="#æ–‡æœ¬tokenize" class="headerlink" title="æ–‡æœ¬tokenize"></a>æ–‡æœ¬tokenize</h2><p>ä¸ºäº†æŠŠæˆ‘ä»¬çš„æ•°æ®é›†å–‚ç»™<code>transformers</code>çš„BERTæ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæˆ‘ä»¬çš„æ–‡æœ¬åš<code>tokenize</code>æ˜ å°„ä¸ºBERTæŒ‡å®šçš„è¯æ±‡è¡¨ä¸­çš„åºå·ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> transformers <span class="token keyword">import</span> BertTokenizer<span class="token comment"># è½½å…¥Bert tokenizer.</span>tokenizer <span class="token operator">=</span> BertTokenizer<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">'bert-base-uncased'</span><span class="token punctuation">,</span> do_lower_case<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åæˆ‘ä»¬æŠŠ<code>index</code>ä¸­çš„æ–‡æœ¬æå–å‡ºæ¥ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">sentences <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>index<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶åæŠŠæ‰€æœ‰<code>index</code>ä¸­çš„æ–‡æœ¬éƒ½åštokenizeï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">input_ids <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>attention_masks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">for</span> sent <span class="token keyword">in</span> sentences<span class="token punctuation">:</span>    <span class="token comment"># `encode_plus` çš„æ­¥éª¤:</span>    <span class="token comment">#   (1) åˆ†å‰²æ–‡æœ¬ï¼›</span>    <span class="token comment">#   (2) åœ¨æ–‡æœ¬å¼€å¤´åŠ å…¥ `[CLS]` ç¬¦å·.</span>    <span class="token comment">#   (3) åœ¨æ–‡æœ¬æœ«å°¾åŠ å…¥ `[SEP]` ç¬¦å·.</span>    <span class="token comment">#   (4) æŠŠæ–‡æœ¬åˆ†å‰²åçš„è¯åºåˆ—æ˜ å°„ä¸ºç¼–å·åºåˆ—.</span>    <span class="token comment">#   (5) æŠŠç¼–å·åºåˆ—æ·»åŠ  `PAD` ç¬¦å·æ‰©å±•åˆ° `max_length`.</span>    <span class="token comment">#   (6) æä¾›ä¸€ä¸ª `mask` åºåˆ—ï¼Œ å€¼ä¸º1è¡¨ç¤ºå¯¹åº”çš„è¯ä¸æ˜¯æ‰©å……çš„ï¼Œå€¼ä¸º0è¡¨ç¤ºå¯¹åº”çš„è¯æ˜¯æ‰©å……çš„ç©ºç™½.</span>    encoded_dict <span class="token operator">=</span> tokenizer<span class="token punctuation">.</span>encode_plus<span class="token punctuation">(</span>                        sent<span class="token punctuation">,</span>                      <span class="token comment"># è¾“å…¥çš„å¥å­.</span>                        add_special_tokens <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token comment"># æ·»åŠ  '[CLS]', '[SEP]'</span>                        max_length <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">,</span>           <span class="token comment"># æ‰©å±•åˆ°çš„æœ€å¤§é•¿åº¦.</span>                        pad_to_max_length <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span>                        return_attention_mask <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span>   <span class="token comment"># æä¾›mask.</span>                        return_tensors <span class="token operator">=</span> <span class="token string">'pt'</span><span class="token punctuation">,</span>     <span class="token comment"># è¿”å› pytorch tensors.</span>                   <span class="token punctuation">)</span>        <span class="token comment"># æŠŠæ‰€æœ‰ç¼–å·åºåˆ—æ•´åˆ.    </span>    input_ids<span class="token punctuation">.</span>append<span class="token punctuation">(</span>encoded_dict<span class="token punctuation">[</span><span class="token string">'input_ids'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token comment"># æ‰€æœ‰maskæ•´åˆ.</span>    attention_masks<span class="token punctuation">.</span>append<span class="token punctuation">(</span>encoded_dict<span class="token punctuation">[</span><span class="token string">'attention_mask'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªå›¾å¾ˆç®€æ´æ˜äº†ï¼š</p><p><img src="token.png"></p><p>ç„¶åæˆ‘ä»¬æŠŠå¾—åˆ°çš„ç¼–å·åºåˆ—é›†å’Œmaské›†ï¼Œè¿˜æœ‰æ•°æ®é›†çš„æ ‡ç­¾è½¬åŒ–ä¸º<code>PyTorch</code>éœ€è¦çš„å½¢å¼ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">input_ids <span class="token operator">=</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span>input_ids<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>attention_masks <span class="token operator">=</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span>attention_masks<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>labels <span class="token operator">=</span> index<span class="token punctuation">[</span><span class="token string">'spam'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>valueslabels <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span>labels<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ†å‰²å¹¶å°è£…æ•°æ®é›†"><a href="#åˆ†å‰²å¹¶å°è£…æ•°æ®é›†" class="headerlink" title="åˆ†å‰²å¹¶å°è£…æ•°æ®é›†"></a>åˆ†å‰²å¹¶å°è£…æ•°æ®é›†</h2><p>æˆ‘ä»¬è®­ç»ƒæ¨¡å‹æ˜¯è¦ç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„<code>input_ids</code>, <code>attention_masks</code>å’Œ<code>labels</code>çš„ï¼Œæˆ‘ä»¬å¯¹æ•°æ®é›†åšçš„æ‰€æœ‰å¤„ç†æœ€åå¾—åˆ°çš„å°±æ˜¯è¿™ä¸‰ä¸ªå˜é‡ï¼Œç°åœ¨å¯¹å®ƒä»¬åšåˆ†å‰²ï¼Œåˆ†åˆ«ç”¨æ¥è®­ç»ƒå’ŒéªŒè¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> TensorDataset<span class="token punctuation">,</span> random_split<span class="token comment"># å°è£…è¿›TensorDataset.</span>dataset <span class="token operator">=</span> TensorDataset<span class="token punctuation">(</span>input_ids<span class="token punctuation">,</span> attention_masks<span class="token punctuation">,</span> labels<span class="token punctuation">)</span>train_size <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">0.9</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token punctuation">)</span>val_size <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span> <span class="token operator">-</span> train_size<span class="token comment"># 90%è®­ç»ƒï¼Œ10%éªŒè¯</span>train_dataset<span class="token punctuation">,</span> val_dataset <span class="token operator">=</span> random_split<span class="token punctuation">(</span>dataset<span class="token punctuation">,</span> <span class="token punctuation">[</span>train_size<span class="token punctuation">,</span> val_size<span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å£°æ˜ä¸¤ä¸ª<code>DataLoader</code>ï¼Œç”¨äºåœ¨è®­ç»ƒçš„æ—¶å€™è½½å…¥æ•°æ®ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">import</span> DataLoader<span class="token punctuation">,</span> RandomSampler<span class="token punctuation">,</span> SequentialSampler<span class="token comment"># æ¯è½®è®­ç»ƒè¾“å…¥çš„æ•°æ®é‡ï¼ŒBERTä½œè€…æ¨èçš„å€¼æ˜¯16æˆ–32</span>batch_size <span class="token operator">=</span> <span class="token number">32</span><span class="token comment"># ä¸¤ä¸ªDataLoadersï¼Œåˆ†åˆ«è½½å…¥è®­ç»ƒé›†å’ŒéªŒè¯é›†.</span>train_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>            train_dataset<span class="token punctuation">,</span>            sampler <span class="token operator">=</span> RandomSampler<span class="token punctuation">(</span>train_dataset<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># éšæœºé€‰æ‹©batchè®­ç»ƒ</span>            batch_size <span class="token operator">=</span> batch_size        <span class="token punctuation">)</span>validation_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>            val_dataset<span class="token punctuation">,</span>            sampler <span class="token operator">=</span> SequentialSampler<span class="token punctuation">(</span>val_dataset<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># æœ‰åºé€‰æ‹©batchæµ‹è¯•</span>            batch_size <span class="token operator">=</span> batch_size        <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å‡†å¤‡è®­ç»ƒ"><a href="#å‡†å¤‡è®­ç»ƒ" class="headerlink" title="å‡†å¤‡è®­ç»ƒ"></a>å‡†å¤‡è®­ç»ƒ</h2><p>ç°åœ¨æ‰“å¼€æ˜¾å¡ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># Tell PyTorch to use the GPU.    </span>    device <span class="token operator">=</span> torch<span class="token punctuation">.</span>device<span class="token punctuation">(</span><span class="token string">"cuda"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'There are %d GPU(s) available.'</span> <span class="token operator">%</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>device_count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'We will use the GPU:'</span><span class="token punctuation">,</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>get_device_name<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># If not...</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'No GPU available, using the CPU instead.'</span><span class="token punctuation">)</span>    device <span class="token operator">=</span> torch<span class="token punctuation">.</span>device<span class="token punctuation">(</span><span class="token string">"cpu"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œçš„è¾“å‡ºæ˜¯ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">There are 1 GPU(s) available.We will use the GPU: NVIDIA GeForce GTX 1080 Ti<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æˆ‘ä»¬æ¥è½½å…¥BERTæ–‡æœ¬åˆ†ç±»æ¨¡å‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> transformers <span class="token keyword">import</span> BertForSequenceClassification<span class="token punctuation">,</span> AdamW<span class="token punctuation">,</span> BertConfig<span class="token comment"># è¿™æ˜¯ä¸€ä¸ª12å±‚çš„æ¨¡å‹ï¼Œæœ€åä¸€å±‚è¾“å‡ºæ˜¯æ ‡ç­¾</span>model <span class="token operator">=</span> BertForSequenceClassification<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span>    <span class="token string">"bert-base-uncased"</span><span class="token punctuation">,</span>    num_labels <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment"># äºŒåˆ†ç±»ä»»åŠ¡</span>    output_attentions <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token comment"># ä¸è¿”å› attentions weights.</span>    output_hidden_states <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token comment"># ä¸è¿”å›æ‰€æœ‰çš„ hidden-states.</span><span class="token punctuation">)</span><span class="token comment"># å‘Šè¯‰PyTorchè¿™ä¸ªæ¨¡å‹è¦åœ¨GPUä¸Šè¿è¡Œ</span>model<span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†æ¥è®¾ç½®ä¸€ä¸ªä¼˜åŒ–å™¨ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">optimizer <span class="token operator">=</span> AdamW<span class="token punctuation">(</span>model<span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                  lr <span class="token operator">=</span> <span class="token number">2e</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment"># å­¦ä¹ ç‡ï¼Œç½‘ç»œå‚æ•°çš„æ›´æ–°ç³»æ•°</span>                  eps <span class="token operator">=</span> <span class="token number">1e</span><span class="token operator">-</span><span class="token number">8</span> <span class="token comment"># å¦‚æœæ–°æ—§lrä¹‹é—´çš„å·®å¼‚å°äºepsï¼Œåˆ™å¿½ç•¥æ­¤æ¬¡æ›´æ–°</span>                <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å†æ¥è®¾ç½®ä¸€ä¸ªå­¦ä¹ ç‡è°ƒæ•´å™¨ï¼Œç”¨äºè®©å­¦ä¹ ç‡åœ¨warm-upï¼ˆå³åœ¨<code>num_warmup_steps</code>åå‡é«˜è‡³<code>optimizer</code>ä¸­çš„é¢„å®šå€¼ï¼‰é˜¶æ®µåï¼Œç„¶ååœ¨<code>total_steps</code>æ¬¡è®­ç»ƒåçº¿æ€§é€’å‡è‡³0ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> transformers <span class="token keyword">import</span> get_linear_schedule_with_warmup<span class="token comment"># å¾®è°ƒçš„è®­ç»ƒè½®æ¬¡æ•°ï¼ŒBERTä½œè€…å»ºè®®æ˜¯2~4è½®</span>epochs <span class="token operator">=</span> <span class="token number">4</span><span class="token comment">#è®­ç»ƒæ­¥éª¤æ•° [number of batches] x [number of epochs]. </span>total_steps <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>train_dataloader<span class="token punctuation">)</span> <span class="token operator">*</span> epochs<span class="token comment"># å­¦ä¹ ç‡è°ƒæ•´å™¨</span>scheduler <span class="token operator">=</span> get_linear_schedule_with_warmup<span class="token punctuation">(</span>optimizer<span class="token punctuation">,</span>                                             num_warmup_steps <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>                                            num_training_steps <span class="token operator">=</span> total_steps<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®šä¹‰ä¸€ä¸ªå‡½æ•°ç”¨äºè®¡ç®—åˆ†ç±»å‡†ç¡®ç‡ï¼Œä¸€ä¸ªå‡½æ•°ç”¨äºè®¡ç®—æ—¶é—´æ¶ˆè€—ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> time<span class="token keyword">import</span> datetime<span class="token keyword">def</span> <span class="token function">flat_accuracy</span><span class="token punctuation">(</span>preds<span class="token punctuation">,</span> labels<span class="token punctuation">)</span><span class="token punctuation">:</span>    pred_flat <span class="token operator">=</span> np<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span>preds<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span>    labels_flat <span class="token operator">=</span> labels<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>pred_flat <span class="token operator">==</span> labels_flat<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">len</span><span class="token punctuation">(</span>labels_flat<span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">format_time</span><span class="token punctuation">(</span>elapsed<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># å–è¿‘ä¼¼å€¼</span>    elapsed_rounded <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>elapsed<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># è½¬åŒ–ä¸ºæ—¶åˆ†ç§’</span>    <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span>datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>seconds<span class="token operator">=</span>elapsed_rounded<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¾®è°ƒè®­ç»ƒ"><a href="#å¾®è°ƒè®­ç»ƒ" class="headerlink" title="å¾®è°ƒè®­ç»ƒ"></a>å¾®è°ƒè®­ç»ƒ</h2><p>ç°åœ¨ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œç»ˆäºå¯ä»¥å¼€å§‹å¾®è°ƒæ¨¡å‹å•¦ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> random<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token comment"># å›ºå®šéšæœºæ•°ç§å­ï¼Œä½¿å¾—å®éªŒç»“æœå¯é‡å¤</span>seed_val <span class="token operator">=</span> <span class="token number">42</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span>seed_val<span class="token punctuation">)</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span>seed_val<span class="token punctuation">)</span>torch<span class="token punctuation">.</span>manual_seed<span class="token punctuation">(</span>seed_val<span class="token punctuation">)</span>torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>manual_seed_all<span class="token punctuation">(</span>seed_val<span class="token punctuation">)</span><span class="token comment"># å­˜å‚¨è®­ç»ƒçŠ¶æ€</span>training_stats <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token comment"># ä»£ç å¼€å§‹è¿è¡Œçš„æ—¶é—´</span>total_t0 <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># æ¯ä¸€è½®è®­ç»ƒï¼š</span><span class="token keyword">for</span> epoch_i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> epochs<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># ========================================</span>    <span class="token comment">#               è®­ç»ƒè¿‡ç¨‹</span>    <span class="token comment"># ========================================</span>        <span class="token comment"># Perform one full pass over the training set.</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'======== Epoch {:} / {:} ========'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>epoch_i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> epochs<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Training...'</span><span class="token punctuation">)</span>    <span class="token comment"># å½“å‰æ—¶é—´</span>    t0 <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æœ¬è½®è®­ç»ƒloss</span>    total_train_loss <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># æŠŠBERTæ¨¡å‹è®¾ç½®ä¸ºè®­ç»ƒçŠ¶æ€</span>    model<span class="token punctuation">.</span>train<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æ¯ä¸ªBatchçš„æ•°æ®ï¼š</span>    <span class="token keyword">for</span> step<span class="token punctuation">,</span> batch <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>train_dataloader<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è®¾ç½®æ¯40ä¸ªbatchè¾“å‡ºä¸€æ¬¡log</span>        <span class="token keyword">if</span> step <span class="token operator">%</span> <span class="token number">40</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">and</span> <span class="token keyword">not</span> step <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token comment"># æ—¶é—´æ¶ˆè€—</span>            elapsed <span class="token operator">=</span> format_time<span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> t0<span class="token punctuation">)</span>                        <span class="token comment"># è®­ç»ƒè¿›ç¨‹</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'  Batch {:&gt;5,}  of  {:&gt;5,}.    Elapsed: {:}.'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>step<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>train_dataloader<span class="token punctuation">)</span><span class="token punctuation">,</span> elapsed<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># æŠŠå½“å‰batchçš„æ•°æ®ä¸Šä¼ åˆ°GPU</span>        b_input_ids <span class="token operator">=</span> batch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>        b_input_mask <span class="token operator">=</span> batch<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>        b_labels <span class="token operator">=</span> batch<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>        <span class="token comment"># æ¸…é™¤ä¹‹å‰çš„æ¢¯åº¦ï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡è®­ç»ƒ</span>        model<span class="token punctuation">.</span>zero_grad<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment"># å¾—åˆ°ä¸€ä¸ªè¾“å‡ºå’Œloss</span>        output <span class="token operator">=</span> model<span class="token punctuation">(</span>b_input_ids<span class="token punctuation">,</span> token_type_ids<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> attention_mask<span class="token operator">=</span>b_input_mask<span class="token punctuation">,</span> labels<span class="token operator">=</span>b_labels<span class="token punctuation">)</span>        loss <span class="token operator">=</span> output<span class="token punctuation">.</span>loss        logits <span class="token operator">=</span> output<span class="token punctuation">.</span>logits        <span class="token comment"># ç´¯ç§¯loss</span>        total_train_loss <span class="token operator">+=</span> loss<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># å‰å‘ä¼ é€’å‚æ•°</span>        loss<span class="token punctuation">.</span>backward<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># æ¢¯åº¦è£å‰ªï¼Œé˜²æ­¢æ¢¯åº¦çˆ†ç‚¸ï¼Œå°†æ¢¯åº¦çº¦æŸåœ¨æŸä¸€ä¸ªåŒºé—´ä¹‹å†…ï¼Œåœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œåœ¨ä¼˜åŒ–å™¨æ›´æ–°ä¹‹å‰è¿›è¡Œæ¢¯åº¦æˆªæ–­æ“ä½œ</span>        torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>clip_grad_norm_<span class="token punctuation">(</span>model<span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span>        <span class="token comment"># æ›´æ–°å‚æ•°</span>        optimizer<span class="token punctuation">.</span>step<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># æ›´æ–°å­¦ä¹ ç‡</span>        scheduler<span class="token punctuation">.</span>step<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># è®¡ç®—æ‰€æœ‰batchçš„å¹³å‡loss</span>    avg_train_loss <span class="token operator">=</span> total_train_loss <span class="token operator">/</span> <span class="token builtin">len</span><span class="token punctuation">(</span>train_dataloader<span class="token punctuation">)</span>                    <span class="token comment"># è®¡ç®—æœ¬è½®è®­ç»ƒèŠ±è´¹çš„æ—¶é—´</span>    training_time <span class="token operator">=</span> format_time<span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> t0<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"  Average training loss: {0:.2f}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>avg_train_loss<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"  Training epcoh took: {:}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>training_time<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment"># ========================================</span>    <span class="token comment">#               éªŒè¯</span>    <span class="token comment"># ========================================</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Running Validation..."</span><span class="token punctuation">)</span>    t0 <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æŠŠæ¨¡å‹è®¾ç½®ä¸ºéªŒè¯æ¨¡å¼</span>    model<span class="token punctuation">.</span><span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    total_eval_accuracy <span class="token operator">=</span> <span class="token number">0</span>    total_eval_loss <span class="token operator">=</span> <span class="token number">0</span>    nb_eval_steps <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># é€batchéªŒè¯</span>    <span class="token keyword">for</span> batch <span class="token keyword">in</span> validation_dataloader<span class="token punctuation">:</span>                b_input_ids <span class="token operator">=</span> batch<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>        b_input_mask <span class="token operator">=</span> batch<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>        b_labels <span class="token operator">=</span> batch<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token punctuation">)</span>                <span class="token comment"># è®¾ç½®æ¨¡å‹æ— éœ€ä¸è·Ÿè¸ªæ¢¯åº¦ï¼Œè·Ÿè¸ªæ¢¯åº¦æ˜¯è®­ç»ƒçš„æ—¶å€™è¦åšçš„</span>        <span class="token keyword">with</span> torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token comment"># logitsæ˜¯æ¨¡å‹è¾“å‡ºç»“æœ</span>            output <span class="token operator">=</span> model<span class="token punctuation">(</span>b_input_ids<span class="token punctuation">,</span> token_type_ids<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> attention_mask<span class="token operator">=</span>b_input_mask<span class="token punctuation">,</span> labels<span class="token operator">=</span>b_labels<span class="token punctuation">)</span>            loss <span class="token operator">=</span> output<span class="token punctuation">.</span>loss            logits <span class="token operator">=</span> output<span class="token punctuation">.</span>logits                    <span class="token comment"># ç´¯è®¡loss</span>        total_eval_loss <span class="token operator">+=</span> loss<span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># ä»GPUè½¬ç§»åˆ°CPU</span>        logits <span class="token operator">=</span> logits<span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span>        label_ids <span class="token operator">=</span> b_labels<span class="token punctuation">.</span>to<span class="token punctuation">(</span><span class="token string">'cpu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># ç´¯è®¡å‡†ç¡®ç‡</span>        total_eval_accuracy <span class="token operator">+=</span> flat_accuracy<span class="token punctuation">(</span>logits<span class="token punctuation">,</span> label_ids<span class="token punctuation">)</span>            <span class="token comment"># å¹³å‡å‡†ç¡®ç‡</span>    avg_val_accuracy <span class="token operator">=</span> total_eval_accuracy <span class="token operator">/</span> <span class="token builtin">len</span><span class="token punctuation">(</span>validation_dataloader<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"  Accuracy: {0:.2f}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>avg_val_accuracy<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># å¹³å‡loss</span>    avg_val_loss <span class="token operator">=</span> total_eval_loss <span class="token operator">/</span> <span class="token builtin">len</span><span class="token punctuation">(</span>validation_dataloader<span class="token punctuation">)</span>        <span class="token comment"># éªŒè¯æ¨¡å‹è¿‡ç¨‹çš„æ—¶é—´æ¶ˆè€—</span>    validation_time <span class="token operator">=</span> format_time<span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> t0<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"  Validation Loss: {0:.2f}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>avg_val_loss<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"  Validation took: {:}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>validation_time<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># è®°å½•èµ·æ¥</span>    training_stats<span class="token punctuation">.</span>append<span class="token punctuation">(</span>        <span class="token punctuation">{</span>            <span class="token string">'epoch'</span><span class="token punctuation">:</span> epoch_i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>            <span class="token string">'Training Loss'</span><span class="token punctuation">:</span> avg_train_loss<span class="token punctuation">,</span>            <span class="token string">'Valid. Loss'</span><span class="token punctuation">:</span> avg_val_loss<span class="token punctuation">,</span>            <span class="token string">'Valid. Accur.'</span><span class="token punctuation">:</span> avg_val_accuracy<span class="token punctuation">,</span>            <span class="token string">'Training Time'</span><span class="token punctuation">:</span> training_time<span class="token punctuation">,</span>            <span class="token string">'Validation Time'</span><span class="token punctuation">:</span> validation_time        <span class="token punctuation">}</span>    <span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Training complete!"</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Total training took {:} (h:mm:ss)"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>format_time<span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>total_t0<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è®­ç»ƒèŠ±è´¹çš„æ—¶é—´å¹¶ä¸é•¿ï¼Œå¾ˆå¿«å°±å¯ä»¥è®­ç»ƒå®Œæ¯•ã€‚ç»è¿‡éªŒè¯ï¼Œåˆ†ç±»å‡†ç¡®ç‡åœ¨97%ä»¥ä¸Šã€‚è™½ç„¶çœ‹èµ·æ¥æ²¡æ¯”ä¹‹å‰çš„æœºå™¨å­¦ä¹ æ¨¡å‹é«˜ï¼Œä½†æˆ‘ä»¬çš„æ•°æ®é›†æ¯•ç«Ÿæ˜¯ä¸ªç®€å•ä»»åŠ¡å‘¢ã€‚è€Œä¸”BERTé¢„è®­ç»ƒæ¨¡å‹æœ€æ—¶é«¦å‘€~~~</p><blockquote><p>Running Validationâ€¦<br>  Accuracy: 0.97<br>  Validation Loss: 0.12<br>  Validation took: 0:00:13</p><p>Training complete!<br>Total training took 0:26:04 (h:mm:ss)</p></blockquote><p><code>max_length</code>çš„å¤§å°æˆ‘å’¨è¯¢äº†ä¸“ä¸šäººå£«ï¼Œè¡¨ç¤ºä¸€èˆ¬64è¶³å¤Ÿäº†ï¼Œä¸€èˆ¬ä¸è¶…è¿‡200ã€‚å…¶ä»–çš„æˆ‘æš‚æ—¶æ„Ÿè§‰æ²¡ä»€ä¹ˆé—®é¢˜äº†ã€‚</p><h2 id="æ›´æ¢ä¸­æ–‡é¢„è®­ç»ƒæ¨¡å‹"><a href="#æ›´æ¢ä¸­æ–‡é¢„è®­ç»ƒæ¨¡å‹" class="headerlink" title="æ›´æ¢ä¸­æ–‡é¢„è®­ç»ƒæ¨¡å‹"></a>æ›´æ¢ä¸­æ–‡é¢„è®­ç»ƒæ¨¡å‹</h2><p>æ›´æ¢å…¶ä»–é¢„è®­ç»ƒæ¨¡å‹çš„æ–¹æ³•å¾ˆç®€å•ï¼Œåœ¨<a href="https://huggingface.co/models">Hugging Face/Models</a>é‡Œæœç´¢Chineseï¼Œæˆ–è€…ç­›é€‰è¯­è¨€<code>zh</code>ï¼Œæ‰¾ä¸ªæ¨¡å‹ï¼ŒæŠŠåå­—å¤åˆ¶è¿‡æ¥ï¼Œæ›¿æ¢æ‰ä¸Šé¢ä»£ç ä¸­çš„æ‰€æœ‰<code>bert-base-uncased</code>å³å¯ã€‚</p><p>æˆ‘è¿™é‡Œæ›´æ¢çš„æ˜¯ä¸­æ–‡æ¨¡å‹é‡Œé¢ä¸‹è½½é‡æœ€å¤§çš„<a href="https://huggingface.co/hfl/chinese-roberta-wwm-ext">hfl/chinese-roberta-wwm-ext</a>ï¼Œè¿™ä¸ªæ¨¡å‹æ˜¯å“ˆå·¥å¤§åœ¨ç»´åŸºç™¾ç§‘çš„ç®€ä½“ä¸­æ–‡å’Œç¹ä½“ä¸­æ–‡å†…å®¹ä¸Šè¿›è¡Œå­¦ä¹ å’Œè®­ç»ƒçš„ï¼Œæ–‡æœ¬æ•°é‡ä¸º13.6Mè¡Œã€‚å“ˆå·¥å¤§NLPåšçš„æ˜¯å¾ˆå¥½çš„ã€‚ç»è¿‡å’¨è¯¢ä¸“ä¸šäººå£«ï¼Œæ¯è¡Œå­—ç¬¦æ•°é‡ä¸è¶…è¿‡512ï¼Œæ‰€ä»¥é¢„è®­ç»ƒæ•°æ®é›†çš„è§„æ¨¡æ˜¯å¾ˆå¤§çš„ã€‚</p><p>è¿›è¡Œ1è½®å¾®è°ƒï¼Œå‡†ç¡®ç‡å°±å·²ç»è¾¾åˆ°äº†99%ï¼›ç»è¿‡10è½®å¾®è°ƒï¼Œå‡†ç¡®ç‡å·²ç»è¾¾åˆ°100%äº†ã€‚å¾ˆä¼˜ç§€ã€‚</p><p>è€Œä¸”BERTæœ‰ä¸ªå¥½å¤„ï¼Œå°±æ˜¯ä¸éœ€è¦è‡ªå®šä¹‰è¯å…¸ï¼Œå› ä¸ºtokenæ˜¯æŒ‰ç…§å­—åšçš„è€Œä¸æ˜¯æŒ‰ç…§è¯åšçš„ã€‚</p><blockquote><p>Running Validationâ€¦<br>  Accuracy: 1.00<br>  Validation Loss: 0.04<br>  Validation took: 0:00:13</p><p>Training complete!<br>Total training took 1:04:12 (h:mm:ss)</p></blockquote><p>è¿™èŠ‚è¯¾å°±æ˜¯è¿™æ ·å•¦ï¼Œæ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¥½ç©<span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦NLP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®è°ƒtransformers BERTæ–‡æœ¬åˆ†ç±»é¢„è®­ç»ƒæ¨¡å‹</title>
      <link href="/2021/11/01/%E5%BE%AE%E8%B0%83transformers%20BERT%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B/"/>
      <url>/2021/11/01/%E5%BE%AE%E8%B0%83transformers%20BERT%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®è°ƒtransformers-BERTæ–‡æœ¬åˆ†ç±»é¢„è®­ç»ƒæ¨¡å‹"><a href="#å¾®è°ƒtransformers-BERTæ–‡æœ¬åˆ†ç±»é¢„è®­ç»ƒæ¨¡å‹" class="headerlink" title="å¾®è°ƒtransformers BERTæ–‡æœ¬åˆ†ç±»é¢„è®­ç»ƒæ¨¡å‹"></a>å¾®è°ƒtransformers BERTæ–‡æœ¬åˆ†ç±»é¢„è®­ç»ƒæ¨¡å‹</h1><p>æœ¬èŠ‚æˆ‘ä»¬ä¸ºHugging Faceçš„transformersåŒ…ä¸­æä¾›çš„æ–‡æœ¬åˆ†ç±»é¢„è®­ç»ƒæ¨¡å‹åšä¸€ä¸ªFine-tuneï¼Œå³å¾®è°ƒï¼Œä»¤å…¶æ›´é€‚åº”äºæˆ‘ä»¬ä½¿ç”¨çš„æ•°æ®é›†ï¼Œå¹¶åšä¸€ä¸ªåˆ†ç±»ä»»åŠ¡ã€‚</p><p>ä¸»è¦å‚è€ƒäº†<code>transformers</code>å®˜æ–¹æ–‡æ¡£ä¸­çš„<a href="https://huggingface.co/transformers/training.html#fine-tuning-in-pytorch-with-the-trainer-api">fine-tuneä¸€èŠ‚</a>ï¼Œä½¿ç”¨çš„æ•°æ®é›†æ˜¯Hugging Faceæä¾›çš„å°è£…å¥½çš„æ•°æ®é›†ã€‚</p><p>æœ¬æ–‡ä½¿ç”¨<code>PyTorch</code>æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œåœ¨<code>GTX 1080ti</code>æ˜¾å¡ä¸Šè¿è¡Œã€‚</p><h2 id="æ•°æ®é›†è½½å…¥ä¸tokenize"><a href="#æ•°æ®é›†è½½å…¥ä¸tokenize" class="headerlink" title="æ•°æ®é›†è½½å…¥ä¸tokenize"></a>æ•°æ®é›†è½½å…¥ä¸tokenize</h2><p>é¦–å…ˆä½¿ç”¨åŒæ ·æ˜¯Hugging Faceæä¾›çš„datasetsåŒ…è½½å…¥æ•°æ®é›†IMDBï¼Œè¿™æ˜¯ä¸€ä¸ªå½±è¯„æ•°æ®é›†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> datasets <span class="token keyword">import</span> load_datasetraw_datasets <span class="token operator">=</span> load_dataset<span class="token punctuation">(</span><span class="token string">"imdb"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¯¥æ•°æ®é›†å·²ç»åˆ’åˆ†å¥½äº†<code>train</code>,<code>test</code>, <code>unsupervised</code>é›†ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</p><p>ç„¶åä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œåˆ†è¯ä¸å‘é‡åŒ–tokenizeï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> transformers <span class="token keyword">import</span> AutoTokenizertokenizer <span class="token operator">=</span> AutoTokenizer<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">"bert-base-cased"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œçš„<code>tokenizer</code>å¯ä»¥æŠŠæ–‡æœ¬æ˜ å°„ä¸º512ç»´çš„å‘é‡ã€‚ç„¶åæŠŠ<code>raw_datasets</code>ä¸­çš„æ‰€æœ‰æ–‡æœ¬è¿›è¡Œä¸€ä¸‹æ˜ å°„ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">tokenize_function</span><span class="token punctuation">(</span>examples<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> tokenizer<span class="token punctuation">(</span>examples<span class="token punctuation">[</span><span class="token string">"text"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token string">"max_length"</span><span class="token punctuation">,</span> truncation<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>tokenized_datasets <span class="token operator">=</span> raw_datasets<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span>tokenize_function<span class="token punctuation">,</span> batched<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Fine-tune"><a href="#Fine-tune" class="headerlink" title="Fine-tune"></a>Fine-tune</h2><p>å…ˆä»æ•°æ®é›†ä¸­ç­›é€‰ä¸€ä¸ªè¾ƒå°çš„éƒ¨åˆ†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">small_train_dataset <span class="token operator">=</span> tokenized_datasets<span class="token punctuation">[</span><span class="token string">"train"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>shuffle<span class="token punctuation">(</span>seed<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>small_eval_dataset <span class="token operator">=</span> tokenized_datasets<span class="token punctuation">[</span><span class="token string">"test"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>shuffle<span class="token punctuation">(</span>seed<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">.</span>select<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>full_train_dataset <span class="token operator">=</span> tokenized_datasets<span class="token punctuation">[</span><span class="token string">"train"</span><span class="token punctuation">]</span>full_eval_dataset <span class="token operator">=</span> tokenized_datasets<span class="token punctuation">[</span><span class="token string">"test"</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶åå®šä¹‰æˆ‘ä»¬çš„æ–‡æœ¬åˆ†ç±»æ¨¡å‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> transformers <span class="token keyword">import</span> AutoModelForSequenceClassificationmodel <span class="token operator">=</span> AutoModelForSequenceClassification<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span><span class="token string">"bert-base-cased"</span><span class="token punctuation">,</span> num_labels<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç„¶åå°±å¯ä»¥è¿›è¡Œå¾®è°ƒå•¦ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> transformers <span class="token keyword">import</span> TrainingArguments<span class="token keyword">from</span> transformers <span class="token keyword">import</span> Trainertraining_args <span class="token operator">=</span> TrainingArguments<span class="token punctuation">(</span><span class="token string">"test_trainer"</span><span class="token punctuation">)</span>trainer <span class="token operator">=</span> Trainer<span class="token punctuation">(</span>    model<span class="token operator">=</span>model<span class="token punctuation">,</span> args<span class="token operator">=</span>training_args<span class="token punctuation">,</span> train_dataset<span class="token operator">=</span>small_train_dataset<span class="token punctuation">,</span> eval_dataset<span class="token operator">=</span>small_eval_dataset<span class="token punctuation">)</span>trainer<span class="token punctuation">.</span>train<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è®­ç»ƒå®Œæ¯•åæ˜¯éªŒè¯ç»“æœï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">from</span> datasets <span class="token keyword">import</span> load_metricmetric <span class="token operator">=</span> load_metric<span class="token punctuation">(</span><span class="token string">"accuracy"</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">compute_metrics</span><span class="token punctuation">(</span>eval_pred<span class="token punctuation">)</span><span class="token punctuation">:</span>    logits<span class="token punctuation">,</span> labels <span class="token operator">=</span> eval_pred    predictions <span class="token operator">=</span> np<span class="token punctuation">.</span>argmax<span class="token punctuation">(</span>logits<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> metric<span class="token punctuation">.</span>compute<span class="token punctuation">(</span>predictions<span class="token operator">=</span>predictions<span class="token punctuation">,</span> references<span class="token operator">=</span>labels<span class="token punctuation">)</span>trainer <span class="token operator">=</span> Trainer<span class="token punctuation">(</span>    model<span class="token operator">=</span>model<span class="token punctuation">,</span>    args<span class="token operator">=</span>training_args<span class="token punctuation">,</span>    train_dataset<span class="token operator">=</span>small_train_dataset<span class="token punctuation">,</span>    eval_dataset<span class="token operator">=</span>small_eval_dataset<span class="token punctuation">,</span>    compute_metrics<span class="token operator">=</span>compute_metrics<span class="token punctuation">,</span><span class="token punctuation">)</span>trainer<span class="token punctuation">.</span>evaluate<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘åœ¨æœ¬åœ°è·‘ä¸‹æ¥çš„ç»“æœæ˜¯ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">'eval_loss': 0.5007675886154175, 'eval_accuracy': 0.887, 'eval_runtime': 18.8074, 'eval_samples_per_second': 53.171, 'eval_steps_per_second': 6.646<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ†ç±»å‡†ç¡®ç‡ä¸º88.7%. </p><p>çœŸçš„å¾ˆæ£’å‘¢ï¼Œä¸ç”¨èŠ±è´¹å¤§é‡æ—¶é—´è®­ç»ƒå°±å¯ä»¥å¾—åˆ°è¿™æ ·çš„æ•ˆæœã€‚åé¢è¿›ä¸€æ­¥ç ”ç©¶ï¼Œåº”è¯¥è¿˜ä¼šæœ‰æé«˜<span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>ä¸€èµ·åŠ æ²¹å§ï¼Œå°ä»™å¥³~<span class="github-emoji"><span>ğŸ¤œ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f91c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ¤›</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f91b.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦NLP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hugging Faceä¸NLPé¢„è®­ç»ƒæ¨¡å‹</title>
      <link href="/2021/11/01/Hugging%20Face%E4%B8%8ENLP%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B/"/>
      <url>/2021/11/01/Hugging%20Face%E4%B8%8ENLP%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="Hugging-Faceä¸NLPé¢„è®­ç»ƒæ¨¡å‹"><a href="#Hugging-Faceä¸NLPé¢„è®­ç»ƒæ¨¡å‹" class="headerlink" title="Hugging Faceä¸NLPé¢„è®­ç»ƒæ¨¡å‹"></a>Hugging Faceä¸NLPé¢„è®­ç»ƒæ¨¡å‹</h1><p>è¿™ä¸€èŠ‚æˆ‘ä»¬æ¥å­¦ä¹ åŸºäºHugging Faceçš„NLPé¢„è®­ç»ƒæ¨¡å‹çš„ä½¿ç”¨æ–¹å¼ï¼ŒåŒ…æ‹¬Bertã€‚</p><p>å…ˆæ¥äº†è§£ä¸€äº›èƒŒæ™¯çŸ¥è¯†ã€‚</p><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><h3 id="æ·±åº¦å­¦ä¹ "><a href="#æ·±åº¦å­¦ä¹ " class="headerlink" title="æ·±åº¦å­¦ä¹ "></a>æ·±åº¦å­¦ä¹ </h3><p>æˆ‘ä»¬å‰é¢ç”¨çš„BOWï¼Œè´å¶æ–¯ï¼ŒSVMï¼ŒLRï¼ŒXGBoostéƒ½æ˜¯ä¼ ç»Ÿæœºå™¨å­¦ä¹ èŒƒç•´ï¼Œæ·±åº¦å­¦ä¹ çš„ç‰¹ç‚¹æ˜¯é€šè¿‡è®¾è®¡ä¸åŒçš„ç¥ç»ç½‘ç»œæ¥å®Œæˆå„ç§ä»»åŠ¡ï¼Œè‡ªä»å…´èµ·ä»¥æ¥ï¼Œå®ƒåœ¨åˆ†ç±»ã€ç›‘æµ‹ã€è¯†åˆ«ã€ç”Ÿæˆç­‰é¢†åŸŸå–å¾—äº†è¿œå£°èª‰ä¼ ç»Ÿæœºå™¨å­¦ä¹ æ–¹æ³•çš„æ•ˆæœï¼Œå·²ç»æˆä¸ºäººå·¥æ™ºèƒ½çš„ä»£åè¯ã€‚</p><p><img src="alexnet.png" alt="Alexnet"></p><p><img src="resnet.svg" alt="Resnet"></p><p><img src="densenet.png" alt="Densenet"></p><p><img src="RNN.png" alt="RNN"></p><h3 id="é¢„è®­ç»ƒä¸å¾®è°ƒ"><a href="#é¢„è®­ç»ƒä¸å¾®è°ƒ" class="headerlink" title="é¢„è®­ç»ƒä¸å¾®è°ƒ"></a>é¢„è®­ç»ƒä¸å¾®è°ƒ</h3><p>é¢„è®­ç»ƒæ˜¯è®©æŸä¸€ç¥ç»ç½‘ç»œä»å¤§è§„æ¨¡æ•°æ®ä¸­è·å¾—ä¸å…·ä½“ä»»åŠ¡æ— å…³çš„å‚æ•°çš„è®­ç»ƒï¼Œå¹¶å°†å¾—åˆ°çš„å‚æ•°å’Œæ¨¡å‹ä¿å­˜å‡ºæ¥ã€‚å®ƒé‡‡ç”¨çš„æ•°æ®è§„æ¨¡æ˜¯å¦‚æ­¤ä¹‹å¤§ï¼Œä»¥è‡³äºä¸è®ºæˆ‘ä»¬åœ¨å…·ä½“ä»»åŠ¡ä¸­ç”¨çš„ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œéƒ½å·²ç»è¢«å®ƒå­¦ä¹ è¿‡äº†ï¼Œéƒ½å¯ä»¥èƒœä»»æˆ‘ä»¬çš„ä»»åŠ¡ã€‚</p><p>å¦‚æœæˆ‘ä»¬è§‰å¾—è¿˜ä¸æ”¾å¿ƒï¼Œæˆ–è€…å­˜åœ¨æ ‡ç­¾ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œè¿˜å¯ä»¥åšä¸€ä¸‹<strong>å¾®è°ƒ</strong>ï¼Œå³å†åœ¨æˆ‘ä»¬çš„æ•°æ®ä¸Šåšä¸€ä¸ªç®€å•è®­ç»ƒï¼Œè®©é¢„è®­ç»ƒå‚æ•°é€‚åº”äºæˆ‘ä»¬çš„æ•°æ®ï¼Œç„¶åå†è¿›è¡Œæµ‹è¯•ã€‚</p><h3 id="BERT"><a href="#BERT" class="headerlink" title="BERT"></a>BERT</h3><p>BERTå…¨ç§°ä¸ºBidirectional Encoder Representation from Transformersï¼Œå³åŒå‘Transformerçš„Encoderã€‚æ¨¡å‹çš„ä¸»è¦åˆ›æ–°ç‚¹éƒ½åœ¨pre-trainæ–¹æ³•ä¸Šï¼Œé€šè¿‡é¢„è®­ç»ƒå’Œç²¾è°ƒæ¨ªæ‰«äº†11é¡¹NLPä»»åŠ¡ï¼Œæå‡ºå½“å¹´å°±æˆä¸ºNLPé¢†åŸŸå¤§ç«ã€æ•´ä¸ªäººå·¥æ™ºèƒ½å­¦ç•Œéƒ½æœ‰æ‰€è€³é—»çš„æ¨¡å‹ã€‚ç›®å‰å·²ç»æ˜¯NLPé¢†åŸŸé‡Œç¨‹ç¢‘å¼çš„æ–¹æ³•ã€‚</p><blockquote><p>Devlin J, Chang M W, Lee K, et al. Bert: Pre-training of deep bidirectional transformers for language understanding[J]. arXiv preprint arXiv:1810.04805, 2018.</p></blockquote><h3 id="Hugging-Face"><a href="#Hugging-Face" class="headerlink" title="Hugging Face"></a>Hugging Face</h3><p><img src="huggingface.png" alt="Hugging Face"></p><p><a href="https://huggingface.co/">Hugging Face</a>æ˜¯ä¸€å®¶æ€»éƒ¨ä½äºçº½çº¦çš„èŠå¤©æœºå™¨äººåˆåˆ›æœåŠ¡å•†ï¼Œä½†æ›´ä»¤å®ƒå¹¿ä¸ºäººçŸ¥çš„æ˜¯Hugging Faceä¸“æ³¨äºNLPæŠ€æœ¯ï¼Œæ‹¥æœ‰å¤§å‹çš„å¼€æºç¤¾åŒºã€‚å°¤å…¶æ˜¯åœ¨githubä¸Šå¼€æºçš„è‡ªç„¶è¯­è¨€å¤„ç†é¢„è®­ç»ƒæ¨¡å‹åº“ Transformersï¼Œå·²è¢«ä¸‹è½½è¶…è¿‡ä¸€ç™¾ä¸‡æ¬¡ï¼Œgithubä¸Šè¶…è¿‡24000ä¸ªstarã€‚Transformers æä¾›äº†NLPé¢†åŸŸå¤§é‡state-of-artçš„é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ç»“æ„çš„æ¨¡å‹å’Œè°ƒç”¨æ¡†æ¶ã€‚</p><p>ç®€å•æ¥è¯´å°±æ˜¯Hugging Faceæä¾›äº†ä¸€ä¸ªåº“ï¼Œåä¸º Transformersï¼ŒåŒ…å«å¤§é‡é¢„è®­ç»ƒæ¨¡å‹ï¼Œä»¥ä¾›äººä»¬ä½¿ç”¨ã€‚</p><p>ä¸ºä»€ä¹ˆä½¿ç”¨<code>transformers</code>ï¼Ÿ</p><ul><li>è¡¨ç°ä¼˜è¶Šï¼Œé«˜çº§æŠ½è±¡ï¼Œåªæœ‰ä¸‰ä¸ªç±»ï¼Œå¯¹æ‰€æœ‰æ¨¡å‹æœ‰åŒä¸€çš„APIï¼›</li><li>ç¤¾åŒºä¸­æœ‰ç ”ç©¶äººå‘˜åˆ†äº«çš„æ•°åç§äº¿ä¸‡çº§çš„æ¨¡å‹æ¶æ„ã€ä¸¤åƒå¤šä¸ªé¢„è®­ç»ƒæ¨¡å‹ã€100å¤šç§è¯­è¨€æ”¯æŒï¼Œä¸æ­¢BERTï¼›</li><li>ä½¿ç”¨ç®€å•ã€‚</li></ul><h2 id="ä½¿ç”¨Hugging-Faceçš„é¢„è®­ç»ƒæ¨¡å‹"><a href="#ä½¿ç”¨Hugging-Faceçš„é¢„è®­ç»ƒæ¨¡å‹" class="headerlink" title="ä½¿ç”¨Hugging Faceçš„é¢„è®­ç»ƒæ¨¡å‹"></a>ä½¿ç”¨Hugging Faceçš„é¢„è®­ç»ƒæ¨¡å‹</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>é¦–å…ˆæ˜¯å®‰è£…Hugging Faceçš„<code>transformers</code>åŒ…ã€‚è¿™ä¸ªåŒ…ä¾èµ–äºPython 3.6+ã€Flax 0.3.2+ã€PyTorch 1.3.1+ å’Œ TensorFlow 2.3+ç­‰ç¯å¢ƒï¼Œæœ€å¥½åœ¨æœ‰æ·±åº¦å­¦ä¹ çº§GPUçš„ç”µè„‘ä¸Šè¿›è¡Œå®‰è£…ã€‚é…ç½®å¥½ä¾èµ–åï¼Œä½¿ç”¨<code>pip</code>è¿›è¡Œå®‰è£…ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">pip install transformers<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h3><p><code>transformers</code>æä¾›äº† <code>pipeline</code> ï¼ˆæµæ°´çº¿ï¼‰APIï¼Œèšåˆäº†å¤šç§å¤šæ ·çš„é¢„è®­ç»ƒæ¨¡å‹å’Œå¯¹åº”çš„æ–‡æœ¬é¢„å¤„ç†ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¿«é€Ÿä½¿ç”¨æµæ°´çº¿å»åˆ¤æ–­æ­£è´Ÿé¢æƒ…ç»ªçš„ä¾‹å­ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&gt;&gt;&gt; from transformers import pipeline# ä½¿ç”¨æƒ…ç»ªåˆ†ææµæ°´çº¿&gt;&gt;&gt; classifier = pipeline('sentiment-analysis')&gt;&gt;&gt; print(classifier('I love you more and more each day as time goes by'))[{'label': 'POSITIVE', 'score': 0.9998432397842407}]&gt;&gt;&gt; print(classifier('æœ‰ä½ çš„æ¯ä¸€å¤©éƒ½å¾ˆå¼€å¿ƒ'))[{'label': 'POSITIVE', 'score': 0.662761926651001}]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬¬äºŒè¡Œä»£ç ä¸‹è½½å¹¶ç¼“å­˜äº† <code>pipeline</code> ä½¿ç”¨çš„é»˜è®¤é¢„è®­ç»ƒæ¨¡å‹ï¼Œè€Œç¬¬ä¸‰è¡Œä»£ç åˆ™åœ¨ç»™å®šçš„æ–‡æœ¬ä¸Šè¿›è¡Œäº†è¯„ä¼°ã€‚è¿™é‡Œçš„<code>sore</code>è¡¨ç¤ºç­”æ¡ˆâ€œæ­£é¢â€ (positive) å…·æœ‰ 99 %çš„ç½®ä¿¡åº¦ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä»ç»™å®šæ–‡æœ¬ä¸­æŠ½å–é—®é¢˜ç­”æ¡ˆçš„ä¾‹å­ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&gt;&gt;&gt; from transformers import pipeline# ä½¿ç”¨é—®ç­”æµæ°´çº¿&gt;&gt;&gt; question_answerer = pipeline('question-answering')&gt;&gt;&gt; question_answerer({...     'question': 'What is the name of the repository ?',...     'context': 'Pipeline has been included in the huggingface/transformers repository'... }){'score': 0.30970096588134766, 'start': 34, 'end': 58, 'answer': 'huggingface/transformers'}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é™¤äº†ç»™å‡ºç­”æ¡ˆï¼Œé¢„è®­ç»ƒæ¨¡å‹è¿˜ç»™å‡ºäº†å¯¹åº”çš„ç½®ä¿¡åº¦åˆ†æ•°ã€ç­”æ¡ˆåœ¨è¯ç¬¦åŒ– (tokenized) åçš„æ–‡æœ¬ä¸­å¼€å§‹å’Œç»“æŸçš„ä½ç½®ã€‚</p><h3 id="ä½¿ç”¨éé»˜è®¤çš„å…¶ä»–é¢„è®­ç»ƒæ¨¡å‹"><a href="#ä½¿ç”¨éé»˜è®¤çš„å…¶ä»–é¢„è®­ç»ƒæ¨¡å‹" class="headerlink" title="ä½¿ç”¨éé»˜è®¤çš„å…¶ä»–é¢„è®­ç»ƒæ¨¡å‹"></a>ä½¿ç”¨éé»˜è®¤çš„å…¶ä»–é¢„è®­ç»ƒæ¨¡å‹</h3><p><a href="https://huggingface.co/models">Hugging Face Models</a> æä¾›äº†å¾ˆå¤šå…¶ä»–æ¨¡å‹ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œæˆ‘ä»¬æ¥å¯¼å…¥ä¸€ä¸ªéé»˜è®¤çš„æ¨¡å‹<a href="https://huggingface.co/nlptown/bert-base-multilingual-uncased-sentiment">nlptown/bert-base-multilingual-uncased-sentiment</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäºBERTçš„æ¨¡å‹ï¼Œå¯ä»¥åšåˆ¤æ–­æ­£è´Ÿé¢æƒ…ç»ªçš„å·¥ä½œï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> transformers <span class="token keyword">import</span> pipeline<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> classifier <span class="token operator">=</span> pipeline<span class="token punctuation">(</span><span class="token string">'sentiment-analysis'</span><span class="token punctuation">,</span> model<span class="token operator">=</span><span class="token string">"nlptown/bert-base-multilingual-uncased-sentiment"</span><span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>classifier<span class="token punctuation">(</span><span class="token string">'I love you more and more each day as time goes by'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">'label'</span><span class="token punctuation">:</span> <span class="token string">'5 stars'</span><span class="token punctuation">,</span> <span class="token string">'score'</span><span class="token punctuation">:</span> <span class="token number">0.8776088356971741</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>classifier<span class="token punctuation">(</span><span class="token string">'å¿ƒæœ‰é¢†å¯¼ï¼Œæ°¸è¿œå¿ è¯š'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">'label'</span><span class="token punctuation">:</span> <span class="token string">'5 stars'</span><span class="token punctuation">,</span> <span class="token string">'score'</span><span class="token punctuation">:</span> <span class="token number">0.6939144730567932</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>classifier<span class="token punctuation">(</span><span class="token string">'æˆ‘è®¨åŒæ¸£ç”·'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">'label'</span><span class="token punctuation">:</span> <span class="token string">'1 star'</span><span class="token punctuation">,</span> <span class="token string">'score'</span><span class="token punctuation">:</span> <span class="token number">0.41145384311676025</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯è§è¿™ä¸ªæ¨¡å‹ä¼šæŠŠæ–‡æœ¬åˆ†ä¸º<code>1 star</code>åˆ°<code>5 star</code>çš„ä¸åŒç­‰çº§ã€‚æ˜Ÿçº§è¶Šé«˜ï¼Œè¯¥æ–‡æœ¬è¡¨è¾¾çš„æƒ…ç»ªè¶Šç§¯æã€‚</p><p>å†æ¥çœ‹ä¸€ä¸ª<code>fill-mask</code>å¡«è¯ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯¼å…¥çš„æ˜¯é¢„è®­ç»ƒæ¨¡å‹<a href="https://huggingface.co/hfl/chinese-roberta-wwm-ext">hfl/chinese-roberta-wwm-ext</a>ï¼Œè¿™ä¹Ÿæ˜¯ä¸€åŸºäºBERTçš„æ¨¡å‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> transformers <span class="token keyword">import</span> pipeline<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> maskfiller <span class="token operator">=</span> pipeline<span class="token punctuation">(</span><span class="token string">'fill-mask'</span><span class="token punctuation">,</span> model <span class="token operator">=</span> <span class="token string">"hfl/chinese-roberta-wwm-ext"</span><span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>maskfiller<span class="token punctuation">(</span><span class="token string">'æˆ‘çˆ±[MASK]'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">'sequence'</span><span class="token punctuation">:</span> <span class="token string">'æˆ‘ çˆ± ä½ '</span><span class="token punctuation">,</span> <span class="token string">'score'</span><span class="token punctuation">:</span> <span class="token number">0.9170712828636169</span><span class="token punctuation">,</span> <span class="token string">'token'</span><span class="token punctuation">:</span> <span class="token number">872</span><span class="token punctuation">,</span> <span class="token string">'token_str'</span><span class="token punctuation">:</span> <span class="token string">'ä½ '</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'sequence'</span><span class="token punctuation">:</span> <span class="token string">'æˆ‘ çˆ± ä»–'</span><span class="token punctuation">,</span> <span class="token string">'score'</span><span class="token punctuation">:</span> <span class="token number">0.02408534474670887</span><span class="token punctuation">,</span> <span class="token string">'token'</span><span class="token punctuation">:</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token string">'token_str'</span><span class="token punctuation">:</span> <span class="token string">' ä»–'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'sequence'</span><span class="token punctuation">:</span> <span class="token string">'æˆ‘ çˆ± å¥¹'</span><span class="token punctuation">,</span> <span class="token string">'score'</span><span class="token punctuation">:</span> <span class="token number">0.014233492314815521</span><span class="token punctuation">,</span> <span class="token string">'token'</span><span class="token punctuation">:</span> <span class="token number">1961</span><span class="token punctuation">,</span> <span class="token string">'token_str'</span><span class="token punctuation">:</span> <span class="token string">'å¥¹'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'sequence'</span><span class="token punctuation">:</span> <span class="token string">'æˆ‘ çˆ± æˆ‘'</span><span class="token punctuation">,</span> <span class="token string">'score'</span><span class="token punctuation">:</span> <span class="token number">0.005949386395514011</span><span class="token punctuation">,</span> <span class="token string">'token'</span><span class="token punctuation">:</span> <span class="token number">2769</span><span class="token punctuation">,</span> <span class="token string">'token_str'</span><span class="token punctuation">:</span> <span class="token string">'æˆ‘'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'sequence'</span><span class="token punctuation">:</span> <span class="token string">'æˆ‘ çˆ± æ‚¨'</span><span class="token punctuation">,</span> <span class="token string">'score'</span><span class="token punctuation">:</span> <span class="token number">0.0037280190736055374</span><span class="token punctuation">,</span> <span class="token string">'token'</span><span class="token punctuation">:</span> <span class="token number">2644</span><span class="token punctuation">,</span> <span class="token string">'token_str'</span><span class="token punctuation">:</span> <span class="token string">'æ‚¨'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¥½ç©<span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦NLP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç§‹æ€ï¼ˆå…¶ä¸€ï¼‰</title>
      <link href="/2021/10/28/%E7%A7%8B%E6%80%9D%EF%BC%88%E5%85%B6%E4%B8%80%EF%BC%89/"/>
      <url>/2021/10/28/%E7%A7%8B%E6%80%9D%EF%BC%88%E5%85%B6%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="ç§‹æ€ï¼ˆå…¶ä¸€ï¼‰"><a href="#ç§‹æ€ï¼ˆå…¶ä¸€ï¼‰" class="headerlink" title="ç§‹æ€ï¼ˆå…¶ä¸€ï¼‰"></a>ç§‹æ€ï¼ˆå…¶ä¸€ï¼‰</h1><p>äº‘è¾¹é¸¿é›é€ç§‹é£ï¼Œæ¬²å¯„ç›¸æ€æ„ä¸‡é‡ã€‚</p><p>ä¸ºè°å€¾å€’ä¸ºè°ç‹‚ï¼Œå¿½å¦‚æ¢¦é†’å·²ä¸‰ç”Ÿã€‚</p><p><img src="qiuyan.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> æ²¹å…ˆç”Ÿé€‰é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºBOWå®ç°åƒåœ¾é‚®ä»¶åˆ†ç±»</title>
      <link href="/2021/10/21/%E5%9F%BA%E4%BA%8EBOW%E5%AE%9E%E7%8E%B0%E5%9E%83%E5%9C%BE%E9%82%AE%E4%BB%B6%E5%88%86%E7%B1%BB/"/>
      <url>/2021/10/21/%E5%9F%BA%E4%BA%8EBOW%E5%AE%9E%E7%8E%B0%E5%9E%83%E5%9C%BE%E9%82%AE%E4%BB%B6%E5%88%86%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºBOWå®ç°åƒåœ¾é‚®ä»¶åˆ†ç±»"><a href="#åŸºäºBOWå®ç°åƒåœ¾é‚®ä»¶åˆ†ç±»" class="headerlink" title="åŸºäºBOWå®ç°åƒåœ¾é‚®ä»¶åˆ†ç±»"></a>åŸºäºBOWå®ç°åƒåœ¾é‚®ä»¶åˆ†ç±»</h1><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬åŸºäºæœ´ç´ è´å¶æ–¯çš„è¯é¢‘ç»Ÿè®¡ï¼Œåšäº†åƒåœ¾é‚®ä»¶åˆ†ç±»ï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬é‡‡ç”¨BOWæ¨¡å‹ï¼Œåœ¨ç›¸åŒæ•°æ®é›†ä¸Šä½¿ç”¨BOWæ¨¡å‹å†æ¬¡è¿›è¡Œåˆ†ç±»ä»»åŠ¡ï¼Œå¹¶ä¸”ä½¿ç”¨å„ç§ç»å…¸çš„æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚</p><h2 id="jiebaåŠ å…¥è‡ªå®šä¹‰è¯å…¸"><a href="#jiebaåŠ å…¥è‡ªå®šä¹‰è¯å…¸" class="headerlink" title="jiebaåŠ å…¥è‡ªå®šä¹‰è¯å…¸"></a>jiebaåŠ å…¥è‡ªå®šä¹‰è¯å…¸</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥åšä¸€ä¸ªè‡ªå®šä¹‰åˆ†è¯åŠŸèƒ½ï¼Œä»¥å¤‡åé¢éœ€è¦ä¹‹ç”¨ã€‚çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼Œè¿™æ®µä»£ç å±•ç¤ºäº†å¦‚ä½•åœ¨<code>jieba</code>ä¸­åŠ å…¥è‡ªå®šä¹‰åˆ†è¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> jiebatext <span class="token operator">=</span> 'å¹³å®‰é“¶è¡Œæ˜¯ä¸€å®¶æ€»éƒ¨è®¾åœ¨æ·±åœ³çš„å…¨å›½æ€§è‚¡ä»½åˆ¶å•†ä¸šé“¶è¡Œï¼ˆSZ000001ï¼‰ã€‚\å…¶å‰èº«æ·±åœ³å‘å±•é“¶è¡Œæ˜¯ä¸­å›½å†…åœ°é¦–å®¶å…¬å¼€ä¸Šå¸‚çš„å…¨å›½æ€§è‚¡ä»½åˆ¶é“¶è¡Œã€‚ä¸­å›½å¹³å®‰åŠå…¶æ§è‚¡å­å…¬å¸ä¸ºæœ¬è¡Œæ§è‚¡è‚¡ä¸œã€‚\æˆªè‡³<span class="token number">2021</span>å¹´<span class="token number">6</span>æœˆï¼Œæœ¬é›†å›¢åœ¨èŒå‘˜å·¥å…±<span class="token number">37</span><span class="token punctuation">,</span><span class="token number">384</span> äººï¼Œé€šè¿‡<span class="token number">101</span>å®¶åˆ†è¡ŒåŠ<span class="token number">1110</span>å®¶è¥ä¸šæœºæ„ä¸ºå®¢æˆ·æä¾›å¤šç§é‡‘èæœåŠ¡ã€‚'result <span class="token operator">=</span> jieba<span class="token punctuation">.</span>lcut<span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment"># cutè¿”å›ä¸€ä¸ªgeneraterï¼Œlcutè¿”å›ä¸€ä¸ªlist</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>jieba<span class="token punctuation">.</span>load_userdict<span class="token punctuation">(</span><span class="token string">r'my_dict.txt'</span><span class="token punctuation">)</span>result <span class="token operator">=</span> jieba<span class="token punctuation">.</span>lcut<span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­<code>my_dict.txt</code>ä¸ºæˆ‘ä»¬çš„è‡ªå®šä¹‰è¯å…¸ï¼Œä¸€è¡Œä¸€ä¸ªè‡ªå®šä¹‰è¯ï¼Œè¿™é‡Œçš„å†…å®¹ä¸ºï¼š</p><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">å¹³å®‰é“¶è¡Œ<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿è¡Œä»£ç å¯çŸ¥ï¼Œ<code>jieba</code>åŸæœ¬ä¼šå°†<code>å¹³å®‰é“¶è¡Œ</code>åˆ†æˆä¸¤ä¸ªè¯<code>å¹³å®‰</code>å’Œ<code>é“¶è¡Œ</code>ï¼ŒåŠ å…¥è‡ªå®šä¹‰è¯å…¸ä¹‹åå°±ä¸ä¼šäº†ã€‚</p><h2 id="BOWæ¨¡å‹ä¸scikit-learnè°ƒç”¨"><a href="#BOWæ¨¡å‹ä¸scikit-learnè°ƒç”¨" class="headerlink" title="BOWæ¨¡å‹ä¸scikit-learnè°ƒç”¨"></a>BOWæ¨¡å‹ä¸scikit-learnè°ƒç”¨</h2><p><img src="bow1.jpg" alt="BOW-NLP"></p><p><img src="bow2.jpg" alt="BOW-CV"></p><p>æœ¬ç€å¥¥å¡å§†å‰ƒåˆ€çš„åŸåˆ™ï¼Œæˆ‘ä»¬å°±ä¸è‡ªå·±å®ç°ç®—æ³•äº†ï¼Œç›´æ¥è°ƒç”¨sklearnä¸­çš„BOWæ¨¡å‹å®ç°CountVectorizerã€‚</p><p>åœ¨åˆ†ç±»å™¨æ–¹é¢ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œé‡‡ç”¨æ¯”è¾ƒç»å…¸çš„å››ç§æœºå™¨å­¦ä¹ åˆ†ç±»å™¨ï¼š</p><ul><li>æœ´ç´ é«˜æ–¯è´å¶æ–¯ï¼šä¸€ç§åŸºäºè¯é¢‘ç»Ÿè®¡ã€æ¦‚ç‡å…ˆéªŒã€é«˜æ–¯å‡½æ•°çš„åˆ†ç±»å™¨ï¼›</li><li>é€»è¾‘å›å½’ï¼šä¸ä¼ ç»Ÿçº¿æ€§å›å½’ç¨æœ‰åŒºåˆ«çš„ä¸€ç§å›å½’æ¨¡å‹ï¼Œå¸¸ç”¨äºäºŒåˆ†ç±»ï¼›</li><li>SVCï¼šæ”¯æŒå‘é‡æœºSVMçš„åˆ†ç±»åº”ç”¨æ¨¡å‹ï¼›</li><li>XGBoostï¼šä¸€ç§åŸºäºå†³ç­–æ ‘çš„åˆ†ç±»ç®—æ³•ã€‚</li></ul><p>æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡ä»£ç çš„åŸºç¡€ä¸Šæ¥è¿›è¡Œä¿®æ”¹ã€‚æ•´ä½“ä»£ç å¦‚ä¸‹ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> math<span class="token keyword">import</span> re<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> codecs<span class="token keyword">import</span> jieba<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>preprocessing <span class="token keyword">import</span> StandardScaler<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>feature_extraction<span class="token punctuation">.</span>text <span class="token keyword">import</span> CountVectorizer<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> train_test_split<span class="token keyword">from</span> sklearn <span class="token keyword">import</span> linear_model<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>naive_bayes <span class="token keyword">import</span> GaussianNB<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>svm <span class="token keyword">import</span> SVC<span class="token keyword">from</span> xgboost <span class="token keyword">import</span> XGBClassifier<span class="token keyword">from</span> xgboost <span class="token keyword">import</span> plot_importance<span class="token keyword">from</span> sklearn <span class="token keyword">import</span> metrics<span class="token keyword">def</span> <span class="token function">load_formatted_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    åŠ è½½æ ¼å¼åŒ–åçš„æ ‡ç­¾-è·¯å¾„åˆ—è¡¨    spamåˆ—ä¸º1ä»£è¡¨æ˜¯åƒåœ¾é‚®ä»¶ï¼Œ0ä»£è¡¨æ™®é€šé‚®ä»¶    pathåˆ—ä»£è¡¨è¯¥é‚®ä»¶è·¯å¾„    :return:(DataFrame)index    """</span>    <span class="token comment"># åŠ è½½æ•°æ®é›†</span>    index <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">,</span> names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'spam'</span><span class="token punctuation">,</span> <span class="token string">'path'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># è¯»å…¥æ˜¯ä¸¤åˆ—ï¼Œä¸€åˆ—spam ä¸€åˆ—path</span>    index<span class="token punctuation">.</span>spam <span class="token operator">=</span> index<span class="token punctuation">.</span>spam<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token string">'spam'</span> <span class="token keyword">else</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># æ•°æ®æ ‡ç­¾ï¼Œæ ‡ç­¾ä¸ºspamçš„è®¾ç½®ä¸º1 å¦åˆ™è®¾ç½®ä¸º0</span>    index<span class="token punctuation">.</span>path <span class="token operator">=</span> index<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># æ›´æ”¹æ–‡ä»¶è·¯å¾„</span>    <span class="token keyword">return</span> index<span class="token keyword">def</span> <span class="token function">load_stop_word</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è¯»å‡ºåœç”¨è¯åˆ—è¡¨    :return: (List)_stop_words    """</span>    <span class="token keyword">with</span> codecs<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"stop"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span> <span class="token comment"># è½½å…¥åœç”¨è¯åˆ—è¡¨</span>        lines <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># è¯»å…¥æ‰€æœ‰è¡Œï¼Œå¾—åˆ°ä¸€ä¸ªåŒ…å«å¤šä¸ªå­—ç¬¦ä¸²çš„listï¼Œä¸€è¡Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span>    _stop_words <span class="token operator">=</span> <span class="token punctuation">[</span>i<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> lines<span class="token punctuation">]</span> <span class="token comment"># èˆå¼ƒæ‰æ‰€æœ‰æ¢è¡Œç¬¦</span>    <span class="token keyword">return</span> _stop_words<span class="token keyword">def</span> <span class="token function">get_mail_content</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> stop_words_list<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    éå†å¾—åˆ°æ¯å°é‚®ä»¶çš„è¯æ±‡å­—ç¬¦ä¸²    :param path: é‚®ä»¶è·¯å¾„    :return:(Str)content    """</span>    <span class="token keyword">with</span> codecs<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"gbk"</span><span class="token punctuation">,</span> errors<span class="token operator">=</span><span class="token string">"ignore"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span> <span class="token comment"># ä»¥gbkç¼–ç æ‰“å¼€æ–‡ä»¶ï¼Œå¿½ç•¥é”™è¯¯</span>        lines <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># è¯»å…¥æ‰€æœ‰è¡Œï¼Œå¾—åˆ°ä¸€ä¸ªåŒ…å«å¤šä¸ªå­—ç¬¦ä¸²çš„listï¼Œä¸€è¡Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> lines<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\n'</span><span class="token punctuation">:</span>            <span class="token comment"># å»é™¤ç¬¬ä¸€ä¸ªç©ºè¡Œï¼Œå³åœ¨ç¬¬ä¸€ä¸ªç©ºè¡Œä¹‹å‰çš„é‚®ä»¶åè®®å†…å®¹å…¨éƒ¨èˆå¼ƒ</span>            lines <span class="token operator">=</span> lines<span class="token punctuation">[</span>i<span class="token punctuation">:</span><span class="token punctuation">]</span>            <span class="token keyword">break</span>    content <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment"># strip()æ˜¯ä¸¢å¼ƒæ¢è¡Œç¬¦ï¼Œsplit()æ˜¯æŒ‰ç…§ç©ºæ ¼åˆ†éš”å¼€ï¼ˆèµ·åˆ°å‰”é™¤å¤šä¸ªç©ºæ ¼åªç•™ä¸‹ä¸€ä¸ªç©ºæ ¼çš„ä½œç”¨ï¼‰ï¼Œç„¶åå†joinåœ¨ä¸€èµ·</span>    <span class="token comment"># print(content)</span>    content <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">u"[\u4e00-\u9fa5]"</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span> <span class="token comment"># åªä¿ç•™æ±‰å­—</span>    content <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token comment"># æ‹¼èµ·æ¥</span>    word_list_temp <span class="token operator">=</span> jieba<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token comment"># ä½¿ç”¨jiebaè¿›è¡Œåˆ†è¯</span>    word_list <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">for</span> word <span class="token keyword">in</span> word_list_temp<span class="token punctuation">:</span>        <span class="token keyword">if</span> word <span class="token operator">!=</span> <span class="token string">''</span> <span class="token keyword">and</span> word <span class="token keyword">not</span> <span class="token keyword">in</span> stop_words_list<span class="token punctuation">:</span> <span class="token comment"># å»æ‰ç©ºè¯å’Œåœæ­¢è¯</span>            word_list <span class="token operator">+=</span> word <span class="token operator">+</span> <span class="token string">' '</span>    <span class="token keyword">return</span> word_list<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    index_list <span class="token operator">=</span> load_formatted_data<span class="token punctuation">(</span><span class="token punctuation">)</span>    stop_words <span class="token operator">=</span> load_stop_word<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># get_mail_content(index_list.path[0])</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'é‚®ä»¶å†…å®¹è¯»å–ä¸åˆ†è¯'</span><span class="token punctuation">)</span>    index_list<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span> <span class="token operator">=</span> index_list<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> get_mail_content<span class="token punctuation">(</span>x<span class="token punctuation">,</span> stop_words<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># å¯¹contentåˆ—ä½¿ç”¨å‡½æ•°ï¼Œå¾—åˆ°é‚®ä»¶å†…å®¹</span>    words <span class="token operator">=</span> index_list<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>    vectorizer <span class="token operator">=</span> CountVectorizer<span class="token punctuation">(</span>max_features<span class="token operator">=</span><span class="token number">4000</span><span class="token punctuation">,</span> min_df<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token comment"># è¯å…¸æœ€å¤§é•¿åº¦4kï¼Œé¢‘ç‡é«˜äº100çš„è¯æ‰ç»Ÿè®¡</span>    vectorizer<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>words<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"bag_of_wordsæ¨¡å‹çš„æ€»è¯æ±‡æ•°é‡ï¼š"</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>vectorizer<span class="token punctuation">.</span>get_feature_names<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># åˆ†å‰²æ•°æ®é›†</span>    data <span class="token operator">=</span> vectorizer<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>index_list<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values<span class="token punctuation">)</span><span class="token punctuation">.</span>toarray<span class="token punctuation">(</span><span class="token punctuation">)</span>    label <span class="token operator">=</span> index_list<span class="token punctuation">.</span>spam<span class="token punctuation">.</span>values    X_train<span class="token punctuation">,</span> X_test<span class="token punctuation">,</span> y_train<span class="token punctuation">,</span> y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span> data<span class="token punctuation">,</span> label<span class="token punctuation">,</span> test_size<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span>    <span class="token comment"># æ ‡å‡†åŒ–</span>    scaler <span class="token operator">=</span> StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span>    X_train <span class="token operator">=</span> scaler<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>X_train<span class="token punctuation">)</span>    X_test <span class="token operator">=</span> scaler<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span>    classifier <span class="token operator">=</span> SVC<span class="token punctuation">(</span>max_iter<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span>    classifier<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span>    y_pred <span class="token operator">=</span> classifier<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'SVMç®—æ³•çš„åˆ†ç±»å‡†ç¡®ç‡ä¸º{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>metrics<span class="token punctuation">.</span>accuracy_score<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> y_pred<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    classifier <span class="token operator">=</span> XGBClassifier<span class="token punctuation">(</span><span class="token punctuation">)</span>    classifier<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span>    y_pred <span class="token operator">=</span> classifier<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'XGBoostç®—æ³•çš„åˆ†ç±»å‡†ç¡®ç‡ä¸º{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>metrics<span class="token punctuation">.</span>accuracy_score<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> y_pred<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    classifier <span class="token operator">=</span> GaussianNB<span class="token punctuation">(</span><span class="token punctuation">)</span>    classifier<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span>    y_pred <span class="token operator">=</span> classifier<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æœ´ç´ è´å¶æ–¯ç®—æ³•çš„åˆ†ç±»å‡†ç¡®ç‡ä¸º{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>metrics<span class="token punctuation">.</span>accuracy_score<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> y_pred<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    classifier <span class="token operator">=</span> linear_model<span class="token punctuation">.</span>LogisticRegression<span class="token punctuation">(</span><span class="token punctuation">)</span>    classifier<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span>    y_pred <span class="token operator">=</span> classifier<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'é€»è¾‘å›å½’ç®—æ³•çš„åˆ†ç±»å‡†ç¡®ç‡ä¸º{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>metrics<span class="token punctuation">.</span>accuracy_score<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> y_pred<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸€äº›å…·ä½“çš„å‚æ•°æˆ‘ä»¬åé¢è¦ç”¨çš„è¯å¯ä»¥ç»§ç»­æ·±å…¥è°ƒèŠ‚ï¼Œè¿™é‡Œéƒ½å°½é‡åªä½¿ç”¨é»˜è®¤å‚æ•°ã€‚å®éªŒç»“æœå¯çŸ¥ï¼Œåœ¨20%æ•°æ®ç”¨ä½œè®­ç»ƒå§ï¼Œ80%æ•°æ®ç”¨ä½œæµ‹è¯•é›†çš„åˆ†ç±»å‡†ç¡®ç‡å¤§è‡´å¦‚ä¸‹ï¼š</p><table><thead><tr><th>SVCæ¨¡å‹</th><th>æœ´ç´ é«˜æ–¯è´å¶æ–¯æ¨¡å‹</th><th>é€»è¾‘å›å½’æ¨¡å‹</th><th>XGBoostæ¨¡å‹</th></tr></thead><tbody><tr><td>63.94%</td><td>88.56%</td><td>98.93%</td><td>98.85%</td></tr></tbody></table><h2 id="TfidfVectorizerä¸HashingVectorizer"><a href="#TfidfVectorizerä¸HashingVectorizer" class="headerlink" title="TfidfVectorizerä¸HashingVectorizer"></a>TfidfVectorizerä¸HashingVectorizer</h2><p>sklearnä¸­è¿˜æœ‰å¦å¤–ä¸¤ç§ç±»ä¼¼äºBOWæ¨¡å‹çš„<code>TfidfVectorizer</code>å’Œ<code>HashingVectorizer</code>ï¼š</p><ul><li><code>TfidfVectorizer</code>å³<code>TF-IDF</code>ç®—æ³•ï¼Œè®¤ä¸ºä¸€ä¸ªè¯è¯­åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°æ¬¡æ•°è¶Šå¤šï¼ŒåŒæ—¶åœ¨æ‰€æœ‰æ–‡æ¡£ä¸­å‡ºç°æ¬¡æ•°è¶Šå°‘ï¼Œè¶Šèƒ½å¤Ÿä»£è¡¨è¯¥æ–‡ç« ï¼›</li><li><code>HashingVectorizer</code>ä¸»è¦æ˜¯é‡‡ç”¨å“ˆå¸Œç®—æ³•ï¼Œåœ¨è¯åº“å¾ˆå¤§çš„æ—¶å€™ï¼Œèƒ½å°†è¯å‘é‡è¿›è¡Œå“ˆå¸Œæ“ä½œï¼Œä¾¿äºå­˜å‚¨ã€‚</li></ul><p>äºŒè€…åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>feature_extraction<span class="token punctuation">.</span>text <span class="token keyword">import</span> TfidfVectorizer<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>feature_extraction<span class="token punctuation">.</span>text <span class="token keyword">import</span> HashingVectorizercorpus <span class="token operator">=</span> <span class="token punctuation">[</span>     <span class="token string">'This is the first document.'</span><span class="token punctuation">,</span>     <span class="token string">'This document is the second document.'</span><span class="token punctuation">,</span>     <span class="token string">'And this is the third one.'</span><span class="token punctuation">,</span>     <span class="token string">'Is this the first document?'</span><span class="token punctuation">,</span> <span class="token punctuation">]</span>vectorizer <span class="token operator">=</span> TfidfVectorizer<span class="token punctuation">(</span><span class="token punctuation">)</span>vectorizer<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>corpus<span class="token punctuation">)</span>vectorizer<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>corpus<span class="token punctuation">)</span><span class="token punctuation">.</span>toarray<span class="token punctuation">(</span><span class="token punctuation">)</span>vectorizer <span class="token operator">=</span> HashingVectorizer<span class="token punctuation">(</span><span class="token punctuation">)</span>vectorizer<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>corpus<span class="token punctuation">)</span>vectorizer<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>corpus<span class="token punctuation">)</span><span class="token punctuation">.</span>toarray<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç›´æ¥æ›¿æ¢ä¸Šä¸€èŠ‚ä»£ç ä¸­çš„<code>CountVectorizer</code>éƒ¨åˆ†å³å¯ã€‚</p><p>æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•å‘€<span class="github-emoji"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>åŠ æ²¹å§ï¼Œå°ä»™å¥³~</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦NLP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¹å¶é‡æ¥¼ ç›¸æ€æ€è§£</title>
      <link href="/2021/10/20/%E4%B9%9D%E5%8F%B6%E9%87%8D%E6%A5%BC-%E7%9B%B8%E6%80%9D%E6%80%8E%E8%A7%A3/"/>
      <url>/2021/10/20/%E4%B9%9D%E5%8F%B6%E9%87%8D%E6%A5%BC-%E7%9B%B8%E6%80%9D%E6%80%8E%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¹å¶é‡æ¥¼-ç›¸æ€æ€è§£"><a href="#ä¹å¶é‡æ¥¼-ç›¸æ€æ€è§£" class="headerlink" title="ä¹å¶é‡æ¥¼ ç›¸æ€æ€è§£"></a>ä¹å¶é‡æ¥¼ ç›¸æ€æ€è§£</h1><blockquote><p>æˆ‘é—®å¤§å¤«ï¼Œä»€ä¹ˆè¯å¯ä»¥åŒ»ç›¸æ€ä¹‹è‹¦ã€‚</p><p>å¤§å¤«è¯´ï¼šâ€œä¹å¶é‡æ¥¼äºŒä¸¤ï¼Œå†¬è‡³è‰è›¹ä¸€é’±ï¼Œç…å…¥éš”å¹´é›ªï¼Œ å¯åŒ»ä¸–äººç›¸æ€ç–¾è‹¦ã€‚â€œ</p><p>å¯é‡æ¥¼ä¸ƒå¶ä¸€æèŠ±ï¼Œå†¬è‡³ä½•æ¥è‰è›¹ï¼Œé›ªåˆæ€èƒ½éš”å¹´ï¼Œç»ˆæ˜¯ç›¸æ€æ— è§£ã€‚</p><p>å¤§å¤«è¯´ï¼Œæ®Šä¸çŸ¥å¤æ¯å³ä¸ºä¹é‡æ¥¼ï¼Œæ˜åœ°ä¸‰å°ºå¯’è‰ç°ï¼Œé™¤å¤•å­æ—¶é›ªï¼Œè½åœ°å·²éš”å¹´ï¼Œè¿‡äº†ç¦»åˆ«æ—¶ï¼Œç›¸æ€äº¦å¯è§£ã€‚</p></blockquote><p><em>æ³¨ï¼šé‡æ¥¼æ˜¯ä¸€å‘³ä¸­è¯ï¼Œæœ‰ä¸ƒç‰‡å¶å­ä¸€æœµèŠ±ï¼›å¤æ¯è‰ä¹Ÿæ˜¯ä¸€å‘³ä¸­è¯ï¼Œåˆåä¹é‡æ¥¼ã€‚</em></p>]]></content>
      
      
      <categories>
          
          <category> æ‚¦è¯» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>All This I Did Without You (Gerald Durrell)</title>
      <link href="/2021/10/20/All-This-I-Did-Without-You-Gerald-Durrell/"/>
      <url>/2021/10/20/All-This-I-Did-Without-You-Gerald-Durrell/</url>
      
        <content type="html"><![CDATA[<h1 id="All-This-I-Did-Without-You"><a href="#All-This-I-Did-Without-You" class="headerlink" title="All This I Did Without You"></a>All This I Did Without You</h1><p>è¿™æ˜¯Gerald Durrell 1978å¹´å†™ç»™æœªå©šå¦»Lee McGeorgeçš„æƒ…ä¹¦ã€‚Gerald Durrellæ˜¯ä¸€ä½è‹±å›½åŠ¨ç‰©å­¦å®¶ã€ä¸»æŒäººå’Œä½œå®¶ï¼Œæ³½è¥¿åŠ¨ç‰©å›­çš„åˆ›åŠäººï¼Œä¸Leeåœ¨1977å¹´ç¬¬ä¸€æ¬¡è§é¢ï¼Œä¸¤å¹´åäºŒäººç»“å©šï¼Œåˆ°1995å¹´Durrellå»ä¸–æ—¶ï¼Œä»–ä»¬ä¸€èµ·æ¢ç§˜äº†å¾ˆå¤šçš„ä¿æŠ¤åŒºï¼Œåˆè‘—äº†ä¸¤æœ¬ä¹¦ã€Šä¸šä½™åšç‰©å­¦å®¶çš„å®ç”¨æŒ‡å—ã€‹å’Œ ã€ŠDurrellåœ¨ä¿„ç½—æ–¯ã€‹ã€‚</p><h2 id="Tom-Hiddleston-åœ¨-Letters-Live-çš„æœ—è¯»"><a href="#Tom-Hiddleston-åœ¨-Letters-Live-çš„æœ—è¯»" class="headerlink" title="Tom Hiddleston åœ¨ Letters Live çš„æœ—è¯»"></a>Tom Hiddleston åœ¨ Letters Live çš„æœ—è¯»</h2><iframe width="560" height="315" src="https://www.youtube.com/embed/PE4msFl_Boo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><h2 id="åŸæ–‡"><a href="#åŸæ–‡" class="headerlink" title="åŸæ–‡"></a>åŸæ–‡</h2><p>July 31st, 1978</p><p>My darling McGeorge,</p><p>You said that things seemed clearer when they were written down. Well, herewith is a very boring letter in which I will try and put everything down so that you may read and re-read it <em>in horror</em> at your folly in getting involved with me. Deep breath.</p><p>To begin with, I love you with a depth and passion that I have felt for no one else in this life and if it astonishes you it astonishes me as well. Not â€” I hasten to say â€” because you are not worth loving. Far from it. Itâ€™s just that, first of all, I swore I would not get involved with another woman. Secondly, I have never had such a feeling before and it is almost frightening. Thirdly, I would never have thought it possible that another human being could occupy my waking (and sleeping) thoughts to the exclusion of almost everything else.</p><p>Fourthly, I never thought that â€” even if one was in love â€” one could get so completely besotted with another person so that a minute away from them felt like a thousand years.</p><p>Fifthly, I never hoped, aspired, dreamed that one could find everything one wanted in a person. <em>I was not such an idiot as to believe this was possible.</em> Yet, in you, I have found everything I want: you are beautiful, gay, giving, gentle, idiotically and deliciously feminine, sexy, wonderfully intelligent and wonderfully silly as well. I want nothing else in this life than to be with you, to listen and watch you â€” your beautiful voice, your beauty â€” to argue with you, to laugh with you, to show you things and share things with you, to explore your magnificent mind, to explore your wonderful body, to help you, protect you, serve you, and bash you on the head when I think you are wrongâ€¦ not to put too fine a point on it I consider that I am <em>the only man outside mythology</em> to have found the crock of gold at the rainbowâ€™s end.</p><p>But â€” having said all that â€” let us consider things in detail. Donâ€™t let this become public butâ€¦ well, I have one or two faults. Minor ones, I hasten to say. For example, I am inclined to be overbearing. I do it for the best possible motives (all tyrants say that) but I do tend (without thinking) to tread people underfoot. You must tell me when I am doing it to you, my sweet, because it can be a very bad thing in a marriage.</p><p>Right. Second blemish. This, actually, is not so much a blemish of character as a blemish of circumstance. Darling, I want you to be you in your own right, and I will do everything I can to help you in this. But you must take into consideration that I am also me in my own right and that I have a headstart on youâ€¦ what I am trying to say is that you mustnâ€™t feel offended if you are sometimes treated simply as my wife. (Always remember that what you lose on the swings, you gain on the roundabouts). But, I am an established creature in the world, and so â€” on occasions â€” you will have to live in my shadow. Nothing gives me less pleasure than this but it is a fact of life that has to be faced.</p><p>Third (and very important and nasty) blemish: jealousy. I donâ€™t think you know what jealousy is â€” thank God â€” in the real sense of the word. I know you have felt jealousy over Lincolnâ€™s wife and child but this is what I call normal jealousy, and this â€” to my regret â€” is not what Iâ€™ve got. What I have got is a black monster that can pervert my good sense, my good humour and any goodness that I have in my make-up. It is really a Jekyll and Hyde situationâ€¦ my Hyde is stronger than my good sense and defeats me, hard though I try. As I told you, I have always known that this lurks within me, but I could control it, and my monster slumbered and nothing happened to awake it. Then I met youâ€¦ and I felt my monster stir and become half awake when you told me of Lincoln and others you have known and, with your letter, my monster came out of its lair â€” <em>black, irrational, bigoted, stupid, evil, malevolent</em>. You will never know how terribly corrosive jealousy is; it is a physical pain as though you had swallowed acid or red hot coals. It is the most terrible of feelings. But you canâ€™t help it â€” at least I canâ€™t. God knows Iâ€™ve tried. I donâ€™t want any ex-boyfriends sitting in church when I marry you. On our wedding day, I want nothing but happiness, both for you and me, and I know I wonâ€™t be happy if there is a church full of your ex-conquests. <strong>When I marry you I will have no past, only a future:</strong> I donâ€™t want to drag my past into our future and I donâ€™t want you to do it, either. Remember, I am jealous of you because I love you. You are never jealous of something you donâ€™t care about. OK, enough about jealousy.</p><p><img src="picture.jfif" alt="Gerald Durrell and Lee McGeorge"></p><p>Now, let me tell you somethingâ€¦ I have seen a thousand sunsets and sunrises; on land where it floods forests and mountains with honey-coloured light; at sea where it rises and sets like a blood orange in a multi-coloured nest of cloud, slipping in and out of the vast ocean. I have seen a thousand moons: harvest moons like gold coins, <em>winter moons as white as ice chips</em>, new moons <em>like baby swansâ€™ feathers</em>.</p><p>I have seen seas as smooth as if painted, *<strong>coloured like shot silk*</strong> or blue as a kingfisher or transparent as glass or black and crumpled with foam, <em>moving ponderously and murderously</em>.</p><p>I have felt winds straight from the South Pole, bleak and wailing like a lost child; winds as tender and warm as a loverâ€™s breath; winds that carried the astringent smell of salt and the death of seaweeds; winds that carried the moist rich smell of a forest floor â€” the smell of a million flowers. Fierce winds that churned and moved the sea like yeast, or winds that made the waters lap at the shore like a kitten.</p><p>I have known silence: the cold, earthy silence at the bottom of a newly dug well; the implacable stony silence of a deep cave; the hot, drugged, midday silence when everything is hypnotized and stilled into silence by the eye of the sun; <em>the silence when great music ends</em>.</p><p>I have heard summer cicadas cry so that *<strong>the sound seems stitched into your bones*</strong>. I have heard tree frogs in an orchestration as complicated as Bach singing in a forest lit by a million emerald fireflies. I have heard the Keas calling over grey glaciers that groaned to themselves *<strong>like old people as they inched their way to the sea*</strong>. I have heard the hoarse street vendor cries of the mating fur seals as they sang to their sleek golden wives, the crisp staccato admonishment of the rattlesnake, *<strong>the cobweb squeak*</strong> of the bat and the belling roar of *<strong>the red deer knee-deep in purple heather*</strong>. I have heard wolves baying at a winterâ€™s moon, red howlers making the forest vibrate with their roaring cries. I have heard the squeak, purr, and grunt of a hundred multi-coloured reef fishes.</p><p>I have seen hummingbirds flashing like opals round a tree of scarlet blooms, humming like a top. I have seen flying fish, skittering like quicksilver across the blue waves, drawing silver lines on the surface with their tails. I have seen spoonbills flying home to roost like a scarlet banner across the sky. <em>I have seen whales, black as tar,</em> *<strong>cushioned on a cornflower blue sea*</strong>, creating a Versailles of fountain with their breath. I have watched butterflies emerge and sit, trembling, *<strong>while the sun irons their wings smooth*</strong>. <em>I have watched tigers, like flames</em>, mating in the long grass. I have been dive-bombed by an angry raven, black and glossy as the Devilâ€™s hoof. <em>I have lain in water warm as milk, soft as silk</em>, while around me played a host of dolphins. I have met a thousand animals and seen a thousand wonderful thingsâ€¦</p><p>All this I did without you. <em>This was my loss.</em></p><p>All this I want to do with you. This will be my gain.</p><p>All this I would gladly have forgone for the sake of one minute of your company, for your laugh, your voice, your eyes, hair, lips, body, and above all for your sweet, ever-surprising mind which is an enchanting quarry in which it is my privilege to delve.</p><p>å¾ˆæ„Ÿäººçš„æ–‡å­—å‘¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ‚¦è¯» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ–‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨å®ç°åƒåœ¾é‚®ä»¶åˆ†ç±»</title>
      <link href="/2021/10/19/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%9E%83%E5%9C%BE%E9%82%AE%E4%BB%B6%E5%88%86%E7%B1%BB/"/>
      <url>/2021/10/19/%E6%9C%B4%E7%B4%A0%E8%B4%9D%E5%8F%B6%E6%96%AF%E5%88%86%E7%B1%BB%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%9E%83%E5%9C%BE%E9%82%AE%E4%BB%B6%E5%88%86%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨å®ç°åƒåœ¾é‚®ä»¶åˆ†ç±»"><a href="#æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨å®ç°åƒåœ¾é‚®ä»¶åˆ†ç±»" class="headerlink" title="æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨å®ç°åƒåœ¾é‚®ä»¶åˆ†ç±»"></a>æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨å®ç°åƒåœ¾é‚®ä»¶åˆ†ç±»</h1><p>æœ¬æ–‡ä¸»è¦å‚è€ƒ<a href="https://github.com/AaronFang123/Naive-Bayes-classifier">è¿™ä¸ªgithubé¡¹ç›®</a>æ¥å®ç°ã€‚</p><h2 id="ä»£ç è¿è¡Œ"><a href="#ä»£ç è¿è¡Œ" class="headerlink" title="ä»£ç è¿è¡Œ"></a>ä»£ç è¿è¡Œ</h2><p>ä½¿ç”¨<code>git clone</code>ä¸‹è½½é¡¹ç›®ï¼Œç„¶åå°†<a href="https://drive.google.com/open?id=15Yi14PBw9P1pb045_aIRa-C3cdP0PKT_">æ•°æ®é›†</a> è§£å‹åˆ°ä»“åº“è·¯å¾„ä¸‹å³å¯</p><p>è¿è¡Œï¼š<code>python new.py</code></p><h2 id="å®éªŒç»“æœ"><a href="#å®éªŒç»“æœ" class="headerlink" title="å®éªŒç»“æœ"></a>å®éªŒç»“æœ</h2><p>æˆ‘åœ¨æœ¬åœ°è¿è¡Œå¾—åˆ°çš„ç»“æœä¸º</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Building prefix dict from the default dictionary ...Dumping model to file cache C:\Users\15617\AppData\Local\Temp\jieba.cacheLoading model cost 0.621 seconds.Prefix dict has been built successfully.æµ‹è¯•é›†æ ·æœ¬æ€»æ•° 12924æ­£ç¡®é¢„è®¡ä¸ªæ•° 11326é”™è¯¯é¢„æµ‹ä¸ªæ•° 1598é¢„æµ‹å‡†ç¡®ç‡ï¼š 0.8763540699473847<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç®—æ³•æ­¥éª¤è§£æ"><a href="#ç®—æ³•æ­¥éª¤è§£æ" class="headerlink" title="ç®—æ³•æ­¥éª¤è§£æ"></a>ç®—æ³•æ­¥éª¤è§£æ</h2><h3 id="1-æ”¶é›†æ•°æ®ï¼Œæ”¶é›†åƒåœ¾é‚®ä»¶æ–‡æœ¬æ•°æ®ä»¥åŠåœç”¨è¯"><a href="#1-æ”¶é›†æ•°æ®ï¼Œæ”¶é›†åƒåœ¾é‚®ä»¶æ–‡æœ¬æ•°æ®ä»¥åŠåœç”¨è¯" class="headerlink" title="1. æ”¶é›†æ•°æ®ï¼Œæ”¶é›†åƒåœ¾é‚®ä»¶æ–‡æœ¬æ•°æ®ä»¥åŠåœç”¨è¯"></a>1. æ”¶é›†æ•°æ®ï¼Œæ”¶é›†åƒåœ¾é‚®ä»¶æ–‡æœ¬æ•°æ®ä»¥åŠåœç”¨è¯</h3><p>ä»“åº“åŒ…å«äº†ä¸¤ä¸ªæ–‡ä»¶<code>index</code>ä»¥åŠ<code>stop</code>ï¼Œ å‰è€…åŒ…å«äº†é‚®ä»¶ç›®å½•å’Œæ ‡ç­¾ï¼Œåè€…åŒ…å«äº†åœç”¨è¯åˆ—è¡¨ã€‚é‚®ä»¶è¢«åˆ†æˆä¸¤ç±»ï¼š<code>spam</code>åƒåœ¾é‚®ä»¶ä»¥åŠ<code>ham</code>æ­£å¸¸é‚®ä»¶ã€‚</p><p>é¦–å…ˆè¦ä»<code>index</code>å’Œ<code>stop</code>ä¸­è¯»å‡ºæ ‡ç­¾-è·¯å¾„åˆ—è¡¨å’Œåœç”¨è¯åˆ—è¡¨ï¼Œç”±å‡½æ•°<code>load_formatted_data()</code></p><p>å’Œ<code>load_stop_word()</code>å®ç°ã€‚</p><p>é’ˆå¯¹<code>DataFrame</code>ç±»çš„ç‰¹ç‚¹ï¼Œä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹(lambdaè¡¨è¾¾å¼)å¯ä»¥å¤§å¹…æé«˜æ•ˆç‡ä»¥åŠä»£ç å¯è¯»æ€§ã€‚</p><p><code>main</code>å‡½æ•°å†…ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    index_list <span class="token operator">=</span> load_formatted_data<span class="token punctuation">(</span><span class="token punctuation">)</span>    stop_words <span class="token operator">=</span> load_stop_word<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¯¹åº”å‡½æ•°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">load_formatted_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    åŠ è½½æ ¼å¼åŒ–åçš„æ ‡ç­¾-è·¯å¾„åˆ—è¡¨    spamåˆ—ä¸º1ä»£è¡¨æ˜¯åƒåœ¾é‚®ä»¶ï¼Œ0ä»£è¡¨æ™®é€šé‚®ä»¶    pathåˆ—ä»£è¡¨è¯¥é‚®ä»¶è·¯å¾„    :return:(DataFrame)index    """</span>    <span class="token comment"># åŠ è½½æ•°æ®é›†</span>    index <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">,</span> names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'spam'</span><span class="token punctuation">,</span> <span class="token string">'path'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    index<span class="token punctuation">.</span>spam <span class="token operator">=</span> index<span class="token punctuation">.</span>spam<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token string">'spam'</span> <span class="token keyword">else</span> <span class="token number">0</span><span class="token punctuation">)</span>    index<span class="token punctuation">.</span>path <span class="token operator">=</span> index<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> index<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">load_stop_word</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è¯»å‡ºåœç”¨è¯åˆ—è¡¨    :return: (List)_stop_words    """</span>    <span class="token keyword">with</span> codecs<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"stop"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        lines <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>    _stop_words <span class="token operator">=</span> <span class="token punctuation">[</span>i<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> lines<span class="token punctuation">]</span>    <span class="token keyword">return</span> _stop_words<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-åŠ è½½æ•°æ®ï¼Œä½¿ç”¨pandasåŠ è½½æ•°æ®ï¼Œå¹¶ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹-lambda-æ¥å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ã€‚"><a href="#2-åŠ è½½æ•°æ®ï¼Œä½¿ç”¨pandasåŠ è½½æ•°æ®ï¼Œå¹¶ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹-lambda-æ¥å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ã€‚" class="headerlink" title="2.åŠ è½½æ•°æ®ï¼Œä½¿ç”¨pandasåŠ è½½æ•°æ®ï¼Œå¹¶ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹(lambda)æ¥å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ã€‚"></a>2.åŠ è½½æ•°æ®ï¼Œä½¿ç”¨pandasåŠ è½½æ•°æ®ï¼Œå¹¶ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹(lambda)æ¥å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ã€‚</h3><p>ä¾æ®ä¸Šä¸€æ­¥è¯»å–åˆ°çš„æ ‡ç­¾-è·¯å¾„åˆ—è¡¨ï¼Œéå†å¾—åˆ°æ¯å°é‚®ä»¶çš„è¯æ±‡å­—ç¬¦ä¸²ï¼Œå¾—åˆ°å­—ç¬¦ä¸²ä¹‹åï¼Œåˆ¶ä½œæ¯å°é‚®ä»¶çš„è¯æ±‡å­—å…¸(Dictionary)ï¼Œå½¢å¦‚<code>{word:1}</code>ã€‚æ­¤å¤„é‡‡ç”¨çš„æ˜¯è¯é›†æ¨¡å‹ï¼Œå³å…¨éƒ¨æ–‡æ¡£ä¸­çš„æ‰€æœ‰å•è¯æ„æˆçš„é›†åˆï¼Œæ¯ä¸ªå•è¯åªå‡ºç°ä¸€æ¬¡ï¼Œä»…ä»…è€ƒè™‘è¯æ˜¯å¦åœ¨æ–‡æœ¬ä¸­å‡ºç°ï¼Œè€Œä¸è€ƒè™‘è¯é¢‘ã€‚</p><p><code>main</code>å‡½æ•°å†…ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>index_list<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span> <span class="token operator">=</span> index_list<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> get_mail_content<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>index_list<span class="token punctuation">[</span><span class="token string">'word_dict'</span><span class="token punctuation">]</span> <span class="token operator">=</span> index_list<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> create_word_dict<span class="token punctuation">(</span>x<span class="token punctuation">,</span> stop_words<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹åº”å‡½æ•°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_mail_content</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    éå†å¾—åˆ°æ¯å°é‚®ä»¶çš„è¯æ±‡å­—ç¬¦ä¸²    :param path: é‚®ä»¶è·¯å¾„    :return:(Str)content    """</span>    <span class="token keyword">with</span> codecs<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"gbk"</span><span class="token punctuation">,</span> errors<span class="token operator">=</span><span class="token string">"ignore"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        lines <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> lines<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\n'</span><span class="token punctuation">:</span>            <span class="token comment"># å»é™¤ç¬¬ä¸€ä¸ªç©ºè¡Œï¼Œå³åœ¨ç¬¬ä¸€ä¸ªç©ºè¡Œä¹‹å‰çš„é‚®ä»¶åè®®å†…å®¹å…¨éƒ¨èˆå¼ƒ</span>            lines <span class="token operator">=</span> lines<span class="token punctuation">[</span>i<span class="token punctuation">:</span><span class="token punctuation">]</span>            <span class="token keyword">break</span>    content <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># print(content)</span>    <span class="token keyword">return</span> content<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">create_word_dict</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> stop_words_list<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    ä¾æ®é‚®ä»¶çš„è¯æ±‡å­—ç¬¦ä¸²ç»Ÿè®¡è¯æ±‡å‡ºç°è®°å½•ï¼Œä¾æ®åœæ­¢è¯åˆ—è¡¨é™¤å»æŸäº›è¯è¯­    :param content: é‚®ä»¶çš„è¯æ±‡å­—ç¬¦ä¸²    :param stop_words_list:åœæ­¢è¯åˆ—è¡¨    :return:(Dict)word_dict    """</span>    word_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    word_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token comment"># word_dict key:word, value:1</span>    <span class="token comment"># é™å®šåªæŸ¥æ‰¾ä¸­æ–‡å­—ç¬¦</span>    content <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">u"[\u4e00-\u9fa5]"</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>    content <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>content<span class="token punctuation">)</span>    word_list_temp <span class="token operator">=</span> jieba<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>content<span class="token punctuation">)</span>    <span class="token keyword">for</span> word <span class="token keyword">in</span> word_list_temp<span class="token punctuation">:</span>        <span class="token keyword">if</span> word <span class="token operator">!=</span> <span class="token string">''</span> <span class="token keyword">and</span> word <span class="token keyword">not</span> <span class="token keyword">in</span> stop_words_list<span class="token punctuation">:</span>            word_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>word<span class="token punctuation">)</span>    <span class="token keyword">for</span> word <span class="token keyword">in</span> word_list<span class="token punctuation">:</span>        word_dict<span class="token punctuation">[</span>word<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">return</span> word_dict<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸­æ–‡åˆ†è¯æ˜¯é€šè¿‡ç¬¬ä¸‰æ–¹åº“<code>jieba</code>å®ç°çš„</p><h3 id="3-è®­ç»ƒç®—æ³•"><a href="#3-è®­ç»ƒç®—æ³•" class="headerlink" title="3. è®­ç»ƒç®—æ³•"></a>3. è®­ç»ƒç®—æ³•</h3><p>é¦–å…ˆéœ€è¦è®¾ç½®è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œå‡è®¾é€‰å®šå‰80%çš„dataæ•°æ®ä½œä¸ºè®­ç»ƒé›†ï¼Œ20%ä½œä¸ºæµ‹è¯•é›†</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> train_set <span class="token operator">=</span> index_list<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token builtin">len</span><span class="token punctuation">(</span>index_list<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.8</span><span class="token punctuation">]</span> test_set <span class="token operator">=</span> index_list<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token builtin">len</span><span class="token punctuation">(</span>index_list<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.8</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹æ•°æ®é›†è¿›è¡Œè®­ç»ƒ, ç»Ÿè®¡è®­ç»ƒé›†ä¸­æŸä¸ªè¯åœ¨æ™®é€šé‚®ä»¶å’Œåƒåœ¾é‚®ä»¶ä¸­çš„å‡ºç°æ¬¡æ•°, ä¸ºè®¡ç®—å…ˆéªŒæ¦‚ç‡å’ŒåéªŒæ¦‚ç‡æä¾›æ•°æ®ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>train_word_dict<span class="token punctuation">,</span> spam_count<span class="token punctuation">,</span> ham_count <span class="token operator">=</span> train_dataset<span class="token punctuation">(</span>train_set<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">train_dataset</span><span class="token punctuation">(</span>dataset_to_train<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å¯¹æ•°æ®é›†è¿›è¡Œè®­ç»ƒ, ç»Ÿè®¡è®­ç»ƒé›†ä¸­æŸä¸ªè¯åœ¨æ™®é€šé‚®ä»¶å’Œåƒåœ¾é‚®ä»¶ä¸­çš„å‡ºç°æ¬¡æ•°    :param dataset_to_train: å°†è¦ç”¨æ¥è®­ç»ƒçš„æ•°æ®é›†    :return:Tuple(è¯æ±‡å‡ºç°æ¬¡æ•°å­—å…¸_train_word_dict, åƒåœ¾é‚®ä»¶æ€»æ•°spam_count, æ­£å¸¸é‚®ä»¶æ€»æ•°ham_count)    """</span>    _train_word_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token comment"># train_word_dictå†…å®¹ï¼Œè®­ç»ƒé›†ä¸­æŸä¸ªè¯åœ¨æ™®é€šé‚®ä»¶å’Œåƒåœ¾é‚®ä»¶ä¸­çš„å‡ºç°æ¬¡æ•°</span>    <span class="token keyword">for</span> word_dict<span class="token punctuation">,</span> spam <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>dataset_to_train<span class="token punctuation">.</span>word_dict<span class="token punctuation">,</span> dataset_to_train<span class="token punctuation">.</span>spam<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># word_dictæŸå°ä¿¡çš„è¯æ±‡è¡¨ spamæŸå°ä¿¡çš„çŠ¶æ€</span>        <span class="token keyword">for</span> word <span class="token keyword">in</span> word_dict<span class="token punctuation">:</span>            <span class="token comment"># å¯¹æ¯å°ä¿¡çš„æ¯ä¸ªè¯åœ¨è¯¥é‚®ä»¶åˆ†ç±»è¿›è¡Œå‡ºç°è®°å½• å‡ºç°è¿‡ä¸ºåˆ™è®°å½•æ•°åŠ 1 æœªå‡ºç°ä¸º0</span>            _train_word_dict<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span>word<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span>            _train_word_dict<span class="token punctuation">[</span>word<span class="token punctuation">]</span><span class="token punctuation">[</span>spam<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>    ham_count <span class="token operator">=</span> dataset_to_train<span class="token punctuation">.</span>spam<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    spam_count <span class="token operator">=</span> dataset_to_train<span class="token punctuation">.</span>spam<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> _train_word_dict<span class="token punctuation">,</span> spam_count<span class="token punctuation">,</span> ham_count<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-æµ‹è¯•ç®—æ³•"><a href="#4-æµ‹è¯•ç®—æ³•" class="headerlink" title="4. æµ‹è¯•ç®—æ³•"></a>4. æµ‹è¯•ç®—æ³•</h3><p>å…ˆéªŒæ¦‚ç‡P(s)æå¤§ä¼¼ç„¶ä¼°è®¡</p><p>P(spam) =  åƒåœ¾é‚®ä»¶æ•°/é‚®ä»¶æ€»æ•°</p><p>P(ham) = æ­£å¸¸é‚®ä»¶æ•°/é‚®ä»¶æ€»æ•°</p><p>ä¸ºäº†è®¡ç®—é¿å…æ•°å­—è¿‡å°ä¸¢å¤±ç²¾åº¦ï¼Œä»¥ä¸‹è®¡ç®—å‡ä»¥å¯¹æ•°å½¢å¼è¿›è¡Œ</p><p>ç”¨Wè¡¨ç¤ºæŸä¸ªè¯ï¼Œç°åœ¨éœ€è¦è®¡ç®—P(S|W)çš„å€¼ï¼Œå³åœ¨æŸä¸ªè¯è¯­ï¼ˆWï¼‰å·²ç»å­˜åœ¨çš„æ¡ä»¶ä¸‹ï¼Œåƒåœ¾é‚®ä»¶ï¼ˆSï¼‰çš„æ¦‚ç‡æœ‰å¤šå¤§ã€‚</p><p><img src="http://chart.googleapis.com/chart?cht=tx&amp;chl=P(S%7CW)=%5Cfrac%7BP(W%7CS)P(S)%7D%7BP(W%7CS)P(S)+P(W%7CH)P(H)%7D&amp;chs=70" alt="img"></p><p>åˆå› ä¸ºå¯¹äºæ¯ä¸ªè¯P(S | H) ï¼Œåˆ†æ¯ä¸ä¸Šå¼ä¸€è‡´ï¼Œæ‰€ä»¥åªéœ€æ¯”è¾ƒåˆ†å­å³å¯å¾—å‡ºç»“è®ºâ€”â€”å¤§è€…ä¸ºæ›´å¯èƒ½çš„åˆ†ç±»ç»“æœã€‚</p><p>ä¸ºäº†å¢å¼ºä¿¡åº¦ï¼ŒåŸºäºä¸Šé¢çš„æ¨ç†ï¼Œéœ€è¦è®¡ç®—è”åˆæ¦‚ç‡å¯†åº¦ï¼Œå¯¹æ¯ä¸ªå‡ºç°åœ¨ä¸€ä¿¡ä»¶ä¸­çš„æ‰€æœ‰è¯æ±‡çš„æ‰€æœ‰åéªŒæ¦‚ç‡è®¡ç®—è”åˆæ¦‚ç‡ï¼Œå¤§è€…ä¸ºæ›´å¯èƒ½çš„åˆ†ç±»ç»“æœã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">predict_dataset</span><span class="token punctuation">(</span>_train_word_dict<span class="token punctuation">,</span> _spam_count<span class="token punctuation">,</span> _ham_count<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æµ‹è¯•ç®—æ³•    :param _train_word_dict:è¯æ±‡å‡ºç°æ¬¡æ•°å­—å…¸    :param _spam_count:åƒåœ¾é‚®ä»¶æ€»æ•°    :param _ham_count:æ­£å¸¸é‚®ä»¶æ€»æ•°    :param data:æµ‹è¯•é›†    :return:    """</span>    total_count <span class="token operator">=</span> _ham_count <span class="token operator">+</span> _spam_count    word_dict <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'word_dict'</span><span class="token punctuation">]</span>    <span class="token comment"># å…ˆéªŒæ¦‚ç‡ å·²ç»å–äº†å¯¹æ•°</span>    ham_probability <span class="token operator">=</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>_ham_count<span class="token punctuation">)</span> <span class="token operator">/</span> total_count<span class="token punctuation">)</span>    spam_probability <span class="token operator">=</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>_spam_count<span class="token punctuation">)</span> <span class="token operator">/</span> total_count<span class="token punctuation">)</span>    <span class="token keyword">for</span> word <span class="token keyword">in</span> word_dict<span class="token punctuation">:</span>        word <span class="token operator">=</span> word<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>        _train_word_dict<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span>word<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token comment"># æ±‚è”åˆæ¦‚ç‡å¯†åº¦ += log</span>        <span class="token comment"># æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘</span>        word_occurs_counts_ham <span class="token operator">=</span> _train_word_dict<span class="token punctuation">[</span>word<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        <span class="token comment"># å‡ºç°è¿‡è¿™ä¸ªè¯çš„ä¿¡ä»¶æ•° / åƒåœ¾é‚®ä»¶æ•°</span>        ham_probability <span class="token operator">+=</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>word_occurs_counts_ham<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> _ham_count <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span>        word_occurs_counts_spam <span class="token operator">=</span> _train_word_dict<span class="token punctuation">[</span>word<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token comment"># å‡ºç°è¿‡è¿™ä¸ªè¯çš„ä¿¡ä»¶æ•° / æ™®é€šé‚®ä»¶æ•°</span>        spam_probability <span class="token operator">+=</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>word_occurs_counts_spam<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> _spam_count <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> spam_probability <span class="token operator">&gt;</span> ham_probability<span class="token punctuation">:</span>        is_spam <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        is_spam <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># è¿”å›é¢„æµ‹æ­£ç¡®çŠ¶æ€</span>    <span class="token keyword">if</span> is_spam <span class="token operator">==</span> data<span class="token punctuation">[</span><span class="token string">'spam'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">1</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼šå‘ç°0æ¦‚ç‡ä¼šç»™åéªŒæ¦‚ç‡è®¡ç®—å¸¦æ¥è‡´å‘½å½±å“ï¼Œä»å®é™…æ„ä¹‰ä¸Šçœ‹ï¼Œæœªå‡ºç°åœ¨è®­ç»ƒé›†ä¸­çš„è¯è¯­ä¸èƒ½è¯´æ˜¯ä¸å¯èƒ½çš„ï¼Œæ‰€ä»¥æœ‰å¿…è¦æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºæ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ã€‚</p><h3 id="5-ä½¿ç”¨ç®—æ³•"><a href="#5-ä½¿ç”¨ç®—æ³•" class="headerlink" title="5. ä½¿ç”¨ç®—æ³•"></a>5. ä½¿ç”¨ç®—æ³•</h3><p>æµ‹è¯•ç®—æ³•å¾—å‡ºçš„é¢„æµ‹ç»“è®ºä¸å®é™…åˆ†ç±»æƒ…å†µåšæ¯”è¾ƒï¼Œå¾—å‡ºå‡†ç¡®ç‡</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>test_mails_predict <span class="token operator">=</span> test_set<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>        <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> predict_dataset<span class="token punctuation">(</span>train_word_dict<span class="token punctuation">,</span> spam_count<span class="token punctuation">,</span> ham_count<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>    corr_count <span class="token operator">=</span> <span class="token number">0</span>    false_count <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> test_mails_predict<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>            corr_count <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            false_count <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æµ‹è¯•é›†æ ·æœ¬æ€»æ•°"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>corr_count <span class="token operator">+</span> false_count<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ­£ç¡®é¢„è®¡ä¸ªæ•°"</span><span class="token punctuation">,</span> corr_count<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"é”™è¯¯é¢„æµ‹ä¸ªæ•°"</span><span class="token punctuation">,</span> false_count<span class="token punctuation">)</span>    result <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span>corr_count <span class="token operator">/</span> <span class="token punctuation">(</span>corr_count <span class="token operator">+</span> false_count<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'é¢„æµ‹å‡†ç¡®ç‡ï¼š'</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®Œæ•´ä»£ç ä¸æ³¨é‡Š"><a href="#å®Œæ•´ä»£ç ä¸æ³¨é‡Š" class="headerlink" title="å®Œæ•´ä»£ç ä¸æ³¨é‡Š"></a>å®Œæ•´ä»£ç ä¸æ³¨é‡Š</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> math<span class="token keyword">import</span> re<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> codecs<span class="token keyword">import</span> jieba<span class="token keyword">def</span> <span class="token function">load_formatted_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    åŠ è½½æ ¼å¼åŒ–åçš„æ ‡ç­¾-è·¯å¾„åˆ—è¡¨    spamåˆ—ä¸º1ä»£è¡¨æ˜¯åƒåœ¾é‚®ä»¶ï¼Œ0ä»£è¡¨æ™®é€šé‚®ä»¶    pathåˆ—ä»£è¡¨è¯¥é‚®ä»¶è·¯å¾„    :return:(DataFrame)index    """</span>    <span class="token comment"># åŠ è½½æ•°æ®é›†</span>    index <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">,</span> names<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'spam'</span><span class="token punctuation">,</span> <span class="token string">'path'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># è¯»å…¥æ˜¯ä¸¤åˆ—ï¼Œä¸€åˆ—spam ä¸€åˆ—path</span>    index<span class="token punctuation">.</span>spam <span class="token operator">=</span> index<span class="token punctuation">.</span>spam<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token string">'spam'</span> <span class="token keyword">else</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment"># æ•°æ®æ ‡ç­¾ï¼Œæ ‡ç­¾ä¸ºspamçš„è®¾ç½®ä¸º1 å¦åˆ™è®¾ç½®ä¸º0</span>    index<span class="token punctuation">.</span>path <span class="token operator">=</span> index<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># æ›´æ”¹æ–‡ä»¶è·¯å¾„</span>    <span class="token keyword">return</span> index<span class="token keyword">def</span> <span class="token function">load_stop_word</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    è¯»å‡ºåœç”¨è¯åˆ—è¡¨ åç»­æˆ‘ä»¬è¦è®¾è®¡è‡ªå·±çš„åœç”¨è¯åˆ—è¡¨    :return: (List)_stop_words    """</span>    <span class="token keyword">with</span> codecs<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"stop"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span> <span class="token comment"># è½½å…¥åœç”¨è¯åˆ—è¡¨</span>        lines <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># è¯»å…¥æ‰€æœ‰è¡Œï¼Œå¾—åˆ°ä¸€ä¸ªåŒ…å«å¤šä¸ªå­—ç¬¦ä¸²çš„listï¼Œä¸€è¡Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span>    _stop_words <span class="token operator">=</span> <span class="token punctuation">[</span>i<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> lines<span class="token punctuation">]</span> <span class="token comment"># èˆå¼ƒæ‰æ‰€æœ‰æ¢è¡Œç¬¦</span>    <span class="token keyword">return</span> _stop_words<span class="token keyword">def</span> <span class="token function">get_mail_content</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    éå†å¾—åˆ°æ¯å°é‚®ä»¶çš„è¯æ±‡å­—ç¬¦ä¸²    :param path: é‚®ä»¶è·¯å¾„    :return:(Str)content    """</span>    <span class="token keyword">with</span> codecs<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"gbk"</span><span class="token punctuation">,</span> errors<span class="token operator">=</span><span class="token string">"ignore"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span> <span class="token comment"># ä»¥gbkç¼–ç æ‰“å¼€æ–‡ä»¶ï¼Œå¿½ç•¥é”™è¯¯</span>        lines <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># è¯»å…¥æ‰€æœ‰è¡Œï¼Œå¾—åˆ°ä¸€ä¸ªåŒ…å«å¤šä¸ªå­—ç¬¦ä¸²çš„listï¼Œä¸€è¡Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> lines<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'\n'</span><span class="token punctuation">:</span>            <span class="token comment"># å»é™¤ç¬¬ä¸€ä¸ªç©ºè¡Œï¼Œå³åœ¨ç¬¬ä¸€ä¸ªç©ºè¡Œä¹‹å‰çš„é‚®ä»¶åè®®å†…å®¹å…¨éƒ¨èˆå¼ƒ</span>            lines <span class="token operator">=</span> lines<span class="token punctuation">[</span>i<span class="token punctuation">:</span><span class="token punctuation">]</span>            <span class="token keyword">break</span>    content <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment"># strip()æ˜¯ä¸¢å¼ƒæ¢è¡Œç¬¦ï¼Œsplit()æ˜¯æŒ‰ç…§ç©ºæ ¼åˆ†éš”å¼€ï¼ˆèµ·åˆ°å‰”é™¤å¤šä¸ªç©ºæ ¼åªç•™ä¸‹ä¸€ä¸ªç©ºæ ¼çš„ä½œç”¨ï¼‰ï¼Œç„¶åå†joinåœ¨ä¸€èµ·</span>    <span class="token comment"># print(content)</span>    <span class="token keyword">return</span> content<span class="token keyword">def</span> <span class="token function">create_word_dict</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> stop_words_list<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    ä¾æ®é‚®ä»¶çš„è¯æ±‡å­—ç¬¦ä¸²ç»Ÿè®¡è¯æ±‡å‡ºç°è®°å½•ï¼Œä¾æ®åœæ­¢è¯åˆ—è¡¨é™¤å»æŸäº›è¯è¯­    :param content: é‚®ä»¶çš„è¯æ±‡å­—ç¬¦ä¸²    :param stop_words_list:åœæ­¢è¯åˆ—è¡¨    :return:(Dict)word_dict    """</span>    word_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    word_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token comment"># word_dict key:word, value:1</span>    content <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">u"[\u4e00-\u9fa5]"</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>     <span class="token comment"># æ­£åˆ™è¡¨è¾¾å¼ï¼Œåªä¿ç•™æ±‰å­—ï¼Œå…¶ä»–å­—ç¬¦å…¨éƒ¨å‰”é™¤ï¼Œè¿™å¥å¾—åˆ°çš„æ˜¯å«æœ‰å¤šä¸ªå­—ç¬¦ä¸²çš„listï¼Œå…¶ä¸­ä¸€ä¸ªæ±‰å­—ä¸€ä¸ªå­—ç¬¦ä¸²</span>    content <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token comment"># æ‹¼èµ·æ¥</span>    word_list_temp <span class="token operator">=</span> jieba<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token comment"># ä½¿ç”¨jiebaè¿›è¡Œåˆ†è¯ åç»­æˆ‘ä»¬è¦åŠ å…¥è‡ªå·±çš„åˆ†è¯è¯å…¸</span>    <span class="token keyword">for</span> word <span class="token keyword">in</span> word_list_temp<span class="token punctuation">:</span>        <span class="token keyword">if</span> word <span class="token operator">!=</span> <span class="token string">''</span> <span class="token keyword">and</span> word <span class="token keyword">not</span> <span class="token keyword">in</span> stop_words_list<span class="token punctuation">:</span> <span class="token comment"># å»æ‰ç©ºè¯å’Œåœæ­¢è¯</span>            word_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>word<span class="token punctuation">)</span>    <span class="token keyword">for</span> word <span class="token keyword">in</span> word_list<span class="token punctuation">:</span>        word_dict<span class="token punctuation">[</span>word<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment"># å»ºç«‹å­—å…¸ï¼Œåˆæ³•è¯çš„å¯¹åº”å€¼éƒ½ä¸º1</span>    <span class="token keyword">return</span> word_dict<span class="token keyword">def</span> <span class="token function">train_dataset</span><span class="token punctuation">(</span>dataset_to_train<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    å¯¹æ•°æ®é›†è¿›è¡Œè®­ç»ƒ, ç»Ÿè®¡è®­ç»ƒé›†ä¸­æŸä¸ªè¯åœ¨æ™®é€šé‚®ä»¶å’Œåƒåœ¾é‚®ä»¶ä¸­çš„å‡ºç°æ¬¡æ•°    :param dataset_to_train: å°†è¦ç”¨æ¥è®­ç»ƒçš„æ•°æ®é›†    :return:Tuple(è¯æ±‡å‡ºç°æ¬¡æ•°å­—å…¸_train_word_dict, åƒåœ¾é‚®ä»¶æ€»æ•°spam_count, æ­£å¸¸é‚®ä»¶æ€»æ•°ham_count)    """</span>    _train_word_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token comment"># train_word_dictå†…å®¹ï¼Œè®­ç»ƒé›†ä¸­æŸä¸ªè¯åœ¨æ™®é€šé‚®ä»¶å’Œåƒåœ¾é‚®ä»¶ä¸­çš„å‡ºç°æ¬¡æ•°</span>    <span class="token keyword">for</span> word_dict<span class="token punctuation">,</span> spam <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>dataset_to_train<span class="token punctuation">.</span>word_dict<span class="token punctuation">,</span> dataset_to_train<span class="token punctuation">.</span>spam<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># word_dictæŸå°ä¿¡çš„è¯æ±‡è¡¨ spamæŸå°ä¿¡çš„çŠ¶æ€</span>        <span class="token keyword">for</span> word <span class="token keyword">in</span> word_dict<span class="token punctuation">:</span>            <span class="token comment"># å¯¹æ¯å°ä¿¡çš„æ¯ä¸ªè¯åœ¨è¯¥é‚®ä»¶åˆ†ç±»è¿›è¡Œå‡ºç°è®°å½• å‡ºç°è¿‡ä¸ºåˆ™è®°å½•æ•°åŠ 1 æœªå‡ºç°ä¸º0</span>            _train_word_dict<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span>word<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment"># äºŒç»´å­—å…¸ï¼Œæ¯ä¸ªè¯å¯¹åº”ä¸€ä¸ª{0: 0, 1: 0}ï¼Œå†’å·å‰è¡¨ç¤ºæ ‡ç­¾ï¼Œå†’å·åè¡¨ç¤ºå‡ºç°æ¬¡æ•°</span>            _train_word_dict<span class="token punctuation">[</span>word<span class="token punctuation">]</span><span class="token punctuation">[</span>spam<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>    ham_count <span class="token operator">=</span> dataset_to_train<span class="token punctuation">.</span>spam<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    spam_count <span class="token operator">=</span> dataset_to_train<span class="token punctuation">.</span>spam<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> _train_word_dict<span class="token punctuation">,</span> spam_count<span class="token punctuation">,</span> ham_count<span class="token keyword">def</span> <span class="token function">predict_dataset</span><span class="token punctuation">(</span>_train_word_dict<span class="token punctuation">,</span> _spam_count<span class="token punctuation">,</span> _ham_count<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    æµ‹è¯•ç®—æ³•    :param _train_word_dict:è¯æ±‡å‡ºç°æ¬¡æ•°å­—å…¸    :param _spam_count:åƒåœ¾é‚®ä»¶æ€»æ•°    :param _ham_count:æ­£å¸¸é‚®ä»¶æ€»æ•°    :param data:æµ‹è¯•é›†    :return:    """</span>    total_count <span class="token operator">=</span> _ham_count <span class="token operator">+</span> _spam_count    word_dict <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'word_dict'</span><span class="token punctuation">]</span>    <span class="token comment"># å…ˆéªŒæ¦‚ç‡ å·²ç»å–äº†å¯¹æ•°</span>    ham_probability <span class="token operator">=</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>_ham_count<span class="token punctuation">)</span> <span class="token operator">/</span> total_count<span class="token punctuation">)</span>    spam_probability <span class="token operator">=</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>_spam_count<span class="token punctuation">)</span> <span class="token operator">/</span> total_count<span class="token punctuation">)</span>    <span class="token keyword">for</span> word <span class="token keyword">in</span> word_dict<span class="token punctuation">:</span>        word <span class="token operator">=</span> word<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>        _train_word_dict<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span>word<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token comment"># æ±‚è”åˆæ¦‚ç‡å¯†åº¦ += log</span>        <span class="token comment"># æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘</span>        word_occurs_counts_ham <span class="token operator">=</span> _train_word_dict<span class="token punctuation">[</span>word<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        <span class="token comment"># å‡ºç°è¿‡è¿™ä¸ªè¯çš„ä¿¡ä»¶æ•° / åƒåœ¾é‚®ä»¶æ•°</span>        ham_probability <span class="token operator">+=</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>word_occurs_counts_ham<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> _ham_count <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span>        word_occurs_counts_spam <span class="token operator">=</span> _train_word_dict<span class="token punctuation">[</span>word<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token comment"># å‡ºç°è¿‡è¿™ä¸ªè¯çš„ä¿¡ä»¶æ•° / æ™®é€šé‚®ä»¶æ•°</span>        spam_probability <span class="token operator">+=</span> math<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>word_occurs_counts_spam<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> _spam_count <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> spam_probability <span class="token operator">&gt;</span> ham_probability<span class="token punctuation">:</span>        is_spam <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        is_spam <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># è¿”å›é¢„æµ‹æ­£ç¡®çŠ¶æ€</span>    <span class="token keyword">if</span> is_spam <span class="token operator">==</span> data<span class="token punctuation">[</span><span class="token string">'spam'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">1</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token keyword">def</span> <span class="token function">save_train_word_dict</span><span class="token punctuation">(</span>train_word_dict<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">with</span> codecs<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"train_word_dict"</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"gbk"</span><span class="token punctuation">,</span> errors<span class="token operator">=</span><span class="token string">"ignore"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>train_word_dict<span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    index_list <span class="token operator">=</span> load_formatted_data<span class="token punctuation">(</span><span class="token punctuation">)</span>    stop_words <span class="token operator">=</span> load_stop_word<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># get_mail_content(index_list.path[0])</span>    index_list<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span> <span class="token operator">=</span> index_list<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> get_mail_content<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># å¯¹contentåˆ—ä½¿ç”¨å‡½æ•°ï¼Œå¾—åˆ°é‚®ä»¶å†…å®¹</span>    index_list<span class="token punctuation">[</span><span class="token string">'word_dict'</span><span class="token punctuation">]</span> <span class="token operator">=</span> index_list<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> create_word_dict<span class="token punctuation">(</span>x<span class="token punctuation">,</span> stop_words<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># å¾—åˆ°æ–°çš„åˆ—word_dictï¼Œå†…å®¹ä¸ºå¯¹åº”contentè¡Œçš„åˆæ³•è¯å­—å…¸</span>    train_set <span class="token operator">=</span> index_list<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token builtin">len</span><span class="token punctuation">(</span>index_list<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.8</span><span class="token punctuation">]</span> <span class="token comment"># å–80%ä¸ºè®­ç»ƒé›†ï¼Œ20%ä¸ºæµ‹è¯•é›†</span>    test_set <span class="token operator">=</span> index_list<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token builtin">len</span><span class="token punctuation">(</span>index_list<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.8</span><span class="token punctuation">:</span><span class="token punctuation">]</span>    train_word_dict<span class="token punctuation">,</span> spam_count<span class="token punctuation">,</span> ham_count <span class="token operator">=</span> train_dataset<span class="token punctuation">(</span>train_set<span class="token punctuation">)</span>    save_train_word_dict<span class="token punctuation">(</span>train_word_dict<span class="token punctuation">)</span> <span class="token comment"># ä¿å­˜æ¯ä¸ªè¯æ¯ä¸ªæ ‡ç­¾å‡ºç°çš„æ¬¡æ•°</span>    test_mails_predict <span class="token operator">=</span> test_set<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>        <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> predict_dataset<span class="token punctuation">(</span>train_word_dict<span class="token punctuation">,</span> spam_count<span class="token punctuation">,</span> ham_count<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>    corr_count <span class="token operator">=</span> <span class="token number">0</span>    false_count <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> test_mails_predict<span class="token punctuation">.</span>values<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>            corr_count <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>            false_count <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æµ‹è¯•é›†æ ·æœ¬æ€»æ•°"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>corr_count <span class="token operator">+</span> false_count<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ­£ç¡®é¢„è®¡ä¸ªæ•°"</span><span class="token punctuation">,</span> corr_count<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"é”™è¯¯é¢„æµ‹ä¸ªæ•°"</span><span class="token punctuation">,</span> false_count<span class="token punctuation">)</span>    result <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">(</span>corr_count <span class="token operator">/</span> <span class="token punctuation">(</span>corr_count <span class="token operator">+</span> false_count<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'é¢„æµ‹å‡†ç¡®ç‡ï¼š'</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ä¸ªé¡¹ç›®ä¸»è¦æ˜¯ç”¨ä½œNLPåˆ†ç±»å­¦ä¹ çš„å…¥é—¨ï¼Œç®€å•è·‘ä¸€ä¸‹ç†Ÿæ‚‰ä¸€ä¸‹ï¼Œä¸€èµ·å¥½å¥½å­¦ä¹ å§<del>å°ä»™å¥³</del><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦NLP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021å¹´ä¸‹åŠå¹´ç›®æ ‡</title>
      <link href="/2021/10/12/2021%E5%B9%B4%E4%B8%8B%E5%8D%8A%E5%B9%B4%E7%9B%AE%E6%A0%87/"/>
      <url>/2021/10/12/2021%E5%B9%B4%E4%B8%8B%E5%8D%8A%E5%B9%B4%E7%9B%AE%E6%A0%87/</url>
      
        <content type="html"><![CDATA[<h1 id="2021å¹´ä¸‹åŠå¹´ç›®æ ‡"><a href="#2021å¹´ä¸‹åŠå¹´ç›®æ ‡" class="headerlink" title="2021å¹´ä¸‹åŠå¹´ç›®æ ‡"></a>2021å¹´ä¸‹åŠå¹´ç›®æ ‡</h1><p>æ–°å­¦æœŸæ–°æ‰“ç®—ï¼Œå°ä»™å¥³å’Œæ²¹æ²¹è¦åˆ¶å®šå¥½ç›®æ ‡ï¼Œä¸€èµ·åŠªåŠ›å‘€ï¼š</p><h2 id="å°ä»™å¥³çš„ç›®æ ‡ï¼š"><a href="#å°ä»™å¥³çš„ç›®æ ‡ï¼š" class="headerlink" title="å°ä»™å¥³çš„ç›®æ ‡ï¼š"></a>å°ä»™å¥³çš„ç›®æ ‡ï¼š</h2><ul><li>NBYè®ºæ–‡æŠ•å‡ºå»ï¼ˆä¸æ™šäº11æœˆåº•ï¼‰</li><li>äº§ç”Ÿ2~3ä¸ªæ–°çš„idea<ul><li>ä¸€ä¸ªNLP</li><li>ä¸€ä¸ªsurvey</li><li>ä¸€ä¸ªcase</li></ul></li><li>æ¨è¿›å…¶ä¸­ä¸€åˆ°ä¸¤ä¸ªideaï¼Œå¹´åº•åšå¥½æ•°æ®å¤„ç†</li><li>ç”³è¯·å‡ºå›½ï¼Œè·å¾—è´¾çš„åŒæ„ï¼Œæ‹¿åˆ°offer</li><li>é›…æ€è€ƒè¯•ï¼ˆé¢„è®¡22å¹´1æœˆè€ƒï¼‰</li><li>æ±Ÿè‹çœé¡¹ç›®ç»“é¢˜ï¼›å­¦é™¢çš„é¡¹ç›®å¯å°è¯•</li></ul><h2 id="æ²¹æ²¹çš„ç›®æ ‡ï¼š"><a href="#æ²¹æ²¹çš„ç›®æ ‡ï¼š" class="headerlink" title="æ²¹æ²¹çš„ç›®æ ‡ï¼š"></a>æ²¹æ²¹çš„ç›®æ ‡ï¼š</h2><ul><li>MSLè®ºæ–‡æŠ•å‡ºå»ï¼ˆä¸æ™šäº11æœˆåº•ï¼‰</li><li>æ•°æ®é›†å’Œfree-view baselineçš„è®ºæ–‡æŠ•å‡ºå»ï¼ˆè¿‡å¹´å›å®¶ä¹‹å‰ï¼‰</li><li>é›…æ€è€ƒè¯•ï¼ˆè¿‡å¹´å›å®¶ä¹‹å‰ï¼‰</li></ul><p>åˆ¶å®šå¥½äº†ç›®æ ‡ï¼Œå°±ä¸€èµ·åŠ æ²¹åŠªåŠ›å§ï¼äº’ç›¸ç›‘ç£ï¼Œå…±åŒåŠªåŠ›ï¼</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç›®æ ‡ä¸è®¡åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NLPå¸¸è§PythonåŒ…ç®€ä»‹</title>
      <link href="/2021/10/11/NLP%E5%B8%B8%E8%A7%81Python%E5%8C%85%E7%AE%80%E4%BB%8B/"/>
      <url>/2021/10/11/NLP%E5%B8%B8%E8%A7%81Python%E5%8C%85%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="NLPå¸¸è§PythonåŒ…ç®€ä»‹"><a href="#NLPå¸¸è§PythonåŒ…ç®€ä»‹" class="headerlink" title="NLPå¸¸è§PythonåŒ…ç®€ä»‹"></a>NLPå¸¸è§PythonåŒ…ç®€ä»‹</h1><p>Pythonä¾ç„¶æ˜¯åšNLPç ”ç©¶çš„ä¸»åŠ›ï¼Œæœ¬æ–‡æˆ‘ä»¬ä¸»è¦ä»‹ç»NLPå¸¸ç”¨çš„PythonåŒ…ã€‚</p><h2 id="pypinyin"><a href="#pypinyin" class="headerlink" title="pypinyin"></a>pypinyin</h2><p><a href="https://github.com/mozillazg/python-pinyin">pypinyin</a>æ˜¯å°†æ±‰å­—è½¬ä¸ºæ‹¼éŸ³çš„å¸¸ç”¨åŒ…ï¼Œå¯ä»¥ç”¨äºæ±‰å­—æ³¨éŸ³ã€æ’åºã€æ£€ç´¢ç­‰ï¼Œæœ‰æ—¶å€™éœ€è¦æŠŠæ±‰å­—å…ˆå˜ä¸ºæ‹¼éŸ³å†åšå¤„ç†ã€‚ä¸»è¦ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>æ ¹æ®è¯ç»„æ™ºèƒ½åŒ¹é…æœ€æ­£ç¡®çš„æ‹¼éŸ³ï¼›</li><li>æ”¯æŒå¤šéŸ³å­—ï¼›</li><li>ç®€å•çš„ç¹ä½“æ”¯æŒï¼Œæ³¨éŸ³æ”¯æŒï¼Œå¨å¦¥ç›æ‹¼éŸ³æ”¯æŒï¼›</li><li>æ”¯æŒå¤šç§ä¸åŒæ‹¼éŸ³/æ³¨éŸ³é£æ ¼ã€‚</li></ul><p>ä½¿ç”¨<code>pip</code>å®‰è£…äº†pypinyinä¹‹åï¼Œä»¥ä¸‹ä»£ç å¾ˆå¥½åœ°è¯´æ˜äº†pypinyinçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> pypinyin <span class="token keyword">import</span> pinyin<span class="token punctuation">,</span> lazy_pinyin<span class="token punctuation">,</span> Stylepinyin<span class="token punctuation">(</span><span class="token string">'ä¸­å¿ƒ'</span><span class="token punctuation">)</span>  <span class="token comment"># or pinyin(['ä¸­å¿ƒ'])ï¼Œå‚æ•°å€¼ä¸ºåˆ—è¡¨æ—¶è¡¨ç¤ºè¾“å…¥çš„æ˜¯å·²åˆ†è¯åçš„æ•°æ®</span>pinyin<span class="token punctuation">(</span><span class="token string">'ä¸­å¿ƒ'</span><span class="token punctuation">,</span> heteronym<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># å¯ç”¨å¤šéŸ³å­—æ¨¡å¼</span>pinyin<span class="token punctuation">(</span><span class="token string">'ä¸­å¿ƒ'</span><span class="token punctuation">,</span> style<span class="token operator">=</span>Style<span class="token punctuation">.</span>FIRST_LETTER<span class="token punctuation">)</span>  <span class="token comment"># è®¾ç½®æ‹¼éŸ³é£æ ¼</span>pinyin<span class="token punctuation">(</span><span class="token string">'ä¸­å¿ƒ'</span><span class="token punctuation">,</span> style<span class="token operator">=</span>Style<span class="token punctuation">.</span>TONE2<span class="token punctuation">,</span> heteronym<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>pinyin<span class="token punctuation">(</span><span class="token string">'ä¸­å¿ƒ'</span><span class="token punctuation">,</span> style<span class="token operator">=</span>Style<span class="token punctuation">.</span>TONE3<span class="token punctuation">,</span> heteronym<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>pinyin<span class="token punctuation">(</span><span class="token string">'ä¸­å¿ƒ'</span><span class="token punctuation">,</span> style<span class="token operator">=</span>Style<span class="token punctuation">.</span>BOPOMOFO<span class="token punctuation">)</span>  <span class="token comment"># æ³¨éŸ³é£æ ¼</span>lazy_pinyin<span class="token punctuation">(</span><span class="token string">'å¨å¦¥ç›æ‹¼éŸ³'</span><span class="token punctuation">,</span> style<span class="token operator">=</span>Style<span class="token punctuation">.</span>WADEGILES<span class="token punctuation">)</span>lazy_pinyin<span class="token punctuation">(</span><span class="token string">'ä¸­å¿ƒ'</span><span class="token punctuation">)</span>  <span class="token comment"># ä¸è€ƒè™‘å¤šéŸ³å­—çš„æƒ…å†µ</span>lazy_pinyin<span class="token punctuation">(</span><span class="token string">'æˆ˜ç•¥'</span><span class="token punctuation">,</span> v_to_u<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># ä¸ä½¿ç”¨ v è¡¨ç¤º Ã¼</span><span class="token comment"># ä½¿ç”¨ 5 æ ‡è¯†è½»å£°</span>lazy_pinyin<span class="token punctuation">(</span><span class="token string">'è¡£è£³'</span><span class="token punctuation">,</span> style<span class="token operator">=</span>Style<span class="token punctuation">.</span>TONE3<span class="token punctuation">,</span> neutral_tone_with_five<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token comment"># å˜è°ƒ  nÇ hÇo -&gt; nÃ­ hÇo</span>lazy_pinyin<span class="token punctuation">(</span><span class="token string">'ä½ å¥½'</span><span class="token punctuation">,</span> style<span class="token operator">=</span>Style<span class="token punctuation">.</span>TONE2<span class="token punctuation">,</span> tone_sandhi<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å‡ºå£°æ¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">pinyin<span class="token punctuation">(</span><span class="token string">'ä¸‹é›¨å¤©'</span><span class="token punctuation">,</span> style<span class="token operator">=</span>Style<span class="token punctuation">.</span>INITIALS<span class="token punctuation">,</span> strict<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="NLTK"><a href="#NLTK" class="headerlink" title="NLTK"></a>NLTK</h2><p><a href="http://www.nltk.org/">NLTK</a>ï¼ˆ<a href="https://yiyibooks.cn/yiyi/nltk_python/index.html">ä¸­æ–‡æ–‡æ¡£</a>ï¼‰æ˜¯ä¸€ä¸ªå·¨å¤§çš„å·¥å…·åŒ…ï¼Œæ˜¯æœ€çŸ¥åçš„NLPå¤„ç†å·¥å…·ã€‚ä»å°†æ®µè½æ‹†åˆ†ä¸ºå¥å­ï¼Œæ‹†åˆ†è¯è¯­ï¼Œè¯†åˆ«è¿™äº›è¯è¯­çš„è¯æ€§ï¼Œé«˜äº®ä¸»é¢˜ï¼Œç”šè‡³å¸®åŠ©æˆ‘ä»¬è§£æ–‡æœ¬å†…å®¹ã€‚å¦å¤–<a href="https://www.cnblogs.com/chen8023miss/p/11458571.html">è¿™ç¯‡æ–‡ç« </a>ä»‹ç»çš„ä¹Ÿæ¯”è¾ƒå¥½ã€‚</p><p>NLTKå¯ä»¥ä½†ä¸é™äºåšä»¥ä¸‹äº‹æƒ…ï¼š</p><ul><li>è¯­æ–™åº“ï¼š<ul><li>è·å–å’Œå¤„ç†è¯­æ–™åº“ï¼ŒNLTKä¸­åŒ…å«å¤è…¾å ¡è¯­æ–™åº“ã€ç½‘ç»œèŠå¤©è¯­æ–™åº“ç­‰å‡ ä¸ªè¯­æ–™åº“ï¼›</li></ul></li><li>é¢„æ–™é¢„å¤„ç†ï¼š<ul><li>å»é™¤åœæ­¢è¯ï¼Œå³ç­›å»ä¸å±äºè‡ªç„¶è¯­è¨€çš„è¯æ±‡æˆ–è€…ç¬¦å·ï¼›</li><li>åˆ†è¯ï¼Œå³æŠŠå¥å­åˆ†è§£ä¸ºä»¥å•è¯ä¸ºå•ä½çš„ç»“æ„ï¼›</li><li>è¯æ€§æ ‡æ³¨ï¼Œæ˜¯åœ¨ç»™å®šå¥å­ä¸­åˆ¤å®šæ¯ä¸ªè¯çš„è¯­æ³•èŒƒç•´ï¼Œç¡®å®šå…¶è¯æ€§å¹¶åŠ ä»¥æ ‡æ³¨çš„è¿‡ç¨‹ï¼›</li><li>è¯å¹²æå–ï¼Œæ˜¯è‹±æ–‡è¯­æ–™é¢„å¤„ç†çš„ä¸€ä¸ªæ­¥éª¤ï¼ˆä¸­æ–‡å¹¶ä¸éœ€è¦ï¼‰ï¼Œå³æŠ½å–è¯çš„è¯å¹²æˆ–è¯æ ¹å½¢å¼ï¼›</li><li>è¯æ€§è¿˜åŸï¼ŒåŸºäºå­—å…¸çš„æ˜ å°„æ¥æŠ½å–è¯å¹²ï¼Œnltkä¸­è¦æ±‚æ‰‹åŠ¨æ³¨æ˜è¯æ€§ï¼Œå¦åˆ™å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼›</li><li>åˆ†å—å’Œæ·»åŠ ç¼éš™ï¼Œå³æŠŠè¯æ±‡åˆ†æˆæœ‰æ„ä¹‰çš„å—ï¼›</li><li>å‘½åå®ä½“è¯†åˆ«ï¼Œå³è¯†åˆ«å‡ºæ¥<code>White House</code>è¿™æ ·çš„å›ºå®šæ­é…å®ä½“ï¼Œè€Œä¸å°†å…¶åˆ†å¼€ï¼›</li></ul></li><li>åˆ†ç±»ä»»åŠ¡ï¼š<ul><li>æœ´ç´ è´å¶æ–¯åˆ†ç±»å™¨ï¼Œæœ€å¤§ç†µåˆ†ç±»å™¨ï¼Œå†³ç­–æ ‘ï¼Œç»„åˆç®—æ³•ï¼ˆå¤šä¸ªåˆ†ç±»å™¨æŠ•ç¥¨ï¼‰ï¼›</li></ul></li></ul><h2 id="jieba"><a href="#jieba" class="headerlink" title="jieba"></a>jieba</h2><p><a href="https://github.com/fxsjy/jieba">jieba</a>æ˜¯ä¸­æ–‡çš„åˆ†è¯å·¥å…·ï¼Œä¸»è¦åŠŸèƒ½ä¸ºï¼š</p><ul><li>åˆ†è¯ï¼›</li><li>è‡ªå®šä¹‰è¯å…¸ï¼›</li><li>å…³é”®è¯æå–ï¼›</li><li>è¯æ€§æ ‡æ³¨ï¼›</li><li>å¹¶è¡Œåˆ†è¯ï¼›</li><li>Tokenizeï¼šè¿”å›è¯è¯­åœ¨åŸæ–‡çš„èµ·æ­¢ä½ç½®ï¼›</li><li>ChineseAnalyzer for Whoosh æœç´¢å¼•æ“ï¼›</li><li>å‘½ä»¤è¡Œåˆ†è¯ã€‚</li></ul><h2 id="spaCy"><a href="#spaCy" class="headerlink" title="spaCy"></a>spaCy</h2><p><a href="https://spacy.io/usage/models">spaCy</a>æ˜¯ä¸€ä¸ªæå…¶ä¼˜åŒ–çš„NLPåº“ï¼Œå¯ä¸æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼ˆå¦‚TensorFlowæˆ–PyTorchï¼‰ä¸€èµ·è¿è¡Œã€‚è¯¥åº“æä¾›äº†å¤§å¤šæ•°æ ‡å‡†åŠŸèƒ½ï¼ˆæ ‡è®°åŒ–ï¼ŒPoSæ ‡è®°ï¼Œè§£æï¼Œå‘½åå®ä½“è¯†åˆ«â€¦â€¦ï¼‰ï¼Œå¹¶ä¸”æ„å»ºå¿«é€Ÿã€‚</p><p>spaCyä¹Ÿå¾ˆå¥½åœ°ä¸æ‰€æœ‰ä¸»è¦çš„æ·±åº¦å­¦ä¹ æ¡†æ¶æ¥å£ï¼Œå¹¶é¢„è£…äº†ä¸€äº›éå¸¸å¥½çš„å’Œæœ‰ç”¨çš„è¯­è¨€æ¨¡å‹ã€‚</p><h2 id="scikit-learn"><a href="#scikit-learn" class="headerlink" title="scikit-learn"></a>scikit-learn</h2><p><a href="https://scikit-learn.org/stable/">scikit-learn</a>æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„æœºå™¨å­¦ä¹ åº“ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†å¤„ç†NLPçš„ä¸€äº›å·¥å…·å’Œç®—æ³•ï¼Œå¦‚BOWå’Œä¸€ç³»åˆ—å…¶ä»–æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚</p><p>ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ä¼˜ç‚¹æ˜¯æ–‡æ¡£é½å…¨ã€‚</p><h2 id="Pologlot"><a href="#Pologlot" class="headerlink" title="Pologlot"></a>Pologlot</h2><p>å…·æœ‰ç±»ä¼¼çš„NLPåŠŸèƒ½ï¼Œæ­¤å¤–å®ƒæä¾›äº†ä¸€äº›éå¸¸æœ‰è¶£çš„åŠŸèƒ½ï¼Œä¾‹å¦‚è¯­è¨€æ£€æµ‹å’ŒéŸ³è¯‘ç­‰ï¼Œä¸»è¦ç”¨äºåšå¤šè¯­è¨€æ”¯æŒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦NLP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NLPåŸºæœ¬ç ”ç©¶æ–¹å‘ç®€ä»‹</title>
      <link href="/2021/10/10/NLP%E5%9F%BA%E6%9C%AC%E7%A0%94%E7%A9%B6%E6%96%B9%E5%90%91%E7%AE%80%E4%BB%8B/"/>
      <url>/2021/10/10/NLP%E5%9F%BA%E6%9C%AC%E7%A0%94%E7%A9%B6%E6%96%B9%E5%90%91%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="NLPåŸºæœ¬ç ”ç©¶æ–¹å‘ç®€ä»‹"><a href="#NLPåŸºæœ¬ç ”ç©¶æ–¹å‘ç®€ä»‹" class="headerlink" title="NLPåŸºæœ¬ç ”ç©¶æ–¹å‘ç®€ä»‹"></a>NLPåŸºæœ¬ç ”ç©¶æ–¹å‘ç®€ä»‹</h1><p>è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆè‹±è¯­ï¼šNatural Language Processingï¼Œç¼©å†™ä½œ NLPï¼‰æ˜¯äººå·¥æ™ºèƒ½å’Œè¯­è¨€å­¦é¢†åŸŸçš„åˆ†æ”¯å­¦ç§‘ã€‚æ­¤é¢†åŸŸæ¢è®¨å¦‚ä½•å¤„ç†åŠè¿ç”¨è‡ªç„¶è¯­è¨€ï¼›è‡ªç„¶è¯­è¨€å¤„ç†åŒ…æ‹¬å¤šæ–¹é¢å’Œæ­¥éª¤ï¼ŒåŸºæœ¬æœ‰è®¤çŸ¥ã€ç†è§£ã€ç”Ÿæˆç­‰éƒ¨åˆ†ã€‚</p><p>è‡ªç„¶è¯­è¨€è®¤çŸ¥å’Œç†è§£æ˜¯è®©ç”µè„‘æŠŠè¾“å…¥çš„è¯­è¨€å˜æˆæœ‰æ„æ€çš„ç¬¦å·å’Œå…³ç³»ï¼Œç„¶åæ ¹æ®ç›®çš„å†å¤„ç†ã€‚è‡ªç„¶è¯­è¨€ç”Ÿæˆç³»ç»Ÿåˆ™æ˜¯æŠŠè®¡ç®—æœºæ•°æ®è½¬åŒ–ä¸ºè‡ªç„¶è¯­è¨€ã€‚</p><p>åŸºäºæ­¤ï¼ŒNLPé¢†åŸŸå»¶ä¼¸å¤„ç†ç§ç±»ç¹å¤šçš„ä»»åŠ¡ï¼Œè¿™é‡Œæ€»ç»“äº†æ–‡æœ¬å‘é‡åŒ–ã€åºåˆ—æ ‡æ³¨ä»»åŠ¡ã€æ–‡æœ¬åˆ†ç±»ã€ä¿¡æ¯æå–ã€ä»¥åŠå¤æ‚åº”ç”¨åœºæ™¯äº”å¤§ç±»NLPä»»åŠ¡ï¼Œåšä¸€ä¸ªä»‹ç»ã€‚</p><h2 id="æ–‡æœ¬å‘é‡åŒ–"><a href="#æ–‡æœ¬å‘é‡åŒ–" class="headerlink" title="æ–‡æœ¬å‘é‡åŒ–"></a>æ–‡æœ¬å‘é‡åŒ–</h2><p>æ–‡æœ¬çš„å‘é‡åŒ–å¯è°“æ˜¯NLPè¿›å…¥æ·±åº¦å­¦ä¹ æ—¶ä»£çš„æ ‡å¿—ã€‚æ‰€è°“æ–‡æœ¬çš„å‘é‡åŒ–ï¼ˆembeddingï¼‰ï¼Œå°±æ˜¯å°†æ–‡æœ¬ç”¨ä¸€å®šç»´åº¦çš„å‘é‡æ¥è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæ–‡æœ¬çš„æ•°å€¼åŒ–ã€‚é€šè¿‡embeddingï¼Œæ–‡æœ¬çš„è¯­ä¹‰ã€å¥æ³•ç­‰ç‰¹å¾å¾—ä»¥è¡¨å¾ï¼Œä¾¿äºä¸‹æ¸¸æ¨¡å‹çš„å¤„ç†ã€‚</p><p>ä¾‹å¦‚ï¼Œâ€œäºº/å¦‚æœ/æ²¡æœ‰/æ¢¦æƒ³/ï¼Œ/è·Ÿ/å’¸é±¼/è¿˜æœ‰/ä»€ä¹ˆ/å·®åˆ«â€ï¼Œå‘æœºå™¨å­¦ä¹ æ¨¡å‹ç›´æ¥è¾“å…¥å­—ç¬¦ä¸²æ˜¾ç„¶æ˜¯ä¸æ˜æ™ºçš„ï¼Œä¸ä¾¿äºæ¨¡å‹è¿›è¡Œè®¡ç®—å’Œæ–‡æœ¬ä¹‹é—´çš„æ¯”è¾ƒã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹å¼æ¥è¡¨ç¤ºä¸€ä¸ªæ–‡æœ¬ï¼Œè¿™ç§æ–‡æœ¬è¡¨ç¤ºæ–¹å¼è¦èƒ½å¤Ÿä¾¿äºè¿›è¡Œæ–‡æœ¬ä¹‹é—´çš„æ¯”è¾ƒï¼Œè®¡ç®—ç­‰ã€‚æœ€å®¹æ˜“æƒ³åˆ°çš„ï¼Œå°±æ˜¯å¯¹æ–‡æœ¬è¿›è¡Œå‘é‡åŒ–çš„è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œæ ¹æ®è¯­æ–™åº“çš„åˆ†è¯ç»“æœï¼Œå»ºç«‹ä¸€ä¸ªè¯å…¸ï¼Œæ¯ä¸ªè¯ç”¨ä¸€ä¸ªå‘é‡æ¥è¡¨ç¤ºï¼Œè¿™æ ·å°±å¯ä»¥å°†æ–‡æœ¬å‘é‡åŒ–äº†ã€‚</p><p><img src="vector.webp" alt="æ–‡æœ¬å‘é‡åŒ–"></p><p>è¯çš„å‘é‡åŒ–ï¼Œæœ€æ—©å°è¯•æ˜¯è¯è¢‹æ¨¡å‹ï¼Œåæ¥è¯æ˜ï¼Œè¯è¢‹æ¨¡å‹æ— æ³•è¡¨å¾è¯åºç‰¹å¾ï¼Œå¹¶ä¸”ä¼šå¸¦æ¥ç»´åº¦ç¾éš¾ï¼›Yoshua Bengioåœ¨2003å¹´ã€ŠA Neural Probabilistic Language Modelã€‹ä¸€æ–‡ä¸­æå‡ºäº†ä¸€ç§ç¥ç»ç½‘ç»œçš„æ–¹æ³•ï¼Œç”¨äºè¯­è¨€æ¨¡å‹çš„è®¡ç®—ï¼Œè¯å‘é‡ä½œä¸ºå‰¯äº§å“åæ¥å´å¼•èµ·äº†ä¸šç•Œçš„å…³æ³¨ã€‚2008å¹´Collobertå’ŒWestonå±•ç¤ºäº†ç¬¬ä¸€ä¸ªèƒ½æœ‰æ•ˆåˆ©ç”¨é¢„è®­ç»ƒè¯åµŒå…¥çš„ç ”ç©¶å·¥ä½œï¼Œä»–ä»¬æå‡ºçš„ç¥ç»ç½‘ç»œæ¶æ„ï¼Œæ„æˆäº†å½“å‰å¾ˆå¤šæ–¹æ³•çš„åŸºç¡€ã€‚è¿™ä¸€é¡¹ç ”ç©¶å·¥ä½œè¿˜ç‡å…ˆå°†è¯åµŒå…¥ä½œä¸º NLP ä»»åŠ¡çš„é«˜æ•ˆå·¥å…·ã€‚ä¸è¿‡è¯åµŒå…¥çœŸæ­£èµ°å‘NLPä¸»æµè¿˜æ˜¯Mikolov ç­‰äººåœ¨ 2013 å¹´åšå‡ºçš„ç ”ç©¶ã€ŠDistributed Representations of Words and Phrases and their Compositionalityã€‹ã€‚Mikolov ç­‰ç ”ç©¶è€…åœ¨è¿™ç¯‡è®ºæ–‡ä¸­æå‡ºäº†è¿ç»­è¯è¢‹æ¨¡å‹CBOWå’Œ Skip-Gram æ¨¡å‹ï¼Œé€šè¿‡å¼•å…¥è´Ÿé‡‡æ ·ç­‰å¯è¡Œæ€§çš„æªæ–½ï¼Œè¿™ä¸¤ç§æ–¹æ³•éƒ½èƒ½å­¦ä¹ é«˜è´¨é‡çš„è¯å‘é‡ã€‚åŸºäºæ­¤ï¼ŒELMOæå‡ºäº†ä¸€ç§ç›¸åŒè¯èƒ½å¤Ÿæ ¹æ®è¯­å¢ƒç”Ÿæˆä¸åŒè¯å‘é‡çš„æ¨¡å‹ã€‚é«˜è´¨é‡çš„è¯å‘é‡çš„è·å¾—ï¼Œç»“åˆLSTMã€CNNç­‰ç¥ç»ç½‘ç»œæŠ½å–å™¨ï¼Œä½¿å¾—NERï¼Œæ–‡æœ¬åˆ†ç±»ä»¥åŠä¿¡æ¯æŠ½å–ç­‰ä»»åŠ¡è·å¾—äº†é•¿è¶³çš„è¿›æ­¥ã€‚</p><p>æ­¤å¤–ï¼ŒåŸºäºè¯å‘é‡çš„æ€æƒ³ï¼Œä»2018å¹´å¼€å§‹ï¼ŒNLPä¸­é¢„è®­ç»ƒæ¨¡å‹å¼€å§‹æµè¡Œï¼ŒBERTã€GPTã€ALBERTä»¥åŠXLNETç­‰æ¨¡å‹ä¸æ–­åˆ·æ¦œã€‚</p><h2 id="åºåˆ—æ ‡æ³¨ä»»åŠ¡"><a href="#åºåˆ—æ ‡æ³¨ä»»åŠ¡" class="headerlink" title="åºåˆ—æ ‡æ³¨ä»»åŠ¡"></a>åºåˆ—æ ‡æ³¨ä»»åŠ¡</h2><p>åºåˆ—æ ‡æ³¨ä»»åŠ¡æ˜¯NLPé‡Œéå¸¸åŸºç¡€å’Œé‡è¦çš„ä»»åŠ¡ï¼Œä¾‹å¦‚åˆ†è¯ã€NERç­‰éƒ½å±äºåºåˆ—æ ‡æ³¨ä»»åŠ¡ï¼ŒåŒ…æ‹¬ä¸€äº›é¢„æµ‹spançš„é˜…è¯»ç†è§£ä»»åŠ¡ä¹Ÿå¯å½’äºæ­¤åˆ—ã€‚</p><p>åˆ†è¯é€šå¸¸æ˜¯ä¸­æ–‡è‡ªç„¶è¯­è¨€å¤„ç†çš„ç¬¬ä¸€æ­¥ï¼ˆéšç€æ·±åº¦å­¦ä¹ æ¨¡å‹è¡¨å¾èƒ½åŠ›è¶Šæ¥è¶Šå¼ºï¼Œæ…¢æ…¢è¯æ˜ï¼Œåˆ†è¯æœªå¿…æ˜¯å¿…è¦çš„ï¼‰ï¼›NERæ˜¯éå¸¸é‡è¦å’ŒåŸºç¡€çš„ä¿¡æ¯æŠ½å–ä»»åŠ¡ï¼Œåœ¨éå¸¸å¤šçš„åœºæ™¯ä¸­éƒ½éœ€è¦ç”¨åˆ°ï¼Œä¾‹å¦‚èŠå¤©æœºå™¨äººä¸­çš„æ§½ä½æŠ½å–ã€æ–‡æœ¬ç»“æ„åŒ–è¿‡ç¨‹ä¸­çš„å®ä½“æŠ½å–ç­‰ç­‰ã€‚</p><p><img src="sequence.webp" alt="åºåˆ—æ ‡æ³¨"></p><p>æ—©æœŸçš„åºåˆ—æ ‡æ³¨ä»»åŠ¡ï¼Œä¾‹å¦‚åˆ†è¯ï¼ŒNERç­‰ä¸»è¦æ˜¯ç”¨HMMã€CRFç­‰æœºå™¨å­¦ä¹ æ¨¡å‹ï¼›éšç€æ·±åº¦å­¦ä¹ çš„å…´èµ·ï¼ŒLSTM+CRFå˜æˆåºåˆ—æ ‡æ³¨ä»»åŠ¡çš„ä¸»æµæ–¹æ³•ï¼›å½“ç„¶ï¼Œå› ä¸ºLSTMçš„è‹¥å¹²ç¼ºç‚¹ï¼Œä¸å°‘NLPçš„ä»ä¸šè€…åšæŒä½¿ç”¨CNNï¼Œå› è€ŒåŸºäºè†¨èƒ€å·ç§¯çš„åºåˆ—æ ‡æ³¨æ¨¡å‹å¾—ä»¥æå‡ºã€‚éšç€transformerçš„æå‡ºï¼Œåˆ©ç”¨BERTç­‰é¢„è®­ç»ƒæ¨¡å‹åšNERè¿™ç±»ä»»åŠ¡å¼€å§‹å˜å¾—æµè¡Œï¼Œç‰¹åˆ«æ˜¯æŠ½å–ä¸€äº›ç›¸å¯¹è¾ƒé•¿å’Œå¤æ‚çš„å®ä½“ï¼Œä¾‹å¦‚åœ°å€ç­‰ã€‚éœ€è¦ç‰¹åˆ«æå‡ºçš„æ˜¯ï¼Œæœ‰äº›æƒ…å†µä¸‹ï¼Œæ­£åˆ™åŒ¹é…ä¹Ÿæ˜¯å®ä½“æŠ½å–çš„ä¸€ç§æœ‰æ•ˆæ‰‹æ®µï¼Œå¯ä½œä¸ºè¡¥å……ï¼Œä¾‹å¦‚æ—¶é—´å®ä½“ç­‰ã€‚</p><h2 id="æ–‡æœ¬åˆ†ç±»"><a href="#æ–‡æœ¬åˆ†ç±»" class="headerlink" title="æ–‡æœ¬åˆ†ç±»"></a>æ–‡æœ¬åˆ†ç±»</h2><p>æ–‡æœ¬åˆ†ç±»æ˜¯ä¸€ä¸ªä¸éš¾ç†è§£çš„æ¦‚å¿µï¼Œå³é€šè¿‡è®¡ç®—æœºå¯¹è¾“å…¥æ–‡æœ¬è¿›è¡Œåˆ†ç±»ï¼Œä¾‹å¦‚åˆ¤æ–­â€œä½ çœŸæ˜¯ä¸ªå¸…å“¥å•Šâ€è¿™å¥è¯æ˜¯è¤’ä¹‰è¿˜æ˜¯è´¬ä¹‰ã€‚æ–‡æœ¬åˆ†ç±»çš„åº”ç”¨åœºæ™¯å¾ˆå¤šï¼Œä¾‹å¦‚æƒ…æ„Ÿåˆ†ç±»ã€æœºå™¨äººä¸­çš„æ„å›¾è¯†åˆ«ç­‰ã€‚</p><p><img src="classify.webp" alt="æ–‡æœ¬åˆ†ç±»"></p><p>å¬ä¸Šå»ï¼Œåˆ†ç±»é—®é¢˜ä¼¼ä¹æ˜¯ä¸ªä¸éš¾è§£å†³çš„é—®é¢˜ï¼Œå®é™…ä¸Šæ–‡æœ¬åˆ†ç±»æœ‰å®ƒçš„éš¾åº¦ã€‚å½“ç±»åˆ«éå¸¸å¤šæˆ–è€…ç±»åˆ«ä¸ç±»åˆ«ä¹‹é—´å·®å¼‚å¾ˆå°æ—¶ï¼Œæ–‡æœ¬åˆ†ç±»å°±å¼€å§‹å˜å¾—å›°éš¾ï¼›å†è€…ï¼Œæœ‰æ—¶éœ€è¦è€ƒè™‘é¢å¤–ç‰¹å¾æ‰èƒ½åˆ†ç±»æ­£ç¡®ï¼Œä¾‹å¦‚å¸¸å¸¸éœ€è¦æ ¹æ®è¯´è¯è€…è¯­æ°”ï¼Œæ‰èƒ½åˆ¤æ–­â€œä½ çœŸæ˜¯ä¸ªå¸…å“¥å•Šâ€è¿™å¥è¯æ˜¯è®½åˆºè¿˜æ˜¯çœŸå¿ƒçš„èµç¾ã€‚</p><p>æ—©æœŸæœ‰ä¸€äº›åŸºäºä¼ ç»Ÿæœºå™¨å­¦ä¹ çš„æ–‡æœ¬åˆ†ç±»ï¼Œä¾‹å¦‚åŸºäºæŸç§è¯è¯­ç‰¹å¾çš„çš„è´å¶æ–¯æ¨¡å‹ï¼ŒSVMåˆ†ç±»å™¨ç­‰ã€‚</p><p>éšç€æ·±åº¦å­¦ä¹ çš„å‘å±•ï¼ŒLSTM+softmax/CNN+softmaxæ¨¡å‹å˜æˆäº†ä¸€ç§éå¸¸æµè¡Œçš„æ–‡æœ¬åˆ†ç±»æ¶æ„ï¼ŒåŸºäºæ­¤Fasttextã€textCNNç­‰ä¾¿æ·é«˜æ•ˆçš„å¼€æºæ–‡æœ¬åˆ†ç±»å·¥å…·ä¹Ÿå¼€å§‹æµè¡Œã€‚æ­¤å¤–ï¼Œç»“åˆAttentionç­‰æŠ€å·§ä¸æ¦‚å¿µèƒ½å¤Ÿä¸€å®šç¨‹åº¦çš„æé«˜æ¨¡å‹çš„æ•ˆæœã€‚</p><p>æ–‡æœ¬åˆ†ç±»è¿˜æœ‰å¦å¤–ä¸€ç§æ¨¡å¼ï¼Œå³é€šè¿‡å°†æ–‡æœ¬å‘é‡åŒ–ï¼Œå†é€šè¿‡èšç±»è·å¾—ç±»åˆ«ï¼ŒNLTKç­‰å¼€æºNLPå·¥å…·éƒ½æœ‰ä¾¿æ·çš„Doc2vec APIã€‚å¦‚æœè§‰å¾—æ•ˆæœä¸å¥½ï¼Œå¯ä»¥è¯•è¯•BERTçš„ã€CLSã€‘å‘é‡ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥å¢åŠ TF-IDFæ¨¡å—ï¼Œæ„å»ºæ›´æœ‰è¡¨è¾¾èƒ½åŠ›çš„DocVecã€‚</p><h2 id="ä¿¡æ¯æå–ä»»åŠ¡"><a href="#ä¿¡æ¯æå–ä»»åŠ¡" class="headerlink" title="ä¿¡æ¯æå–ä»»åŠ¡"></a><strong>ä¿¡æ¯æå–ä»»åŠ¡</strong></h2><p>ä¿¡æ¯æå–(IE)çš„ç›®æ ‡æ˜¯å°†æ–‡æœ¬ä¿¡æ¯è½¬åŒ–ä¸ºç»“æ„åŒ–ä¿¡æ¯ï¼Œèµ·åˆç”¨äºå®šä½è‡ªç„¶è¯­è¨€æ–‡æ¡£ä¸­çš„ç‰¹å®šä¿¡æ¯ã€‚å¹¿æ³›çš„çœ‹ï¼Œä¿¡æ¯æå–å…¶å®æ˜¯ä¸€ä¸ªéå¸¸å®½æ³›çš„æ¦‚å¿µï¼Œä»æ–‡æœ¬æå‡ºæ„Ÿå…´è¶£çš„å†…å®¹å°±å¯ä»¥ç§°ä¸ºä¿¡æ¯æå–ã€‚åœ¨NLPä¸­å¸¸å¸¸ç”¨å®ä½“æŠ½å–ã€å…³ç³»æŠ½å–ä»¥åŠäº‹ä»¶æŠ½å–ç­‰æ‰‹æ®µè¿›è¡Œä¿¡æ¯æŠ½å–ã€‚</p><p><img src="info.webp" alt="ä¿¡æ¯æå–"></p><p>å®ä½“æŠ½å–æ˜¯åºåˆ—æ ‡è®°é—®é¢˜ï¼Œä¸Šé¢å·²ç»ä»‹ç»è¿‡ï¼Œå…³ç³»æŠ½å–ä»¥åŠäº‹ä»¶æŠ½å–åˆ™é€šå¸¸è½¬åŒ–ä¸ºåˆ†ç±»çš„ä»»åŠ¡ã€‚å…³ç³»æŠ½å–å¸¸å¸¸éœ€è¦å…ˆç¡®è®¤subjectä»¥åŠobjectã€‚æ‰€ä»¥ï¼Œå…³ç³»æŠ½å–ä»»åŠ¡å¸¸å¸¸ä¼´éšç€å®ä½“æŠ½å–çš„è¦æ±‚ã€‚</p><p>æ—©æœŸï¼Œä¿¡æ¯æå–å¤šä½¿ç”¨æ­£åˆ™å’Œä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ æ–¹æ³•ã€‚éšç€æ·±åº¦å­¦ä¹ çš„å¿«é€Ÿå‘å±•ï¼Œä¿¡æ¯æå–æŠ€æœ¯ä¹Ÿå¼€å§‹è¿…é€Ÿå‘å±•ã€‚å®ä½“æŠ½å–ä¸å…³ç³»æŠ½å–ä»Piplineçš„æ–¹å¼è¿›åŒ–åˆ°end-to-endçš„æ–¹å¼ã€‚ä½¿ç”¨çš„ç‰¹å¾æŠ½å–å™¨ä¹Ÿé€æ­¥è¿›åŒ–ï¼Œä»LSTM/CNNåˆ°transformerã€‚éœ€è¦ç‰¹åˆ«æå‡ºçš„æ˜¯ï¼ŒBERTåœ¨ä¿¡æ¯æŠ½å–æ–¹é¢è¡¨ç°å‡ºè‰²ï¼ŒåŸºäºBERTå’Œé˜…è¯»ç†è§£ä»»åŠ¡æ¥åšä¿¡æ¯æŠ½å–ï¼Œæ˜¯ä¸€ç§éå¸¸åˆ«è‡´çš„æ–¹å¼ã€‚</p><h2 id="åœºæ™¯ä»»åŠ¡"><a href="#åœºæ™¯ä»»åŠ¡" class="headerlink" title="åœºæ™¯ä»»åŠ¡"></a>åœºæ™¯ä»»åŠ¡</h2><p>æ­¤å¤–ï¼ŒNLPè¿˜æœ‰ä¸€äº›å¤æ‚çš„åº”ç”¨åœºæ™¯ï¼Œä»–ä»¬å¯èƒ½æ˜¯å¤šç§NLPæŠ€æœ¯çš„åº”ç”¨å’Œç»¼åˆï¼Œä¾‹å¦‚èŠå¤©æœºå™¨äººã€çŸ¥è¯†å›¾è°±ã€æ–‡æœ¬æœç´¢ä»¥åŠæ–‡æœ¬æ¨èç³»ç»Ÿç­‰ã€‚</p><p>æœç´¢æ˜¯NLPæŠ€æœ¯æœ€æ—©å¾—åˆ°å¤§è§„æ¨¡åº”ç”¨çš„æŠ€æœ¯ï¼Œä¾‹å¦‚ç™¾åº¦æœç´¢ã€çŸ¥ä¹è¯é¢˜æœç´¢ä»¥åŠå„å¤§äº’è”ç½‘å…¬å¸çš„queryæœç´¢æŠ€æœ¯ï¼Œéƒ½æ¶‰åŠåˆ°è¯­ä¹‰åŒ¹é…æˆ–æ–‡æœ¬åˆ†ç±»æŠ€æœ¯ã€‚æ­¤å¤–ï¼Œå¤§å‹çš„æœç´¢å¼•æ“ï¼ŒçŸ¥è¯†å›¾è°±çš„æ­å»ºæ˜¯å¿…é¡»çš„ã€‚</p><p>æ¨èç³»ç»Ÿåœ¨ä¸€å®šå±‚é¢æ¥è¯´æ˜¯è·Ÿæœç´¢åœºæ™¯ç›¸åçš„ã€‚æœç´¢æ˜¯åŸºäºç”¨æˆ·çš„æ„å›¾ï¼Œåœ¨æ–‡æœ¬åº“ä¸­å¯»æ‰¾åŒ¹é…é¡¹ï¼›æ¨èåˆ™ç›¸åï¼Œé€šå¸¸åŸºäºç§¯ç´¯çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç»™ç”¨æˆ·æ¨èå¯èƒ½æ„Ÿå…´è¶£çš„å†…å®¹ã€‚æ¨èç³»ç»Ÿå¸¸å¸¸æ¶‰åŠç”¨æˆ·ç”»åƒã€æ ‡ç­¾å®šä¹‰ç­‰è¿‡ç¨‹ï¼Œéœ€è¦ä¸€å®šç¨‹åº¦çš„ä¾èµ–NLPæŠ€æœ¯ã€‚</p><p>èŠå¤©æœºå™¨äººæ˜¯ç›®å‰NLPæŠ€æœ¯åº”ç”¨æœ€å¤šçš„åœºæ™¯ï¼ŒåŸºäºNLPæŠ€æœ¯æ„å»ºä¸€ä¸ªèƒ½å¤Ÿæ›¿ä»£å®¢æœã€é”€å”®ã€åŠå…¬æ–‡å‘˜æ˜¯è¿™ä¸€ä»»åŠ¡çš„ç»ˆæç›®æ ‡ã€‚ç›®å‰ï¼ŒèŠå¤©æœºå™¨äººå·²ç»ä»¥å„ç§å½¢æ€å‡ºç°åœ¨äººä»¬é¢å‰ï¼Œæœ‰ç«™åœ¨é“¶è¡Œé—¨å£è¿æ¥é¡¾å®¢çš„è¿å®¾æœºå™¨äººï¼Œæœ‰æ”¾åœ¨å§å®¤åºŠå¤´çš„æ™ºèƒ½éŸ³ç®±ï¼Œæœ‰å‘†åœ¨å„ä¸ªAPPé¦–é¡µçš„åŠ©æ‰‹æœºå™¨äººç­‰ç­‰ã€‚åœ¨èŠå¤©æœºå™¨äººä¸­ï¼Œè¿ç”¨äº†æ–‡æœ¬åˆ†ç±»ã€è¯­ä¹‰åŒ¹é…ã€å¯¹è¯ç®¡ç†ã€å®ä½“è¯†åˆ«ç­‰å¤§é‡çš„NLPæŠ€æœ¯ã€‚è¦åšå¥½æ˜¯ä¸€ä»¶éš¾åº¦å¤§ã€è¶…å¤æ‚çš„ä»»åŠ¡ã€‚</p><p>çŸ¥è¯†å›¾è°±æ˜¯AIæ—¶ä»£ä¸€ä¸ªéå¸¸é‡è¦åŸºç¡€è®¾æ–½ï¼Œå¤§è§„æ¨¡ç»“æ„åŒ–çš„çŸ¥è¯†ç½‘ç»œçš„æ­å»ºï¼Œèƒ½å¤Ÿé‡å¡‘å¾ˆå¤šçš„æ™ºèƒ½åœºæ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦NLP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sublimeç ´è§£åŠæ±‰åŒ–</title>
      <link href="/2021/09/30/Sublime%E7%A0%B4%E8%A7%A3%E5%8F%8A%E6%B1%89%E5%8C%96/"/>
      <url>/2021/09/30/Sublime%E7%A0%B4%E8%A7%A3%E5%8F%8A%E6%B1%89%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h1 id="Sublimeç ´è§£åŠæ±‰åŒ–"><a href="#Sublimeç ´è§£åŠæ±‰åŒ–" class="headerlink" title="Sublimeç ´è§£åŠæ±‰åŒ–"></a>Sublimeç ´è§£åŠæ±‰åŒ–</h1><p>ç»ˆäºæ‰¾åˆ°äº†å¯ç”¨çš„Sublimeç ´è§£æ–¹å¼ï¼Œä¸»è¦å‚è€ƒ<a href="https://www.cvps.top/10296.html">è¿™ç¯‡æ–‡ç« </a>ï¼Œè¿™é‡Œæˆ‘ä»¬åšä¸€ä¸‹ç ´è§£ï¼Œé¿å…çƒ¦äººçš„è´­ä¹°æç¤ºã€‚å¦‚æœ‰å¿…è¦å†åšä¸€ä¸‹æ±‰åŒ–ã€‚</p><h2 id="ç ´è§£"><a href="#ç ´è§£" class="headerlink" title="ç ´è§£"></a>ç ´è§£</h2><ol><li>åœ¨è½¯ä»¶çš„å®‰è£…ç›®å½•æ‰¾åˆ° <code>sublime_text.exe</code> æ–‡ä»¶ï¼Œè¿›è¡Œå¤‡ä»½ï¼›</li><li>ä½¿ç”¨<a href="https://hexed.it/">hexed</a> åœ¨çº¿åå…­è¿›åˆ¶ç¼–è¾‘å™¨ï¼Œæ‰“å¼€ <code>sublime_text.exe</code> æ–‡ä»¶ï¼›</li><li>è½¯ä»¶ç‰ˆæœ¬4113æ›¿æ¢ä»¥ä¸‹2ç»„å­—ç¬¦ï¼Œå¦‚æœä¸æ˜¯æœ€æ–°çš„4113ç‰ˆå°±å…ˆæ›´æ–°åˆ°æœ€æ–°ç‰ˆï¼š</li></ol><pre class="line-numbers language-none"><code class="language-none">C3 C6 01 00 C3 æ›¿æ¢ä¸º C3 C6 01 01 C351 31 C0 88 05 æ›¿æ¢ä¸º 51 b0 01 88 05<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="4"><li>å°†æ›¿æ¢ç»“æœä¿å­˜åˆ°æˆ‘ä»¬çš„å®‰è£…ç›®å½•ä¸‹ï¼Œæ›¿æ¢åŸæ¥çš„<code>sublime_text.exe</code>å³å¯ã€‚</li></ol><h2 id="æ±‰åŒ–"><a href="#æ±‰åŒ–" class="headerlink" title="æ±‰åŒ–"></a>æ±‰åŒ–</h2><ol><li>ç‚¹å‡» <strong>Tools</strong>â€”<strong>Install Package Control</strong>ï¼Œç­‰å¾…å®‰è£…æ’ä»¶æ§ä»¶ï¼›</li><li>èœå•ç‚¹å‡»P<strong>references â€“ Package Controlï¼Œé€‰æ‹© Install Package</strong>ï¼›</li><li>è¾“å…¥ ChineseLocalzations å¯è§ä¸­æ–‡åŒ…ï¼Œé€‰ä¸­å³å¯å®‰è£…ã€‚</li></ol><p>è¿™ç¯‡æ˜¯çœŸçš„ç®€å•<span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä»æ­¤å¯ä»¥é¿å…è´­ä¹°å’Œæ¿€æ´»æç¤ºå•¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦Sublime </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ä»™å¥³çš„å­¦ä¹ ç¬”è®°</title>
      <link href="/2021/09/26/%E5%B0%8F%E4%BB%99%E5%A5%B3%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2021/09/26/%E5%B0%8F%E4%BB%99%E5%A5%B3%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="å°ä»™å¥³çš„å­¦ä¹ ç¬”è®°"><a href="#å°ä»™å¥³çš„å­¦ä¹ ç¬”è®°" class="headerlink" title="å°ä»™å¥³çš„å­¦ä¹ ç¬”è®°"></a>å°ä»™å¥³çš„å­¦ä¹ ç¬”è®°</h1><p>è¿™ç¯‡æ–‡ç« ç”¨æ¥å¸®å°ä»™å¥³è®°å½•åœ¨å­¦ä¹ ä¸­é‡åˆ°çš„éœ€è¦ç¬”è®°çš„çŸ¥è¯†ç‚¹ã€‚</p><h2 id="å¿«æ·é”®ä¸å‘½ä»¤"><a href="#å¿«æ·é”®ä¸å‘½ä»¤" class="headerlink" title="å¿«æ·é”®ä¸å‘½ä»¤"></a>å¿«æ·é”®ä¸å‘½ä»¤</h2><h3 id="æ–‡ä»¶å¤„ç†å¿«æ·é”®"><a href="#æ–‡ä»¶å¤„ç†å¿«æ·é”®" class="headerlink" title="æ–‡ä»¶å¤„ç†å¿«æ·é”®"></a>æ–‡ä»¶å¤„ç†å¿«æ·é”®</h3><table><thead><tr><th align="center">ä½¿ç”¨</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center"><strong>Ctrl</strong>+<strong>N</strong></td><td align="center">æ–°å»ºæ–‡ä»¶</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>C</strong></td><td align="center">å¤åˆ¶</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>X</strong></td><td align="center">å‰ªåˆ‡</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>V</strong></td><td align="center">ç²˜è´´</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>F</strong></td><td align="center">æœç´¢</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>H</strong></td><td align="center">æ›¿æ¢</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>A</strong></td><td align="center">å…¨é€‰</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>S</strong></td><td align="center">ä¿å­˜</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>Z</strong></td><td align="center">æ’¤é”€ç¼–è¾‘</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>Y</strong></td><td align="center">è¿˜åŸç¼–è¾‘</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>B</strong></td><td align="center">å­—ä½“åŠ ç²—</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>I</strong></td><td align="center">å­—ä½“å€¾æ–œ</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>U</strong></td><td align="center">å­—ä½“ä¸‹åˆ’çº¿</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>P</strong></td><td align="center">æ‰“å°</td></tr></tbody></table><h3 id="Windowså¿«æ·é”®"><a href="#Windowså¿«æ·é”®" class="headerlink" title="Windowså¿«æ·é”®"></a>Windowså¿«æ·é”®</h3><table><thead><tr><th align="center">ä½¿ç”¨</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center"><strong>Alt</strong>+<strong>Tab</strong></td><td align="center">çª—å£åˆ‡æ¢</td></tr><tr><td align="center"><strong>Win</strong>+<strong>â†‘â†“â†â†’</strong></td><td align="center">ä½¿çª—å£å…¨å±ã€æœ€å°åŒ–ã€é å·¦ã€é å³</td></tr><tr><td align="center"><strong>Fn</strong>+<strong>F2</strong></td><td align="center">æ–‡ä»¶é‡å‘½å</td></tr><tr><td align="center"><strong>Del</strong></td><td align="center">æ–‡ä»¶åˆ é™¤</td></tr><tr><td align="center"><strong>Shift</strong>+<strong>Del</strong></td><td align="center">æ–‡ä»¶å½»åº•åˆ é™¤</td></tr><tr><td align="center"><strong>Alt</strong>+<strong>â†‘â†“â†â†’</strong></td><td align="center">è¿›å…¥ä¸Šä¸€çº§ã€ä¸‹ä¸€çº§ã€å‰ä¸€çº§ã€åä¸€çº§ç›®å½•</td></tr></tbody></table><h3 id="Windows-Shellå‘½ä»¤ä¸å¿«æ·é”®"><a href="#Windows-Shellå‘½ä»¤ä¸å¿«æ·é”®" class="headerlink" title="Windows Shellå‘½ä»¤ä¸å¿«æ·é”®"></a>Windows Shellå‘½ä»¤ä¸å¿«æ·é”®</h3><table><thead><tr><th align="center">å‘½ä»¤</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center"><strong>python</strong></td><td align="center">è¿›å…¥pythonè§£é‡Šå™¨ï¼Œæˆ–è€…æ‰§è¡Œpythonä»£ç </td></tr><tr><td align="center"><strong>dir</strong></td><td align="center">å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶</td></tr><tr><td align="center"><strong>cd</strong></td><td align="center">åˆ‡æ¢ç›®å½•</td></tr><tr><td align="center"><strong>del</strong></td><td align="center">åˆ é™¤æ–‡ä»¶</td></tr><tr><td align="center"><strong>Tab</strong></td><td align="center">åˆ‡æ¢æ–‡ä»¶</td></tr><tr><td align="center"><strong>Ctrl</strong>+<strong>C</strong></td><td align="center">ä¸­æ–­æ‰§è¡Œ</td></tr></tbody></table><h3 id="Jupyter-Notebook-å¿«æ·é”®"><a href="#Jupyter-Notebook-å¿«æ·é”®" class="headerlink" title="Jupyter Notebook å¿«æ·é”®"></a>Jupyter Notebook å¿«æ·é”®</h3><table><thead><tr><th align="center">ä½¿ç”¨</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center">jupyter notebook .</td><td align="center">åœ¨å½“å‰ç›®å½•ä¸‹æ‰“å¼€jupyter notebook</td></tr><tr><td align="center"><strong>Shift</strong>+<strong>Enter</strong></td><td align="center">æ‰§è¡Œå½“å‰cellå¹¶æ–°å»ºä¸€ä¸ªcell</td></tr></tbody></table><h3 id="Pythonè¯­å¥"><a href="#Pythonè¯­å¥" class="headerlink" title="Pythonè¯­å¥"></a>Pythonè¯­å¥</h3><table><thead><tr><th align="center">è¯­æ³•</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center"><strong>type(a)</strong></td><td align="center">æŸ¥çœ‹açš„æ•°æ®ç±»å‹</td></tr></tbody></table><h3 id="condaå‘½ä»¤"><a href="#condaå‘½ä»¤" class="headerlink" title="condaå‘½ä»¤"></a>condaå‘½ä»¤</h3><table><thead><tr><th align="center">è¯­æ³•</th><th align="center">ä½œç”¨</th></tr></thead><tbody><tr><td align="center">conda env list</td><td align="center">æŸ¥çœ‹condaä¸­çš„æ‰€æœ‰ç¯å¢ƒ</td></tr><tr><td align="center">conda activate envx</td><td align="center">æ¿€æ´»åå­—æ˜¯envxçš„ç¯å¢ƒ</td></tr><tr><td align="center">conda deactivate</td><td align="center">é€€å›åˆ°é»˜è®¤ç¯å¢ƒ</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ°´è°ƒæ­Œå¤´Â·è¾›ä¸‘ä¸­ç§‹</title>
      <link href="/2021/09/21/%E6%B0%B4%E8%B0%83%E6%AD%8C%E5%A4%B4%C2%B7%E8%BE%9B%E4%BA%A5%E4%B8%AD%E7%A7%8B/"/>
      <url>/2021/09/21/%E6%B0%B4%E8%B0%83%E6%AD%8C%E5%A4%B4%C2%B7%E8%BE%9B%E4%BA%A5%E4%B8%AD%E7%A7%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="æ°´è°ƒæ­Œå¤´Â·è¾›ä¸‘ä¸­ç§‹"><a href="#æ°´è°ƒæ­Œå¤´Â·è¾›ä¸‘ä¸­ç§‹" class="headerlink" title="æ°´è°ƒæ­Œå¤´Â·è¾›ä¸‘ä¸­ç§‹"></a>æ°´è°ƒæ­Œå¤´Â·è¾›ä¸‘ä¸­ç§‹</h1><p>é¥é¥å¹¿å¯’å®«ï¼Œçšçšç™½ç‰ç›˜ã€‚ä¸çŸ¥å¤ä»Šæ˜æœˆï¼Œç…§å‡ å›å›¢åœ†ï¼Ÿå”±ç½¢ä¸œå¡å®æ„¿ï¼Œæ–¹å¿µæ›²æ±Ÿæ€€è¿œï¼Œå•è½¦è½½æˆ‘è¿˜ã€‚é£åŠ¨é±¼é¾™èˆï¼Œå½’è·¯ç»•æ±€æ¹¾ã€‚<br>é’Ÿå±±æœˆï¼Œç§¦æ·®æ°´ï¼Œä¸çœ æ„ã€‚æ¸…ç§‹åƒé‡Œï¼Œé•¿æ±Ÿæ— è¯­å‘ä¸œæµã€‚æƒ³è§ä¼Šäººåœ¨æ°´ï¼Œç›¸æ€è¯šå¦‚æ»¡æœˆï¼Œæ›´å‘ä½•ä¸­æ±‚ï¼ŸæœˆåçŸ¥æˆ‘æ„ï¼Œæ¸…è¾‰å¯¸å¯¸æ‚ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ²¹å…ˆç”Ÿé€‰é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»å·¨æ½®èµ„è®¯ç½‘çˆ¬å–2020å¹´ä¸Šå¸‚å…¬å¸è´¢æŠ¥</title>
      <link href="/2021/09/17/%E4%BB%8E%E5%B7%A8%E6%BD%AE%E8%B5%84%E8%AE%AF%E7%BD%91%E7%88%AC%E5%8F%962020%E5%B9%B4%E4%B8%8A%E5%B8%82%E5%85%AC%E5%8F%B8%E8%B4%A2%E6%8A%A5/"/>
      <url>/2021/09/17/%E4%BB%8E%E5%B7%A8%E6%BD%AE%E8%B5%84%E8%AE%AF%E7%BD%91%E7%88%AC%E5%8F%962020%E5%B9%B4%E4%B8%8A%E5%B8%82%E5%85%AC%E5%8F%B8%E8%B4%A2%E6%8A%A5/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»å·¨æ½®èµ„è®¯ç½‘çˆ¬å–2020å¹´ä¸Šå¸‚å…¬å¸è´¢æŠ¥"><a href="#ä»å·¨æ½®èµ„è®¯ç½‘çˆ¬å–2020å¹´ä¸Šå¸‚å…¬å¸è´¢æŠ¥" class="headerlink" title="ä»å·¨æ½®èµ„è®¯ç½‘çˆ¬å–2020å¹´ä¸Šå¸‚å…¬å¸è´¢æŠ¥"></a>ä»å·¨æ½®èµ„è®¯ç½‘çˆ¬å–2020å¹´ä¸Šå¸‚å…¬å¸è´¢æŠ¥</h1><p>å‰é¢è¯´æœ‰ä¸‰ä¸ªæ¯”è¾ƒå®˜æ–¹çš„è´¢æŠ¥è·å–æ¸ é“ï¼šä¸Šäº¤æ‰€ã€æ·±äº¤æ‰€ã€å·¨æ½®èµ„è®¯ç½‘ã€‚è¿™ä¸ªå·¨æ½®èµ„è®¯ç½‘æ¥å¤´ä¸å°ï¼Œæ˜¯è¯ç›‘ä¼šæŒ‡å®šçš„ä¸Šå¸‚å…¬å¸ä¿¡æ¯æŠ«éœ²ç½‘ç«™ï¼Œçˆ¬å®ƒä¸€ä¸ªå…å¾—å»çˆ¬ä¸Šäº¤æ‰€+æ·±äº¤æ‰€ï¼Œè€Œä¸”çœ‹èµ·æ¥æ¯”è¾ƒå¥½çˆ¬ã€‚</p><p>æˆ‘æ˜¯ä»ä¸Šæ¬¡çœ‹è¿‡çš„<a href="https://zhuanlan.zhihu.com/p/353785120">30è¡Œä»£ç çˆ¬å–Aè‚¡ä¸Šå¸‚å…¬å¸å¹´æŠ¥</a>è¿™ç¯‡æ–‡ç« é‡Œé¢ï¼Œçœ‹åˆ°<a href="https://blog.csdn.net/qq_36780279/article/details/103946869">è¿™ç¯‡ä»‹ç»çˆ¬å–å·¨æ½®èµ„è®¯çš„æ–‡ç« çš„</a>ã€‚</p><h2 id="åŸç "><a href="#åŸç " class="headerlink" title="åŸç "></a>åŸç </h2><p>è¿™ç¯‡æ–‡ç« æ¯”è¾ƒå¤æ‚ï¼Œçˆ¬å·¨æ½®æ¯”æˆ‘ä»¬å‰é¢çˆ¬çš„å†…å®¹éƒ½è¦å¤æ‚ï¼Œå› ä¸ºå®ƒå¯¹è´¢æŠ¥çš„ä¸‹è½½urlåšäº†ç‰¹æ®Šå¤„ç†ï¼Œæœ‰ä¸€å®šåçˆ¬åŠŸèƒ½ã€‚è¿™ç¯‡æ–‡ç« æä¾›çš„åŸç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> json<span class="token keyword">import</span> os<span class="token keyword">from</span> time <span class="token keyword">import</span> sleep<span class="token keyword">from</span> urllib <span class="token keyword">import</span> parse<span class="token keyword">import</span> requests  <span class="token keyword">def</span> <span class="token function">get_adress</span><span class="token punctuation">(</span>bank_name<span class="token punctuation">)</span><span class="token punctuation">:</span>        url <span class="token operator">=</span> <span class="token string">"http://www.cninfo.com.cn/new/information/topSearch/detailOfQuery"</span>    data <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'keyWord'</span><span class="token punctuation">:</span> bank_name<span class="token punctuation">,</span>        <span class="token string">'maxSecNum'</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>        <span class="token string">'maxListNum'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span>    hd <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'Host'</span><span class="token punctuation">:</span> <span class="token string">'www.cninfo.com.cn'</span><span class="token punctuation">,</span>        <span class="token string">'Origin'</span><span class="token punctuation">:</span> <span class="token string">'http://www.cninfo.com.cn'</span><span class="token punctuation">,</span>        <span class="token string">'Pragma'</span><span class="token punctuation">:</span> <span class="token string">'no-cache'</span><span class="token punctuation">,</span>        <span class="token string">'Accept-Encoding'</span><span class="token punctuation">:</span> <span class="token string">'gzip,deflate'</span><span class="token punctuation">,</span>        <span class="token string">'Connection'</span><span class="token punctuation">:</span> <span class="token string">'keep-alive'</span><span class="token punctuation">,</span>        <span class="token string">'Content-Length'</span><span class="token punctuation">:</span> <span class="token string">'70'</span><span class="token punctuation">,</span>        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0(Windows NT 10.0;Win64;x64) AppleWebKit / 537.36(KHTML, likeGecko) Chrome / 75.0.3770.100Safari / 537.36'</span><span class="token punctuation">,</span>        <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/x-www-form-urlencoded; charset=UTF-8'</span><span class="token punctuation">,</span>        <span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json,text/plain,*/*'</span><span class="token punctuation">,</span>        <span class="token string">'Accept-Language'</span><span class="token punctuation">:</span> <span class="token string">'zh-CN,zh;q=0.9,en;q=0.8'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span>    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>hd<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">)</span>    r <span class="token operator">=</span> r<span class="token punctuation">.</span>content    m <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>    pk <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>m<span class="token punctuation">)</span>    orgId <span class="token operator">=</span> pk<span class="token punctuation">[</span><span class="token string">"keyBoardList"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"orgId"</span><span class="token punctuation">]</span>   <span class="token comment">#è·å–å‚æ•°</span>    plate <span class="token operator">=</span> pk<span class="token punctuation">[</span><span class="token string">"keyBoardList"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"plate"</span><span class="token punctuation">]</span>    code <span class="token operator">=</span> pk<span class="token punctuation">[</span><span class="token string">"keyBoardList"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"code"</span><span class="token punctuation">]</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>orgId<span class="token punctuation">,</span>plate<span class="token punctuation">,</span>code<span class="token punctuation">)</span>    <span class="token keyword">return</span> orgId<span class="token punctuation">,</span> plate<span class="token punctuation">,</span> code  <span class="token keyword">def</span> <span class="token function">download_PDF</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> file_name<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment">#ä¸‹è½½pdf</span>    url <span class="token operator">=</span> url    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>bank <span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span> file_name <span class="token operator">+</span> <span class="token string">".pdf"</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span>    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>r<span class="token punctuation">.</span>content<span class="token punctuation">)</span>  <span class="token keyword">def</span> <span class="token function">get_PDF</span><span class="token punctuation">(</span>orgId<span class="token punctuation">,</span> plate<span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">:</span>    url <span class="token operator">=</span> <span class="token string">"http://www.cninfo.com.cn/new/hisAnnouncement/query"</span>    data <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'stock'</span><span class="token punctuation">:</span> <span class="token string">'{},{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> orgId<span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token string">'tabName'</span><span class="token punctuation">:</span> <span class="token string">'fulltext'</span><span class="token punctuation">,</span>        <span class="token string">'pageSize'</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span>        <span class="token string">'pageNum'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token string">'column'</span><span class="token punctuation">:</span> plate<span class="token punctuation">,</span>        <span class="token string">'category'</span><span class="token punctuation">:</span> <span class="token string">'category_ndbg_szsh;'</span><span class="token punctuation">,</span>        <span class="token string">'plate'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'seDate'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'searchkey'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'secid'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'sortName'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'sortType'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'isHLtitle'</span><span class="token punctuation">:</span> <span class="token string">'true'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span>     hd <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'Host'</span><span class="token punctuation">:</span> <span class="token string">'www.cninfo.com.cn'</span><span class="token punctuation">,</span>        <span class="token string">'Origin'</span><span class="token punctuation">:</span> <span class="token string">'http://www.cninfo.com.cn'</span><span class="token punctuation">,</span>        <span class="token string">'Pragma'</span><span class="token punctuation">:</span> <span class="token string">'no-cache'</span><span class="token punctuation">,</span>        <span class="token string">'Accept-Encoding'</span><span class="token punctuation">:</span> <span class="token string">'gzip,deflate'</span><span class="token punctuation">,</span>        <span class="token string">'Connection'</span><span class="token punctuation">:</span> <span class="token string">'keep-alive'</span><span class="token punctuation">,</span>        <span class="token comment"># 'Content-Length': '216',</span>        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'User-Agent:Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/533.20.25 (KHTML, like Gecko) Version/5.0.4 Safari/533.20.27'</span><span class="token punctuation">,</span>        <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/x-www-form-urlencoded; charset=UTF-8'</span><span class="token punctuation">,</span>        <span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json,text/plain,*/*'</span><span class="token punctuation">,</span>        <span class="token string">'Accept-Language'</span><span class="token punctuation">:</span> <span class="token string">'zh-CN,zh;q=0.9,en;q=0.8'</span><span class="token punctuation">,</span>        <span class="token string">'X-Requested-With'</span><span class="token punctuation">:</span> <span class="token string">'XMLHttpRequest'</span><span class="token punctuation">,</span>        <span class="token comment"># 'Cookie': cookies</span>    <span class="token punctuation">}</span>    data <span class="token operator">=</span> parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>hd<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">)</span>    r <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>content<span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>    r <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>r<span class="token punctuation">)</span>    reports_list <span class="token operator">=</span> r<span class="token punctuation">[</span><span class="token string">'announcements'</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> report <span class="token keyword">in</span> reports_list<span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token string">'æ‘˜è¦'</span> <span class="token keyword">in</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span> <span class="token keyword">or</span> <span class="token string">"20"</span> <span class="token keyword">not</span> <span class="token keyword">in</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            <span class="token keyword">continue</span>        <span class="token keyword">if</span> <span class="token string">'H'</span> <span class="token keyword">in</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            <span class="token keyword">continue</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># http://static.cninfo.com.cn/finalpage/2019-03-29/1205958883.PDF</span>            pdf_url <span class="token operator">=</span> <span class="token string">"http://static.cninfo.com.cn/"</span> <span class="token operator">+</span> report<span class="token punctuation">[</span><span class="token string">'adjunctUrl'</span><span class="token punctuation">]</span>            file_name <span class="token operator">=</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ­£åœ¨ä¸‹è½½ï¼š"</span><span class="token operator">+</span>pdf_url<span class="token punctuation">,</span><span class="token string">"å­˜æ”¾åœ¨å½“å‰ç›®å½•ï¼š/"</span><span class="token operator">+</span>bank<span class="token operator">+</span><span class="token string">"/"</span><span class="token operator">+</span>file_name<span class="token punctuation">)</span>            download_PDF<span class="token punctuation">(</span>pdf_url<span class="token punctuation">,</span> file_name<span class="token punctuation">)</span>            sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    <span class="token comment"># bank_list = [ 'ä¸­ä¿¡é“¶è¡Œ', 'å…´ä¸šé“¶è¡Œ', 'å¹³å®‰é“¶è¡Œ','æ°‘ç”Ÿé“¶è¡Œ', 'åå¤é“¶è¡Œ','äº¤é€šé“¶è¡Œ', 'ä¸­å›½é“¶è¡Œ', 'æ‹›å•†é“¶è¡Œ', 'æµ¦å‘é“¶è¡Œ','å»ºè®¾é“¶è¡Œ', ]</span>    bank_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"å¹³å®‰é“¶è¡Œ"</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> bank <span class="token keyword">in</span> bank_list<span class="token punctuation">:</span>        os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>bank<span class="token punctuation">)</span>        orgId<span class="token punctuation">,</span> plate<span class="token punctuation">,</span> code <span class="token operator">=</span> get_adress<span class="token punctuation">(</span>bank<span class="token punctuation">)</span>        get_PDF<span class="token punctuation">(</span>orgId<span class="token punctuation">,</span> plate<span class="token punctuation">,</span> code<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ä¸‹ä¸€å®¶~"</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"All done!"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è·‘ä¸€ä¸‹è¯•è¯•ï¼Œå“‡çœŸçš„å¤ªæ£’äº†ï¼Œæœç„¶èƒ½ä¸‹è½½åˆ°è´¢æŠ¥ã€‚ç†è®ºä¸Šæˆ‘ä»¬åªéœ€è¦é‡‡ç”¨å¥¥å¡å§†å‰ƒåˆ€åŸåˆ™ï¼Œæ”¹ä¸€ä¸‹å®ƒçš„ä»£ç ï¼ŒæŠŠbank_listæ¢ä¸ºæˆ‘ä»¬ã€Š2021å¹´ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯è¡¨ã€‹é‡Œé¢çš„è‚¡ç¥¨ç®€ç§°ï¼Œç„¶åä¾æ¬¡ä¸‹è½½pdfåˆ°æˆ‘ä»¬çš„æŒ‡å®šç›®å½•å°±å¯ä»¥äº†ã€‚</p><p>ç„¶è€Œä¸ºäº†å­¦ä¹ èµ·è§ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç ”ç©¶ä»¥ä¸‹å®ƒçš„ä»£ç ã€‚</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å·¨æ½®èµ„è®¯ç½‘ä¸‹è½½è´¢æŠ¥çš„æ–¹å¼å¤§è‡´æ˜¯éœ€è¦å…ˆæœç´¢ï¼Œç„¶åç­›é€‰å¹´æŠ¥ï¼Œç„¶åè¿›å…¥ä¸‹è½½é¡µé¢ã€‚</p><p><img src="download.jpg" alt="å¹³å®‰é“¶è¡Œ2020å¹´è´¢æŠ¥ä¸‹è½½é¡µé¢"></p><p>ä¸‹è½½é¡µé¢æœ‰å…¨å±åŠŸèƒ½ï¼Œä¹Ÿæœ‰ä¸‹è½½åŠŸèƒ½ã€‚æˆ‘ä»¬ç‚¹å‡»å³é”®â€œæ£€æŸ¥ç½‘é¡µæºä»£ç â€ï¼Œæœç´¢ä¸€ä¸‹â€œå…¬å‘Šä¸‹è½½â€ï¼Œåœ¨HTMLæºç ä¸­å‘ç°è¿™æ ·ä¸€è¡Œä»£ç ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mini<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>noticeDownload<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>iconfont icongonggaoxiazai<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> å…¬å‘Šä¸‹è½½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™æ®µä»£ç å‘Šè¯‰æˆ‘ä»¬ï¼Œç”¨æˆ·åœ¨ç‚¹å‡»â€œå…¬å‘Šä¸‹è½½â€æ—¶ï¼Œç½‘ç«™ä¼šè°ƒç”¨â€œnoticeDownloadâ€å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°åœ¨å“ªé‡Œå‘¢ï¼Ÿç›´è§‰å‘Šè¯‰æˆ‘ä»¬åœ¨è¿™ä¸ªç½‘é¡µæ‰€å¼•ç”¨çš„JavaScriptæºç é‡Œï¼Œæˆ‘ä»¬ç¿»åˆ°é¡µé¢æœ€ä¸‹æ–¹ï¼Œæœ‰è¿™ä¸¤è¡Œï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://static.cninfo.com.cn/new/js/lib/pdfobject.min.js?v=20210820023809<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://static.cninfo.com.cn/new/assets/js/disclosure/notice-detail.js?v=20210820023809<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åˆ†åˆ«ç»™å‡ºäº†ä¸¤ä»½JavaScriptä»£ç çš„åœ°å€ï¼Œæˆ‘ä»¬é€‰æ‹©å³é”®â€œåœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€é“¾æ¥â€ï¼Œç„¶åæœç„¶åœ¨ç¬¬äºŒä¸ªé“¾æ¥å¯¹åº”çš„ä»£ç ä¸­æ‰¾åˆ°äº†â€œnoticeDownloadâ€å‡½æ•°ï¼Œå®ƒé‡Œé¢æ˜¯è¿™æ ·å®šä¹‰çš„ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function-variable function">noticeDownload</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>path <span class="token operator">+</span> <span class="token string">'/announcement/download?bulletinId='</span> <span class="token operator">+</span> announcementId <span class="token operator">+</span> <span class="token string">'&amp;announceTime='</span> <span class="token operator">+</span> announcementTime<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ„æ€å°±æ˜¯åœ¨windowsç«¯æ‰“å¼€ä¸€ä¸ªçª—å£ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ä¸‹è½½çª—å£ï¼Œè€Œè¦ä¸‹è½½çš„pdfè´¢æŠ¥çš„åœ°å€å°±æ˜¯è¿™å‡ ä¸ªå…³é”®å­—æ‹¼æ¥è€Œæ¥çš„ã€‚è¿™å‡ ä¸ªå…³é”®å­—çš„å†…å®¹åœ¨æˆ‘ä»¬åˆšæ‰æ‰“å¼€çš„é‚£ä¸ªHTMLä¸­éƒ½å¯ä»¥æ‰¾åˆ°ã€‚</p><p>äºæ˜¯æˆ‘ä»¬è·å¾—äº†ä¸‹è½½PDFçš„é“¾æ¥ï¼Œåªè¦è®¿é—®è¿™ä¸ªé“¾æ¥ï¼Œå°±å¯ä»¥ä¸‹è½½PDFï¼Œç±»ä¼¼äºä¹‹å‰ä»WinGoä¸‹è½½ä¸Šå¸‚å…¬å¸2001-20019å¹´è´¢åŠ¡æŠ¥å‘Šçš„åšæ³•ã€‚</p><p>æˆ‘ä»¬ç‚¹å‡»ä¸‹è½½å¹´æŠ¥çš„æ—¶å€™ï¼Œçœ‹åˆ°çš„é“¾æ¥ä¹Ÿæ˜¯è¿™ç§æ¨¡å¼çš„ã€‚å¹¶ä¸”æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºåŒä¸€ä¼ä¸šçš„ä¸åŒå¹´ä»½ï¼ŒannouncementIdå’ŒannouncementTimeéƒ½æ˜¯ä¸åŒçš„ï¼Œè€Œå¾—åˆ°è¿™ä¸¤ä¸ªå˜é‡ï¼Œå°±èƒ½å¾—åˆ°ä¸‹è½½é“¾æ¥ã€‚</p><h2 id="è·å–announcementIdå’ŒannouncementTime"><a href="#è·å–announcementIdå’ŒannouncementTime" class="headerlink" title="è·å–announcementIdå’ŒannouncementTime"></a>è·å–announcementIdå’ŒannouncementTime</h2><p>æƒ³æƒ³æˆ‘ä»¬æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Œå¯èƒ½å°±å¯ä»¥çŸ¥é“æ€ä¹ˆè·å–è¿™ä¸¤ä¸ªå€¼ï¼Œä¸Šä¸€é¡µæœ‰æ‰€æœ‰å¹´ä»½çš„è´¢æŠ¥ã€‚</p><p>æˆ‘ä»¬å›åˆ°<a href="http://www.cninfo.com.cn/new/disclosure/stock?orgId=gssz0000001&amp;stockCode=000001#latestAnnouncement">è¿™ä¸ªé¡µé¢</a>ï¼Œå³é”®â€œæ£€æŸ¥â€ï¼Œé€‰æ‹©Networkï¼Œåœ¨â€œåˆ†ç±»â€ä¸­é€‰æ‹©å¹´æŠ¥ï¼Œæ­¤æ—¶ä¼šè®°å½•ä¸‹ä¸€æ¡queryï¼Œè¿™æ˜¯æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯·æ±‚å¤´ã€è¯·æ±‚å†…å®¹ã€å›åº”å†…å®¹ç­‰ç­‰ï¼Œåœ¨å›åº”å†…å®¹Responseä¸­æˆ‘ä»¬æ˜¾ç„¶å¯ä»¥çœ‹åˆ°å„ç§ä¸åŒå¹´ä»½çš„announcementIdå’ŒannouncementTimeï¼š</p><p><img src="response.jpg" alt="åˆ†ç±»queryæ—¶çš„æœåŠ¡å™¨Response"></p><p>ç„¶åæˆ‘ä»¬ç‚¹å‡»Headersçœ‹çœ‹è¯·æ±‚å†…å®¹ä¸è¯·æ±‚å¤´ï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p><p><img src="g.png" alt="General"></p><p><img src="rf.png" alt="Request Headers ä¸ Form Data"></p><p>å…¶ä¸­Form Dataæ˜¯æµè§ˆå™¨å‘Request URLå‘é€çš„è¯·æ±‚å†…å®¹ï¼ŒRequest Headersæ˜¯è¯·æ±‚å¤´ã€‚æˆ‘ä»¬å‰é¢çš„çˆ¬è™«éƒ½æ˜¯åŸºäºgetæ–¹æ³•çš„ï¼Œè¿™é‡Œè¦åŸºäºpostæ–¹æ³•æ¥åšï¼Œå› ä¸ºè¦æ¶‰åŠåˆ°æ„é€ è¯·æ±‚å¤´ã€‚è¿™å°±æ˜¯åŸä»£ç ä¸­get_PDF()å‡½æ•°æ‰€åšçš„äº‹æƒ…ã€‚</p><p>è¯·æ±‚å¤´éƒ½å®¹æ˜“åšï¼Œè¯·æ±‚å†…å®¹æ˜¯ä¸ªæ€§çš„ï¼Œå¤šçœ‹å‡ ä¸ªå°±ä¼šå‘ç°ï¼Œstockå’Œcolumnæ˜¯å¯å˜çš„ï¼Œå…¶ä»–ä¸å¯å˜ã€‚è™½ç„¶å˜åŒ–æœ‰è§„å¾‹ï¼Œä½†æ˜¯åŸä»£ç é‡‡ç”¨äº†æ›´ç‚«æŠ€çš„æ–¹æ³•æ¥å®ç°ï¼šæ„å»ºå¦ä¸€ä¸ªpostæ¥è·å–ã€‚</p><h2 id="è·å–stockä¸plate"><a href="#è·å–stockä¸plate" class="headerlink" title="è·å–stockä¸plate"></a>è·å–stockä¸plate</h2><p>äºŒäºŒä¸‰å››å†æ¥ä¸€æ¬¡ï¼Œæˆ‘ä»¬åœ¨<a href="http://www.cninfo.com.cn/new/index">æœç´¢é¡µé¢</a>æ‰“å¼€æ£€æŸ¥åŠŸèƒ½çš„Networké¡¹ï¼Œè¿›è¡Œä¸€æ¬¡æœç´¢ï¼Œæµè§ˆå™¨ä¸ºæˆ‘ä»¬è®°å½•ä¸‹äº†å¾ˆå¤šä¸æœåŠ¡å™¨çš„äº’åŠ¨è¿‡ç¨‹ï¼š</p><p><img src="search.jpg" alt="æ£€ç´¢è¿‡ç¨‹ä¸­çš„Networkè®°å½•"></p><p>åŸç ä½œè€…å·²ç»è´´å¿ƒåœ°ä¸ºæˆ‘ä»¬æ‰¾åˆ°äº†ï¼ŒdetailOfQueryè¿™ä¸€é¡¹å¾—åˆ°çš„ResponseåŒ…å«äº†æˆ‘ä»¬æ„å»ºstockå’Œcolumnæ‰€éœ€è¦çš„å†…å®¹ã€‚é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦å…ˆåšä¸€æ¬¡postï¼Œå¾—åˆ°è¿™ä¸ªResponseå°±å¯ä»¥äº†ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ªpostçš„Generalä¸è¯·æ±‚å¤´ã€è¯·æ±‚å†…å®¹ï¼š</p><p><img src="g2.jpg" alt="General"></p><p><img src="rf2.jpg" alt="Request Headers ä¸ Form Data"></p><p>ç®€å•æ˜“æ‡‚ï¼Œç›´æ¥æ„å»ºå³å¯ã€‚è¿™å°±æ˜¯åŸç get_adress()å‡½æ•°åšçš„äº‹æƒ…ã€‚</p><p>è‡³æ­¤æˆ‘ä»¬å°±å¼„æ˜ç™½äº†åŸç çš„æ€è·¯å’Œåšæ³•ã€‚</p><p>è¿˜æœ‰å¦ä¸€ç§æ›´ä¸ºç®€å•ç²—æš´çš„æ–¹æ³•ï¼Œå°±æ˜¯ç›´æ¥æŸ¥çœ‹ä¸‹è½½é“¾æ¥ï¼š</p><p><img src="download_url.png" alt="å¹³å®‰é“¶è¡Œ2020å¹´å¹´åº¦æŠ¥å‘Šä¸‹è½½é“¾æ¥"></p><p>åŒæ ·å¯ä»¥å‘ç°ï¼Œä¸‹è½½é“¾æ¥å°±æ˜¯åœ¨<a href="http://www.cninfo.com.cn/new">http://www.cninfo.com.cn/new</a>åé¢æ‹¼æ¥äº†è¿™ä¸€å°èŠ‚è·å¾—çš„Responseçš„adjunctUrlå­—æ®µï¼Œä»£ç é‡Œå°±ç”¨çš„è¿™ç§æ–¹å¼ã€‚</p><p>ç”±äºåŸç æ—¶é—´ä¹…è¿œï¼Œå·²ç»æœ‰äº›é™ˆæ—§ï¼Œæˆ‘æ ¹æ®æµè§ˆå™¨ä¸Šè®°å½•ä¸‹çš„ä¿¡æ¯æ›´æ”¹äº†åŸç å¹¶åšäº†æ³¨é‡Šï¼Œå¹¶æŠŠä»£ç æ”¹ä¸ºåªè·å–2020å¹´è´¢æŠ¥ï¼Œä¸‹è½½åˆ°æŒ‡å®šç›®å½•ï¼Œå¹¶ä¸”ä¼˜åŒ–äº†ä¸€ä¸‹è´¢æŠ¥å‘½åæ ¼å¼ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> json<span class="token keyword">import</span> os<span class="token keyword">from</span> time <span class="token keyword">import</span> sleep<span class="token keyword">from</span> urllib <span class="token keyword">import</span> parse<span class="token keyword">import</span> requests  <span class="token keyword">def</span> <span class="token function">get_adress</span><span class="token punctuation">(</span>company_name<span class="token punctuation">)</span><span class="token punctuation">:</span>        url <span class="token operator">=</span> <span class="token string">"http://www.cninfo.com.cn/new/information/topSearch/detailOfQuery"</span>    data <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'keyWord'</span><span class="token punctuation">:</span> company_name<span class="token punctuation">,</span>        <span class="token string">'maxSecNum'</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>        <span class="token string">'maxListNum'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span>    hd <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json, text/javascript, */*; q=0.01'</span><span class="token punctuation">,</span>        <span class="token string">'Accept-Encoding'</span><span class="token punctuation">:</span> <span class="token string">'gzip, deflate'</span><span class="token punctuation">,</span>        <span class="token string">'Accept-Language'</span><span class="token punctuation">:</span> <span class="token string">'zh-CN,zh;q=0.9'</span><span class="token punctuation">,</span>        <span class="token string">'Connection'</span><span class="token punctuation">:</span> <span class="token string">'keep-alive'</span><span class="token punctuation">,</span>        <span class="token string">'Content-Length'</span><span class="token punctuation">:</span> <span class="token string">'70'</span><span class="token punctuation">,</span>        <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/x-www-form-urlencoded; charset=UTF-8'</span><span class="token punctuation">,</span>        <span class="token string">'Host'</span><span class="token punctuation">:</span> <span class="token string">'www.cninfo.com.cn'</span><span class="token punctuation">,</span>        <span class="token string">'Origin'</span><span class="token punctuation">:</span> <span class="token string">'http://www.cninfo.com.cn'</span><span class="token punctuation">,</span>        <span class="token comment"># 'Referer': referer, # ç”¨äºå‘Šè¯‰æœåŠ¡å™¨æˆ‘ä»¬æ˜¯ä»å“ªä¸ªé¡µé¢è·³è½¬åˆ°è¿™ä¸ªé¡µé¢æ¥çš„ï¼Œè¿™é‡Œå¯èƒ½å¹¶ä¸éœ€è¦</span>        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36'</span><span class="token punctuation">,</span>                <span class="token string">'Pragma'</span><span class="token punctuation">:</span> <span class="token string">'no-cache'</span><span class="token punctuation">,</span> <span class="token comment"># å¼ºåˆ¶è¦æ±‚ç¼“å­˜æœåŠ¡å™¨åœ¨è¿”å›ç¼“å­˜çš„ç‰ˆæœ¬ä¹‹å‰å°†è¯·æ±‚æäº¤åˆ°æºå¤´æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ã€‚</span>        <span class="token comment"># 'X-Requested-With': 'XMLHttpRequest',  # ç”¨äºåŒºåˆ†åŒæ­¥è¯·æ±‚ï¼ˆç­‰å¾…å›åº”ä¹‹åå†å‘é€ä¸‹ä¸€ä¸ªæ•°æ®åŒ…ï¼‰ å¼‚æ­¥è¯·æ±‚ï¼ˆä¸ç­‰å¾…å›åº”ï¼‰ æ²¡æœ‰è¿™ä¸€é¡¹è¡¨ç¤ºåŒæ­¥è¯·æ±‚</span>        <span class="token comment"># 'Cookie': cookie, # cookieæ˜¯ä¸ç”¨æˆ·ä¸ªäººä¿¡æ¯æœ‰å…³çš„å†…å®¹ï¼Œè¿™é‡Œä¸éœ€è¦</span>    <span class="token punctuation">}</span>    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>hd<span class="token punctuation">,</span> data<span class="token operator">=</span>parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>     m <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>content<span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span> <span class="token comment"># è·å–å“åº”å†…å®¹è½¬æ¢ç¼–ç æ ¼å¼ï¼Œæ­£å¸¸æ˜¾ç¤ºä¸­æ–‡</span>    pk <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token comment"># å°†å¾—åˆ°çš„JSONæ ¼å¼çš„å“åº”è½¬å˜ä¸ºPythonä¸­å¯ä»¥ä½¿ç”¨çš„å¯¹è±¡</span>    orgId <span class="token operator">=</span> pk<span class="token punctuation">[</span><span class="token string">"keyBoardList"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"orgId"</span><span class="token punctuation">]</span>   <span class="token comment">#è·å–å‚æ•°</span>    plate <span class="token operator">=</span> pk<span class="token punctuation">[</span><span class="token string">"keyBoardList"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"plate"</span><span class="token punctuation">]</span>    code <span class="token operator">=</span> pk<span class="token punctuation">[</span><span class="token string">"keyBoardList"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"code"</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> orgId<span class="token punctuation">,</span> plate<span class="token punctuation">,</span> code  <span class="token keyword">def</span> <span class="token function">download_PDF</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> file_name<span class="token punctuation">,</span> company<span class="token punctuation">,</span> orgId<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment">#ä¸‹è½½pdf</span>    url <span class="token operator">=</span> url    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'D:\\çˆ¬å–å·¨æ½®èµ„è®¯ç½‘\\'</span><span class="token operator">+</span> company <span class="token operator">+</span> file_name <span class="token operator">+</span> <span class="token string">"_"</span> <span class="token operator">+</span> orgId <span class="token operator">+</span> <span class="token string">".pdf"</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span>    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>r<span class="token punctuation">.</span>content<span class="token punctuation">)</span>  <span class="token keyword">def</span> <span class="token function">get_PDF</span><span class="token punctuation">(</span>orgId<span class="token punctuation">,</span> plate<span class="token punctuation">,</span> code<span class="token punctuation">,</span> company<span class="token punctuation">)</span><span class="token punctuation">:</span>    url <span class="token operator">=</span> <span class="token string">"http://www.cninfo.com.cn/new/hisAnnouncement/query"</span>    <span class="token keyword">if</span> plate <span class="token operator">==</span> <span class="token string">'sse'</span><span class="token punctuation">:</span>        sh_or_sz <span class="token operator">=</span> <span class="token string">'sh'</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        sh_or_sz <span class="token operator">=</span> <span class="token string">'sz'</span>    data <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'stock'</span><span class="token punctuation">:</span> <span class="token string">'{},{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> orgId<span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token string">'tabName'</span><span class="token punctuation">:</span> <span class="token string">'fulltext'</span><span class="token punctuation">,</span>        <span class="token string">'pageSize'</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span>        <span class="token string">'pageNum'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token string">'column'</span><span class="token punctuation">:</span> plate<span class="token punctuation">,</span>        <span class="token string">'category'</span><span class="token punctuation">:</span> <span class="token string">'category_ndbg_szsh;'</span><span class="token punctuation">,</span>        <span class="token string">'plate'</span><span class="token punctuation">:</span> sh_or_sz<span class="token punctuation">,</span>        <span class="token string">'seDate'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'searchkey'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'secid'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'sortName'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'sortType'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'isHLtitle'</span><span class="token punctuation">:</span> <span class="token string">'true'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span>     hd <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json, text/javascript, */*; q=0.01'</span><span class="token punctuation">,</span>        <span class="token string">'Accept-Encoding'</span><span class="token punctuation">:</span> <span class="token string">'gzip, deflate'</span><span class="token punctuation">,</span>        <span class="token string">'Accept-Language'</span><span class="token punctuation">:</span> <span class="token string">'zh-CN,zh;q=0.9'</span><span class="token punctuation">,</span>        <span class="token string">'Connection'</span><span class="token punctuation">:</span> <span class="token string">'keep-alive'</span><span class="token punctuation">,</span>        <span class="token comment"># 'Content-Length': '216', # è¿™ä¸€é¡¹ä¸åŒä¼ä¸šä¸ä¸€å®šç›¸åŒï¼Œä½œè€…æ³¨é‡Šæ‰äº†</span>        <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/x-www-form-urlencoded; charset=UTF-8'</span><span class="token punctuation">,</span>        <span class="token string">'Host'</span><span class="token punctuation">:</span> <span class="token string">'www.cninfo.com.cn'</span><span class="token punctuation">,</span>        <span class="token string">'Origin'</span><span class="token punctuation">:</span> <span class="token string">'http://www.cninfo.com.cn'</span><span class="token punctuation">,</span>        <span class="token string">'Pragma'</span><span class="token punctuation">:</span> <span class="token string">'no-cache'</span><span class="token punctuation">,</span>        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36'</span><span class="token punctuation">,</span>        <span class="token string">'X-Requested-With'</span><span class="token punctuation">:</span> <span class="token string">'XMLHttpRequest'</span><span class="token punctuation">,</span>        <span class="token comment"># 'Cookie': cookies</span>    <span class="token punctuation">}</span>    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>hd<span class="token punctuation">,</span> data<span class="token operator">=</span>parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># parse.urlencode()è¿™ä¸€æ­¥ä½œç”¨æ˜¯æŠŠdataè¿›è¡Œè§£æï¼Œå¹¶ä¸æ˜¯å¿…è¦çš„ï¼Œä½†æ˜¯åŠ ä¸Šå¯ä»¥æ–¹ä¾¿äº†æœåŠ¡å™¨äº†è§£æˆ‘ä»¬çš„è¯¢é—®</span>    r <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>content<span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>    r <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>r<span class="token punctuation">)</span>    reports_list <span class="token operator">=</span> r<span class="token punctuation">[</span><span class="token string">'announcements'</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> report <span class="token keyword">in</span> reports_list<span class="token punctuation">:</span> <span class="token comment"># éå†æ‰€æœ‰è´¢æŠ¥</span>        <span class="token keyword">if</span> <span class="token string">'æ‘˜è¦'</span> <span class="token keyword">in</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span> <span class="token keyword">or</span> <span class="token string">"20"</span> <span class="token keyword">not</span> <span class="token keyword">in</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment"># ç­›æ‰æ‘˜è¦å’Œ2000å¹´å‰çš„è´¢æŠ¥</span>            <span class="token keyword">continue</span>        <span class="token keyword">if</span> <span class="token string">'H'</span> <span class="token keyword">in</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment"># è¿™ä¸ªå…¶å®æˆ‘æ²¡å¤ªæ˜ç™½ï¼Œä½†æ˜¯ä½œç”¨æ˜¯ç­›æ‰åç§°ä¸­å«æœ‰Hçš„è´¢æŠ¥</span>            <span class="token keyword">continue</span>        <span class="token keyword">if</span> <span class="token string">"2020"</span> <span class="token keyword">in</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>  <span class="token comment"># 2020å¹´è´¢æŠ¥</span>            pdf_url <span class="token operator">=</span> <span class="token string">"http://static.cninfo.com.cn/"</span> <span class="token operator">+</span> report<span class="token punctuation">[</span><span class="token string">'adjunctUrl'</span><span class="token punctuation">]</span>            file_name <span class="token operator">=</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span>            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ­£åœ¨ä¸‹è½½ï¼š"</span> <span class="token operator">+</span> company <span class="token operator">+</span> file_name<span class="token punctuation">)</span>            download_PDF<span class="token punctuation">(</span>pdf_url<span class="token punctuation">,</span> file_name<span class="token punctuation">,</span> company<span class="token punctuation">,</span> orgId<span class="token punctuation">)</span>            sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  company_list <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">'ä¸­ä¿¡é“¶è¡Œ'</span><span class="token punctuation">,</span> <span class="token string">'å…´ä¸šé“¶è¡Œ'</span><span class="token punctuation">,</span> <span class="token string">'å¹³å®‰é“¶è¡Œ'</span><span class="token punctuation">,</span><span class="token string">'æ°‘ç”Ÿé“¶è¡Œ'</span><span class="token punctuation">,</span> <span class="token string">'åå¤é“¶è¡Œ'</span><span class="token punctuation">,</span><span class="token string">'äº¤é€šé“¶è¡Œ'</span><span class="token punctuation">,</span> <span class="token string">'ä¸­å›½é“¶è¡Œ'</span><span class="token punctuation">,</span> <span class="token string">'æ‹›å•†é“¶è¡Œ'</span><span class="token punctuation">,</span> <span class="token string">'æµ¦å‘é“¶è¡Œ'</span><span class="token punctuation">,</span><span class="token string">'å»ºè®¾é“¶è¡Œ'</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token keyword">for</span> company <span class="token keyword">in</span> company_list<span class="token punctuation">:</span>    orgId<span class="token punctuation">,</span> plate<span class="token punctuation">,</span> code <span class="token operator">=</span> get_adress<span class="token punctuation">(</span>company<span class="token punctuation">)</span>    get_PDF<span class="token punctuation">(</span>orgId<span class="token punctuation">,</span> plate<span class="token punctuation">,</span> code<span class="token punctuation">,</span> company<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŠ å…¥ä¸Šå¸‚ä¼ä¸šåˆ—è¡¨"><a href="#åŠ å…¥ä¸Šå¸‚ä¼ä¸šåˆ—è¡¨" class="headerlink" title="åŠ å…¥ä¸Šå¸‚ä¼ä¸šåˆ—è¡¨"></a>åŠ å…¥ä¸Šå¸‚ä¼ä¸šåˆ—è¡¨</h2><p>ç°åœ¨æˆ‘ä»¬è¦åšçš„å°±æ˜¯æ›´æ–°ä¸€ä¸‹company_listå•¦ï¼Œæˆ‘ä»¬åªéœ€è¦å†æ¬¡è¯»å–ã€Š2021å¹´ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯è¡¨ã€‹ï¼Œé‡æ–°ä¿®æ”¹ä»£ç ã€‚</p><p>å¦å¤–æˆ‘è¿˜å‘ç°ï¼Œ<a href="http://www.cninfo.com.cn/new/information/topSearch/detailOfQuery">http://www.cninfo.com.cn/new/information/topSearch/detailOfQuery</a>çš„query dataä¸­çš„ä¼ä¸šç®€ç§°ä¸­å¦‚æœåŒ…å«è‹±æ–‡å­—æ¯ï¼Œé»˜è®¤éƒ½æ˜¯è½¬æ¢ä¸ºå°å†™äº†ï¼Œæ˜Ÿå·ä¹Ÿéœ€è¦å»æ‰ï¼ŒåŸä»£ç é‡Œä¹Ÿæ²¡æœ‰æ³¨æ„åˆ°è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥éœ€è¦æ”¹è¿‡æ¥ã€‚ä¹ŸåŠ å…¥é€‚å½“çš„ä¼‘çœ ï¼Œåçˆ¬è™«ã€‚</p><p><img src="debug1.jpg" alt="å­—ç¬¦å¤„ç†"></p><p>æœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> json<span class="token keyword">import</span> os<span class="token keyword">from</span> time <span class="token keyword">import</span> sleep<span class="token keyword">from</span> urllib <span class="token keyword">import</span> parse<span class="token keyword">import</span> requests<span class="token keyword">import</span> xlrd<span class="token keyword">import</span> time <span class="token builtin">dir</span> <span class="token operator">=</span> <span class="token string">'D:\\çˆ¬å–å·¨æ½®èµ„è®¯ç½‘\\'</span> <span class="token comment"># è¿™ä¸ªç›®å½•éœ€è¦è‡ªè¡Œåˆ›å»ºå¹¶æŒ‡å®š</span><span class="token keyword">def</span> <span class="token function">get_adress</span><span class="token punctuation">(</span>company_name<span class="token punctuation">)</span><span class="token punctuation">:</span>        url <span class="token operator">=</span> <span class="token string">"http://www.cninfo.com.cn/new/information/topSearch/detailOfQuery"</span>    data <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'keyWord'</span><span class="token punctuation">:</span> company_name<span class="token punctuation">,</span>        <span class="token string">'maxSecNum'</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>        <span class="token string">'maxListNum'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span>    hd <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json, text/javascript, */*; q=0.01'</span><span class="token punctuation">,</span>        <span class="token string">'Accept-Encoding'</span><span class="token punctuation">:</span> <span class="token string">'gzip, deflate'</span><span class="token punctuation">,</span>        <span class="token string">'Accept-Language'</span><span class="token punctuation">:</span> <span class="token string">'zh-CN,zh;q=0.9'</span><span class="token punctuation">,</span>        <span class="token string">'Connection'</span><span class="token punctuation">:</span> <span class="token string">'keep-alive'</span><span class="token punctuation">,</span>        <span class="token string">'Content-Length'</span><span class="token punctuation">:</span> <span class="token string">'70'</span><span class="token punctuation">,</span>        <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/x-www-form-urlencoded; charset=UTF-8'</span><span class="token punctuation">,</span>        <span class="token string">'Host'</span><span class="token punctuation">:</span> <span class="token string">'www.cninfo.com.cn'</span><span class="token punctuation">,</span>        <span class="token string">'Origin'</span><span class="token punctuation">:</span> <span class="token string">'http://www.cninfo.com.cn'</span><span class="token punctuation">,</span>        <span class="token comment"># 'Referer': referer, # ç”¨äºå‘Šè¯‰æœåŠ¡å™¨æˆ‘ä»¬æ˜¯ä»å“ªä¸ªé¡µé¢è·³è½¬åˆ°è¿™ä¸ªé¡µé¢æ¥çš„ï¼Œè¿™é‡Œå¯èƒ½å¹¶ä¸éœ€è¦</span>        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36'</span><span class="token punctuation">,</span>                <span class="token string">'Pragma'</span><span class="token punctuation">:</span> <span class="token string">'no-cache'</span><span class="token punctuation">,</span> <span class="token comment"># å¼ºåˆ¶è¦æ±‚ç¼“å­˜æœåŠ¡å™¨åœ¨è¿”å›ç¼“å­˜çš„ç‰ˆæœ¬ä¹‹å‰å°†è¯·æ±‚æäº¤åˆ°æºå¤´æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ã€‚</span>        <span class="token comment"># 'X-Requested-With': 'XMLHttpRequest',  # ç”¨äºåŒºåˆ†åŒæ­¥è¯·æ±‚ï¼ˆç­‰å¾…å›åº”ä¹‹åå†å‘é€ä¸‹ä¸€ä¸ªæ•°æ®åŒ…ï¼‰ å¼‚æ­¥è¯·æ±‚ï¼ˆä¸ç­‰å¾…å›åº”ï¼‰ æ²¡æœ‰è¿™ä¸€é¡¹è¡¨ç¤ºåŒæ­¥è¯·æ±‚</span>        <span class="token comment"># 'Cookie': cookie, # cookieæ˜¯ä¸ç”¨æˆ·ä¸ªäººä¿¡æ¯æœ‰å…³çš„å†…å®¹ï¼Œè¿™é‡Œä¸éœ€è¦</span>    <span class="token punctuation">}</span>    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>hd<span class="token punctuation">,</span> data<span class="token operator">=</span>parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>     m <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>content<span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span> <span class="token comment"># è·å–å“åº”å†…å®¹è½¬æ¢ç¼–ç æ ¼å¼ï¼Œæ­£å¸¸æ˜¾ç¤ºä¸­æ–‡</span>    pk <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token comment"># å°†å¾—åˆ°çš„JSONæ ¼å¼çš„å“åº”è½¬å˜ä¸ºPythonä¸­å¯ä»¥ä½¿ç”¨çš„å¯¹è±¡</span>    orgId <span class="token operator">=</span> pk<span class="token punctuation">[</span><span class="token string">"keyBoardList"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"orgId"</span><span class="token punctuation">]</span>   <span class="token comment">#è·å–å‚æ•°</span>    plate <span class="token operator">=</span> pk<span class="token punctuation">[</span><span class="token string">"keyBoardList"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"plate"</span><span class="token punctuation">]</span>    code <span class="token operator">=</span> pk<span class="token punctuation">[</span><span class="token string">"keyBoardList"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"code"</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> orgId<span class="token punctuation">,</span> plate<span class="token punctuation">,</span> code  <span class="token keyword">def</span> <span class="token function">download_PDF</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> file_name<span class="token punctuation">,</span> company<span class="token punctuation">,</span> orgId<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment">#ä¸‹è½½pdf</span>    url <span class="token operator">=</span> url    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>    f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">dir</span> <span class="token operator">+</span> file_name<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"_"</span> <span class="token operator">+</span> orgId <span class="token operator">+</span> <span class="token string">".pdf"</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span>    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>r<span class="token punctuation">.</span>content<span class="token punctuation">)</span>  <span class="token keyword">def</span> <span class="token function">get_PDF</span><span class="token punctuation">(</span>orgId<span class="token punctuation">,</span> plate<span class="token punctuation">,</span> code<span class="token punctuation">,</span> company<span class="token punctuation">)</span><span class="token punctuation">:</span>    url <span class="token operator">=</span> <span class="token string">"http://www.cninfo.com.cn/new/hisAnnouncement/query"</span>    <span class="token keyword">if</span> plate <span class="token operator">==</span> <span class="token string">'sse'</span><span class="token punctuation">:</span>        sh_or_sz <span class="token operator">=</span> <span class="token string">'sh'</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        sh_or_sz <span class="token operator">=</span> <span class="token string">'sz'</span>    data <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'stock'</span><span class="token punctuation">:</span> <span class="token string">'{},{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> orgId<span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token string">'tabName'</span><span class="token punctuation">:</span> <span class="token string">'fulltext'</span><span class="token punctuation">,</span>        <span class="token string">'pageSize'</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span>        <span class="token string">'pageNum'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token string">'column'</span><span class="token punctuation">:</span> plate<span class="token punctuation">,</span>        <span class="token string">'category'</span><span class="token punctuation">:</span> <span class="token string">'category_ndbg_szsh;'</span><span class="token punctuation">,</span>        <span class="token string">'plate'</span><span class="token punctuation">:</span> sh_or_sz<span class="token punctuation">,</span>        <span class="token string">'seDate'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'searchkey'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'secid'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'sortName'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'sortType'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>        <span class="token string">'isHLtitle'</span><span class="token punctuation">:</span> <span class="token string">'true'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span>     hd <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'Accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json, text/javascript, */*; q=0.01'</span><span class="token punctuation">,</span>        <span class="token string">'Accept-Encoding'</span><span class="token punctuation">:</span> <span class="token string">'gzip, deflate'</span><span class="token punctuation">,</span>        <span class="token string">'Accept-Language'</span><span class="token punctuation">:</span> <span class="token string">'zh-CN,zh;q=0.9'</span><span class="token punctuation">,</span>        <span class="token string">'Connection'</span><span class="token punctuation">:</span> <span class="token string">'keep-alive'</span><span class="token punctuation">,</span>        <span class="token comment"># 'Content-Length': '216', # è¿™ä¸€é¡¹ä¸åŒä¼ä¸šä¸ä¸€å®šç›¸åŒï¼Œä½œè€…æ³¨é‡Šæ‰äº†</span>        <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/x-www-form-urlencoded; charset=UTF-8'</span><span class="token punctuation">,</span>        <span class="token string">'Host'</span><span class="token punctuation">:</span> <span class="token string">'www.cninfo.com.cn'</span><span class="token punctuation">,</span>        <span class="token string">'Origin'</span><span class="token punctuation">:</span> <span class="token string">'http://www.cninfo.com.cn'</span><span class="token punctuation">,</span>        <span class="token string">'Pragma'</span><span class="token punctuation">:</span> <span class="token string">'no-cache'</span><span class="token punctuation">,</span>        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36'</span><span class="token punctuation">,</span>        <span class="token string">'X-Requested-With'</span><span class="token punctuation">:</span> <span class="token string">'XMLHttpRequest'</span><span class="token punctuation">,</span>        <span class="token comment"># 'Cookie': cookies</span>    <span class="token punctuation">}</span>    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>hd<span class="token punctuation">,</span> data<span class="token operator">=</span>parse<span class="token punctuation">.</span>urlencode<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># parse.urlencode()è¿™ä¸€æ­¥ä½œç”¨æ˜¯æŠŠdataè¿›è¡Œè§£æï¼Œå¹¶ä¸æ˜¯å¿…è¦çš„ï¼Œä½†æ˜¯åŠ ä¸Šå¯ä»¥æ–¹ä¾¿äº†æœåŠ¡å™¨äº†è§£æˆ‘ä»¬çš„è¯¢é—®</span>    r <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>content<span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>    r <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>r<span class="token punctuation">)</span>    reports_list <span class="token operator">=</span> r<span class="token punctuation">[</span><span class="token string">'announcements'</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> report <span class="token keyword">in</span> reports_list<span class="token punctuation">:</span> <span class="token comment"># éå†æ‰€æœ‰è´¢æŠ¥</span>        <span class="token keyword">if</span> <span class="token string">'æ‘˜è¦'</span> <span class="token keyword">in</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span> <span class="token keyword">or</span> <span class="token string">"20"</span> <span class="token keyword">not</span> <span class="token keyword">in</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment"># ç­›æ‰æ‘˜è¦å’Œ2000å¹´å‰çš„è´¢æŠ¥</span>            <span class="token keyword">continue</span>        <span class="token keyword">if</span> <span class="token string">'H'</span> <span class="token keyword">in</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment"># è¿™ä¸ªå…¶å®æˆ‘æ²¡å¤ªæ˜ç™½ï¼Œä½†æ˜¯ä½œç”¨æ˜¯ç­›æ‰åç§°ä¸­å«æœ‰Hçš„è´¢æŠ¥</span>            <span class="token keyword">continue</span>        <span class="token keyword">if</span> <span class="token string">"2020"</span> <span class="token keyword">in</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>  <span class="token comment"># 2020å¹´è´¢æŠ¥</span>            pdf_url <span class="token operator">=</span> <span class="token string">"http://static.cninfo.com.cn/"</span> <span class="token operator">+</span> report<span class="token punctuation">[</span><span class="token string">'adjunctUrl'</span><span class="token punctuation">]</span>            file_name <span class="token operator">=</span> report<span class="token punctuation">[</span><span class="token string">'announcementTitle'</span><span class="token punctuation">]</span>            <span class="token keyword">if</span> company <span class="token keyword">not</span> <span class="token keyword">in</span> file_name<span class="token punctuation">:</span>                file_name <span class="token operator">=</span> company <span class="token operator">+</span> file_name            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ­£åœ¨ä¸‹è½½ï¼š"</span> <span class="token operator">+</span> file_name<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            download_PDF<span class="token punctuation">(</span>pdf_url<span class="token punctuation">,</span> file_name<span class="token punctuation">,</span> company<span class="token punctuation">,</span> orgId<span class="token punctuation">)</span>            <span class="token keyword">break</span> <span class="token comment"># ä¸‹è½½ä¸”åªä¸‹è½½ä¸€ä¸ª</span>            sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token string">'2021å¹´ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯è¡¨.xlsx'</span>wb <span class="token operator">=</span> xlrd<span class="token punctuation">.</span>open_workbook<span class="token punctuation">(</span>filename<span class="token operator">=</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token comment"># æ‰“å¼€è¡¨æ ¼æ–‡ä»¶</span>errors <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'C:\\Users\\15617\\Desktop\\'</span><span class="token operator">+</span><span class="token string">'å¼‚å¸¸ä¿¡æ¯_å·¨æ½®èµ„è®¯ç½‘.txt'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>sheet1 <span class="token operator">=</span> wb<span class="token punctuation">.</span>sheet_by_index<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment"># é€šè¿‡ç´¢å¼•è·å–è¡¨æ ¼</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> sheet1<span class="token punctuation">.</span>nrows<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">'\t'</span><span class="token punctuation">)</span>    company <span class="token operator">=</span> sheet1<span class="token punctuation">.</span>row<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        orgId<span class="token punctuation">,</span> plate<span class="token punctuation">,</span> code <span class="token operator">=</span> get_adress<span class="token punctuation">(</span>company<span class="token punctuation">)</span>        get_PDF<span class="token punctuation">(</span>orgId<span class="token punctuation">,</span> plate<span class="token punctuation">,</span> code<span class="token punctuation">,</span> company<span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å‡ºç°å¼‚å¸¸ï¼"</span><span class="token operator">+</span>company<span class="token punctuation">)</span>        errors<span class="token punctuation">.</span>write<span class="token punctuation">(</span>company<span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„æˆ‘æŠŠä¸‹è½½ç›®å½•æ”¾åˆ°äº†ä»£ç æœ€å‰é¢ã€‚ä»£ç å¯ä»¥æ­£å¸¸è¿è¡Œã€‚æ€»å…±çˆ¬å–äº†4206ä¸ªå…¬å¸2020å¹´çš„å¹´æŠ¥ï¼Œå‘ç°261ä¸ªå¼‚å¸¸ï¼Œç»æŸ¥éªŒï¼Œéƒ½æ˜¯æ²¡æœ‰åœ¨å·¨æ½®å‘å¸ƒå¹´æŠ¥çš„å…¬å¸ã€‚</p><p>æˆ‘æ‰¿è®¤è¿™æ¬¡æœ‰ç‚¹å¤æ‚ï¼Œä¸è¿‡æ­£å¥½æå¤§åœ°ä¸°å¯Œäº†æˆ‘ä»¬çš„çŸ¥è¯†é¢ï¼Œä¸æ˜¯å—<span class="github-emoji"><span>ğŸ’ª</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4aa.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ’ª</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4aa.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ’ª</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4aa.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»WinGoä¸‹è½½ä¸Šå¸‚å…¬å¸2001-20019å¹´è´¢åŠ¡æŠ¥å‘Š</title>
      <link href="/2021/09/16/%E4%BB%8EWinGo%E4%B8%8B%E8%BD%BD%E4%B8%8A%E5%B8%82%E5%85%AC%E5%8F%B82001-20019%E5%B9%B4%E8%B4%A2%E5%8A%A1%E6%8A%A5%E5%91%8A/"/>
      <url>/2021/09/16/%E4%BB%8EWinGo%E4%B8%8B%E8%BD%BD%E4%B8%8A%E5%B8%82%E5%85%AC%E5%8F%B82001-20019%E5%B9%B4%E8%B4%A2%E5%8A%A1%E6%8A%A5%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»WinGoä¸‹è½½ä¸Šå¸‚å…¬å¸2001-20019å¹´è´¢åŠ¡æŠ¥å‘Š"><a href="#ä»WinGoä¸‹è½½ä¸Šå¸‚å…¬å¸2001-20019å¹´è´¢åŠ¡æŠ¥å‘Š" class="headerlink" title="ä»WinGoä¸‹è½½ä¸Šå¸‚å…¬å¸2001-20019å¹´è´¢åŠ¡æŠ¥å‘Š"></a>ä»WinGoä¸‹è½½ä¸Šå¸‚å…¬å¸2001-20019å¹´è´¢åŠ¡æŠ¥å‘Š</h1><p>ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯æˆ‘ä»¬çˆ¬äº†ä¸å°‘äº†ï¼Œç”¨è°·æ­Œæœç´¢â€œPython çˆ¬å–ä¸Šå¸‚å…¬å¸å¹´æŠ¥â€ï¼š</p><p><img src="google.jpg" alt="è°·æ­Œæœç´¢â€œPython çˆ¬å–ä¸Šå¸‚å…¬å¸å¹´æŠ¥â€"></p><p>ç¬¬ä¸€ç¯‡æ–‡ç« å·ç§°30è¡Œä»£ç å°±å¯ä»¥å®Œæˆï¼Œæˆ‘ä»¬ä¸å¦¨çœ‹ä¸€ä¸‹å®ƒæ˜¯æ€ä¹ˆåšçš„ã€‚</p><h2 id="åŸç "><a href="#åŸç " class="headerlink" title="åŸç "></a>åŸç </h2><p>è¿™ç¯‡æ–‡ç« è¯´ï¼ŒAè‚¡ä¸Šå¸‚å…¬å¸è´¢æŠ¥åˆ†åˆ«åœ¨ä¸Šäº¤æ‰€ã€æ·±äº¤æ‰€ã€å·¨æ½®èµ„è®¯ç½‘æŠ«éœ²ï¼Œç½‘ä¸Šæœ‰è®¸å¤šçˆ¬è¿™ä¸‰ä¸ªç½‘ç«™çš„ä»£ç ï¼Œä¸åŒç½‘ç«™urlä¸åŒï¼Œçˆ¬å–æ–¹å¼ä¹Ÿä¸ç›¸åŒã€‚</p><p>WinGoæ–‡æ„å¹³å°ä¸ºæˆ‘ä»¬æä¾›äº†å¿«æ·å¯ç”¨çš„æ•°æ®é›†ï¼ŒåŒ…å«äº†2001å¹´-2019å¹´Aè‚¡ä¸Šå¸‚å…¬å¸è´¢æŠ¥çš„ä¸‹è½½é“¾æ¥ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼Œ<a href="http://www.wingodata.com/#/dash/public-paper">è¿™é‡Œ</a>æä¾›äº†è¡¨æ ¼å’Œä¸‹è½½é“¾æ¥ã€‚</p><p>ä¸‹è½½åˆ°è¡¨æ ¼ä¹‹åï¼Œåªéœ€è¦å¯¹è¡¨æ ¼åšè¯»å–ï¼Œç„¶åè®¿é—®æŒ‡å®šurlï¼Œä¸‹è½½pdfå°±å¯ä»¥äº†ã€‚</p><p>åŸæ–‡ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> requests<span class="token keyword">import</span> random<span class="token keyword">import</span> time<span class="token keyword">import</span> osrawdata<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_excel<span class="token punctuation">(</span><span class="token string">'å…¬å¸ç«äº‰æˆ˜ç•¥æŒ‡æ ‡_2001_2019.xlsx'</span><span class="token punctuation">,</span> sheet_name <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">get_data</span><span class="token punctuation">(</span>iloc<span class="token punctuation">)</span><span class="token punctuation">:</span>    rawdata<span class="token punctuation">[</span><span class="token string">'year'</span><span class="token punctuation">]</span> <span class="token operator">=</span> rawdata<span class="token punctuation">[</span><span class="token string">'rep_period'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>year    firm <span class="token operator">=</span> rawdata<span class="token punctuation">.</span>at<span class="token punctuation">[</span>iloc<span class="token punctuation">,</span><span class="token string">'security_name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span> <span class="token comment"># å»æ‰*STçš„*å·ï¼Œæ–‡ä»¶å‘½åä¸å«ç‰¹æ®Šç¬¦å·</span>    code <span class="token operator">=</span> rawdata<span class="token punctuation">.</span>at<span class="token punctuation">[</span>iloc<span class="token punctuation">,</span><span class="token string">'security_code'</span><span class="token punctuation">]</span>    year <span class="token operator">=</span> rawdata<span class="token punctuation">.</span>at<span class="token punctuation">[</span>iloc<span class="token punctuation">,</span><span class="token string">'year'</span><span class="token punctuation">]</span>    pdf_url <span class="token operator">=</span> rawdata<span class="token punctuation">.</span>at<span class="token punctuation">[</span>iloc<span class="token punctuation">,</span><span class="token string">'rep_link'</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> firm<span class="token punctuation">,</span>code<span class="token punctuation">,</span>year<span class="token punctuation">,</span>pdf_url<span class="token keyword">def</span> <span class="token function">get_filepath</span><span class="token punctuation">(</span>firm<span class="token punctuation">,</span>year<span class="token punctuation">)</span><span class="token punctuation">:</span>    file_path <span class="token operator">=</span> <span class="token string">'F:\\è´¢åŠ¡æŠ¥å‘Š\\'</span>    file_name <span class="token operator">=</span> <span class="token string">"{}-{}-{}å¹´å¹´åº¦æŠ¥å‘Š.pdf"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span>firm<span class="token punctuation">,</span>year<span class="token punctuation">)</span>    file_full_name <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>file_path<span class="token punctuation">,</span>file_name<span class="token punctuation">)</span>    <span class="token keyword">return</span> file_full_name<span class="token keyword">def</span> <span class="token function">download_pdf</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>file_full_name<span class="token punctuation">)</span><span class="token punctuation">:</span>    headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span><span class="token string">''</span>Mozilla<span class="token operator">/</span><span class="token number">5.0</span> <span class="token punctuation">(</span>Windows NT <span class="token number">6.1</span><span class="token punctuation">;</span> WOW64<span class="token punctuation">)</span> AppleWebKit<span class="token operator">/</span><span class="token number">537.36</span> <span class="token punctuation">(</span>KHTML<span class="token punctuation">,</span> like Gecko<span class="token punctuation">)</span> Chrome<span class="token operator">/</span><span class="token number">39.0</span><span class="token number">.2171</span><span class="token number">.95</span> Safari<span class="token operator">/</span><span class="token number">537.36</span> OPR<span class="token operator">/</span><span class="token number">26.0</span><span class="token number">.1656</span><span class="token number">.60</span><span class="token string">''</span><span class="token punctuation">}</span>    res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_full_name<span class="token punctuation">,</span><span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>        <span class="token keyword">for</span> chunk <span class="token keyword">in</span> res<span class="token punctuation">.</span>iter_content<span class="token punctuation">(</span>chunk_size<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># è¿™ç§ä¸‹è½½æ–¹å¼å¯ä»¥è¾¹ä¸‹è½½è¾¹å­˜ç¡¬ç›˜</span>            <span class="token keyword">if</span> chunk<span class="token punctuation">:</span>                fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>                <span class="token keyword">for</span> iloc <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>rawdata<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    firm<span class="token punctuation">,</span> code<span class="token punctuation">,</span> year<span class="token punctuation">,</span> pdf_url <span class="token operator">=</span> get_data<span class="token punctuation">(</span>iloc<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹ä¸‹è½½{}ï¼Œè‚¡ç¥¨ä»£ç {}çš„{}å¹´æŠ¥"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>firm<span class="token punctuation">,</span>code<span class="token punctuation">,</span>year<span class="token punctuation">)</span><span class="token punctuation">)</span>    file_full_name <span class="token operator">=</span> get_filepath<span class="token punctuation">(</span>firm<span class="token punctuation">,</span>year<span class="token punctuation">)</span>    download_pdf<span class="token punctuation">(</span>pdf_url<span class="token punctuation">,</span>file_full_name<span class="token punctuation">)</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"===========ä¸‹è½½å®Œæˆ=========="</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h2><p>ç›´æ¥è·‘ä¸Šé¢è¿™ä»½ä»£ç ä¼šæŠ¥ä¸€äº›é”™è¯¯ï¼Œä¸»è¦æ˜¯ä½œè€…ç”¨çš„æ˜¯xlsxçš„è¡¨æ ¼ï¼Œè€Œæœ€æ–°çš„æ–‡ä»¶å·²ç»æ˜¯csvæ ¼å¼äº†ï¼›è€Œä¸”åŸç é‡Œé¢è·å–å¹´ä»½çš„æ–¹å¼ä¸å¤ªæ­£ç¡®ï¼›åŸç è·å–è‚¡ç¥¨ç¼–å·çš„æ–¹å¼ä¹Ÿä¸å‡†ç¡®ã€‚æˆ‘è¿˜æŠŠä¸‹è½½æ‰€æœ‰å¹´ä»½è´¢æŠ¥ï¼Œæ”¹ä¸ºä¸‹è½½2019å¹´è´¢æŠ¥ã€‚æœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> requests<span class="token keyword">import</span> random<span class="token keyword">import</span> time<span class="token keyword">import</span> osrawdata<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'å…¬å¸ç«äº‰æˆ˜ç•¥æŒ‡æ ‡_2001_2019.csv'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">get_data</span><span class="token punctuation">(</span>iloc<span class="token punctuation">)</span><span class="token punctuation">:</span>    firm <span class="token operator">=</span> rawdata<span class="token punctuation">.</span>at<span class="token punctuation">[</span>iloc<span class="token punctuation">,</span><span class="token string">'security_name'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span> <span class="token comment"># å»æ‰*STçš„*å·ï¼Œæ–‡ä»¶å‘½åä¸å«ç‰¹æ®Šç¬¦å·</span>    code <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>rawdata<span class="token punctuation">.</span>at<span class="token punctuation">[</span>iloc<span class="token punctuation">,</span><span class="token string">'security_code'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>zfill<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>    year <span class="token operator">=</span> rawdata<span class="token punctuation">.</span>at<span class="token punctuation">[</span>iloc<span class="token punctuation">,</span><span class="token string">'rep_period'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span>    pdf_url <span class="token operator">=</span> rawdata<span class="token punctuation">.</span>at<span class="token punctuation">[</span>iloc<span class="token punctuation">,</span><span class="token string">'rep_link'</span><span class="token punctuation">]</span>    <span class="token keyword">return</span> firm<span class="token punctuation">,</span>code<span class="token punctuation">,</span>year<span class="token punctuation">,</span>pdf_url<span class="token keyword">def</span> <span class="token function">get_filepath</span><span class="token punctuation">(</span>firm<span class="token punctuation">,</span>year<span class="token punctuation">)</span><span class="token punctuation">:</span>    file_path <span class="token operator">=</span> <span class="token string">'D:\\WinGoè´¢åŠ¡æŠ¥å‘Š\\'</span>    file_name <span class="token operator">=</span> <span class="token string">"{}-{}-{}å¹´å¹´åº¦æŠ¥å‘Š.pdf"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span>firm<span class="token punctuation">,</span>year<span class="token punctuation">)</span>    file_full_name <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>file_path<span class="token punctuation">,</span>file_name<span class="token punctuation">)</span>    <span class="token keyword">return</span> file_full_name<span class="token keyword">def</span> <span class="token function">download_pdf</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>file_full_name<span class="token punctuation">)</span><span class="token punctuation">:</span>    headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span><span class="token string">'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 OPR/26.0.1656.60'</span><span class="token punctuation">}</span>    res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_full_name<span class="token punctuation">,</span><span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>        <span class="token keyword">for</span> chunk <span class="token keyword">in</span> res<span class="token punctuation">.</span>iter_content<span class="token punctuation">(</span>chunk_size<span class="token operator">=</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> chunk<span class="token punctuation">:</span>                fp<span class="token punctuation">.</span>write<span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>                <span class="token keyword">for</span> iloc <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>rawdata<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    firm<span class="token punctuation">,</span> code<span class="token punctuation">,</span> year<span class="token punctuation">,</span> pdf_url <span class="token operator">=</span> get_data<span class="token punctuation">(</span>iloc<span class="token punctuation">)</span>    <span class="token keyword">if</span> year <span class="token operator">==</span> <span class="token string">'2019'</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ­£åœ¨ä¸‹è½½{}ï¼Œè‚¡ç¥¨ä»£ç {}çš„{}å¹´æŠ¥"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>firm<span class="token punctuation">,</span>code<span class="token punctuation">,</span>year<span class="token punctuation">)</span><span class="token punctuation">)</span>    file_full_name <span class="token operator">=</span> get_filepath<span class="token punctuation">(</span>firm<span class="token punctuation">,</span>year<span class="token punctuation">)</span>    download_pdf<span class="token punctuation">(</span>pdf_url<span class="token punctuation">,</span>file_full_name<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éå¸¸çš„ç®€å•ç²—æš´ï¼Œæˆ‘æ€»å…±ä¸‹è½½åˆ°äº†3680ä¸ª2019å¹´çš„ä¸Šå¸‚å…¬å¸è´¢æŠ¥ã€‚å¦‚æœéœ€è¦æœ€æ–°çš„2020å¹´çš„è´¢æŠ¥ï¼Œå°±éœ€è¦æ‰¾åˆ«çš„åŠæ³•å•¦<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60e.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60e.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60e.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»Tushareè·å–ä¸Šå¸‚å…¬å¸ç®€ä»‹</title>
      <link href="/2021/09/16/%E4%BB%8ETushare%E8%8E%B7%E5%8F%96%E4%B8%8A%E5%B8%82%E5%85%AC%E5%8F%B8%E7%AE%80%E4%BB%8B/"/>
      <url>/2021/09/16/%E4%BB%8ETushare%E8%8E%B7%E5%8F%96%E4%B8%8A%E5%B8%82%E5%85%AC%E5%8F%B8%E7%AE%80%E4%BB%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»Tushareè·å–ä¸Šå¸‚å…¬å¸ç®€ä»‹"><a href="#ä»Tushareè·å–ä¸Šå¸‚å…¬å¸ç®€ä»‹" class="headerlink" title="ä»Tushareè·å–ä¸Šå¸‚å…¬å¸ç®€ä»‹"></a>ä»Tushareè·å–ä¸Šå¸‚å…¬å¸ç®€ä»‹</h1><p>ç»è¿‡ä¸€äº›ç®€å•çš„ç™¾åº¦å’Œè°·æ­Œå°±å¯ä»¥çŸ¥é“ï¼ŒPythonå¸¸ç”¨çš„é‡‘èæ•°æ®åŒ…åŒ…æ‹¬Tushareã€BaoStockç­‰ç­‰ï¼Œæˆ‘ä»¬ç”¨è°·æ­Œæœä¸€ä¸‹â€œtushare ä¸Šå¸‚å…¬å¸ä¿¡æ¯â€ï¼š</p><p><img src="google.jpg" alt="è°·æ­Œæœç´¢â€œtushare ä¸Šå¸‚å…¬å¸ä¿¡æ¯â€"></p><p>æ‰“å¼€ç¬¬ä¸€ä¸ªç½‘é¡µï¼Œè¿™æ˜¯Tushareç¤¾åŒºçš„ä¸€ä¸ªæ–‡æ¡£é¡µé¢ï¼Œå¾ˆæ¬£æ…°ï¼ŒTushareæä¾›äº†ä¸€ä¸ªå…¬å¸ç®€ä»‹å‚æ•°ï¼š</p><p><img src="tushare.jpg" alt="Tusahreä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯"></p><p>å¾ˆå¥½ï¼Œæˆ‘ä»¬æ¥è¯•ä¸€ä¸‹çœ‹çœ‹è¿™é‡Œçš„å…¬å¸ç®€ä»‹æ˜¯ä»€ä¹ˆæ ·çš„ã€‚</p><h2 id="åŸä»£ç "><a href="#åŸä»£ç " class="headerlink" title="åŸä»£ç "></a>åŸä»£ç </h2><p>æ–‡æ¡£æä¾›äº†ä¸€æ®µæ ·ä¾‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">pro <span class="token operator">=</span> ts<span class="token punctuation">.</span>pro_api<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#æˆ–è€…</span><span class="token comment">#pro = ts.pro_api('your token')</span>df <span class="token operator">=</span> pro<span class="token punctuation">.</span>stock_company<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'SZSE'</span><span class="token punctuation">,</span> fields<span class="token operator">=</span><span class="token string">'ts_code,chairman,manager,secretary,reg_capital,setup_date,province'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œè¿™æ®µä»£ç ä¹‹å‰éœ€è¦å®‰è£…tushareï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">pip install tushare<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®‰è£…å®Œæ¯•åï¼Œç›´æ¥è¿è¡Œè¿™æ®µä»£ç ä¼šæç¤ºï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">è¯·è®¾ç½®tushare proçš„tokenå‡­è¯ç ï¼Œå¦‚æœæ²¡æœ‰è¯·è®¿é—®https://waditu.comæ³¨å†Œç”³è¯·<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ‘ä»¬éœ€è¦æ³¨å†Œä¸€ä¸ªç¤¾åŒºè´¦å·ï¼Œç„¶åè¿›è¡Œä¸ªäººä¿¡æ¯è®¾ç½®ï¼Œå¾—åˆ°tokenå’Œç§¯åˆ†ï¼Œæ‰èƒ½è°ƒç”¨è¿™ä¸ªæ¥å£ã€‚æ¯”å¦‚æˆ‘æ“ä½œä¹‹åæ‰§è¡Œè¿™æ®µä»£ç å°±æˆåŠŸäº†ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> tushare <span class="token keyword">as</span> tspro <span class="token operator">=</span> ts<span class="token punctuation">.</span>pro_api<span class="token punctuation">(</span><span class="token string">'c9c184bef0644923bc05e6e096d71fbf929c731163be9db98d858a69'</span><span class="token punctuation">)</span>df <span class="token operator">=</span> pro<span class="token punctuation">.</span>stock_company<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'SZSE'</span><span class="token punctuation">,</span> fields<span class="token operator">=</span><span class="token string">'ts_code,chairman,manager,secretary,reg_capital,setup_date,province'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç®€å•æ˜“æ‡‚ï¼Œç¨å¾®çœ‹çœ‹æ–‡æ¡£å°±æ˜ç™½ï¼ŒSSEä¸Šäº¤æ‰€ï¼ŒSZSEæ·±äº¤æ‰€ï¼Œfieldså‚æ•°æ˜¯ç­›é€‰æˆ‘ä»¬æƒ³è¦çš„å‚æ•°ã€‚</p><h2 id="ä¿®æ”¹ä»£ç "><a href="#ä¿®æ”¹ä»£ç " class="headerlink" title="ä¿®æ”¹ä»£ç "></a>ä¿®æ”¹ä»£ç </h2><p>æˆ‘ä»¬ç¨å¾®æ”¹ä¸€ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> tushare <span class="token keyword">as</span> tspro <span class="token operator">=</span> ts<span class="token punctuation">.</span>pro_api<span class="token punctuation">(</span><span class="token string">'c9c184bef0644923bc05e6e096d71fbf929c731163be9db98d858a69'</span><span class="token punctuation">)</span>ssedf <span class="token operator">=</span> pro<span class="token punctuation">.</span>stock_company<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'SSE'</span><span class="token punctuation">,</span> fields<span class="token operator">=</span><span class="token string">'ts_code,introduction'</span><span class="token punctuation">)</span>szsedf <span class="token operator">=</span> pro<span class="token punctuation">.</span>stock_company<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'SZSE'</span><span class="token punctuation">,</span> fields<span class="token operator">=</span><span class="token string">'ts_code,introduction'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>ssedf<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>szsedf<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·å°±å¾—åˆ°äº†æˆ‘ä»¬æœ€åœ¨æ„çš„introductionå‚æ•°çš„å†…å®¹ã€‚</p><p>æ¥ä¸‹æ¥è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè‚¡ç¥¨ä»£å·æ˜¯å”¯ä¸€çš„ï¼Œå¯ä»¥ç”¨äºè·Ÿæˆ‘ä»¬ä»¥å‰çš„çˆ¬å–ç»“æœæ•´åˆï¼›ä¸ºäº†æå–introductionçš„å†…å®¹ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦çŸ¥é“ssedfå’Œszsedfåˆ†åˆ«æ˜¯ä»€ä¹ˆç±»çš„å¯¹è±¡ï¼Œæ‰å¥½å¯¹ç—‡ä¸‹è¯ã€‚è°·æ­Œä¸€ä¸‹â€œPython è·å–æ•°æ®ç±»å‹â€å°±å¯ä»¥çŸ¥é“ï¼Œå¯ä»¥å€ŸåŠ©type()å‡½æ•°ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>ssedf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>szsedf<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç„¶åæˆ‘ä»¬å°±çŸ¥é“äºŒè€…éƒ½æ˜¯padasåŒ…é‡Œé¢çš„Dataframeç±»å‹ã€‚</p><p>å¯¹äºè¿™ä¸ªç±»å‹å°æ²¹æ²¹æ˜¯æ¯”è¾ƒç†Ÿæ‚‰çš„ï¼Œå› ä¸ºæ¯”è¾ƒç»å…¸ã€‚å‚è§æˆ‘çš„è¿™ç¯‡æ—©æœŸçš„åšæ–‡ï¼š<a href="https://blog.csdn.net/qq_30565883/article/details/79443069?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163177968216780274117002%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=163177968216780274117002&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_v2~rank_v29-1-79443069.pc_v2_rank_blog_default&amp;utm_term=dataframe&amp;spm=1018.2226.3001.4450">pandas.Dataframeå¢åˆ æ”¹æŸ¥è¯¦ç»†æ“ä½œ</a>ã€‚è¿™é‡Œç®€å•ä»‹ç»å‡ ä¸ªä½¿ç”¨æ–¹å¼ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>ssedf<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># è¡Œæ•°</span><span class="token keyword">print</span><span class="token punctuation">(</span>ssedf<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'ts_code'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># ç¬¬0è¡Œçš„ts_codeåˆ—çš„å†…å®¹</span><span class="token keyword">print</span><span class="token punctuation">(</span>ssedf<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'introduction'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># ç¬¬0è¡Œçš„introductionåˆ—çš„å†…å®¹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æœ‰è¿™ä¸¤ç§ç”¨æ³•å°±å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„åŸºæœ¬éœ€æ±‚äº†ã€‚</p><h2 id="ä¿å­˜ä¸ºæ–‡æœ¬"><a href="#ä¿å­˜ä¸ºæ–‡æœ¬" class="headerlink" title="ä¿å­˜ä¸ºæ–‡æœ¬"></a>ä¿å­˜ä¸ºæ–‡æœ¬</h2><p>æ¥ä¸‹æ¥å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„æ“ä½œäº†ï¼ŒæŠŠintroductionä¿å­˜å‡ºæ¥ï¼Œä¾¿äºåç»­æ“ä½œã€‚æ¯”è¾ƒé—æ†¾çš„æ˜¯Tushareæ²¡æœ‰æä¾›å…¬å¸åï¼Œæˆ‘ä»¬å°±å»æ‰ts_codeç‚¹å·åé¢çš„å†…å®¹ï¼Œä½œä¸ºæ–‡ä»¶åå§ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> tushare <span class="token keyword">as</span> tspro <span class="token operator">=</span> ts<span class="token punctuation">.</span>pro_api<span class="token punctuation">(</span><span class="token string">'c9c184bef0644923bc05e6e096d71fbf929c731163be9db98d858a69'</span><span class="token punctuation">)</span>ssedf <span class="token operator">=</span> pro<span class="token punctuation">.</span>stock_company<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'SSE'</span><span class="token punctuation">,</span> fields<span class="token operator">=</span><span class="token string">'ts_code,introduction'</span><span class="token punctuation">)</span>szsedf <span class="token operator">=</span> pro<span class="token punctuation">.</span>stock_company<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'SZSE'</span><span class="token punctuation">,</span> fields<span class="token operator">=</span><span class="token string">'ts_code,introduction'</span><span class="token punctuation">)</span>df <span class="token operator">=</span> pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>ssedf<span class="token punctuation">,</span> szsedf<span class="token punctuation">]</span><span class="token punctuation">,</span> ignore_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># è¿™æ˜¯ä¸€ä¸ªDataframeæŒ‰åˆ—åˆå¹¶çš„æ“ä½œï¼Œignore_index=Trueè¡¨ç¤ºé‡æ–°æ’åº</span><span class="token builtin">dir</span> <span class="token operator">=</span> <span class="token string">'D:\\Tushareå¯¼å‡º\\'</span> <span class="token comment"># è¿™ä¸ªç›®å½•éœ€è¦è‡ªè¡Œåˆ›å»ºå¹¶æŒ‡å®š</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>df<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>name <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token string">'ts_code'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span>text <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token string">'introduction'</span><span class="token punctuation">]</span>fh <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">dir</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">'.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>fh<span class="token punctuation">.</span>write<span class="token punctuation">(</span>text<span class="token punctuation">)</span>fh<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬æŠŠssedfå’Œszsedfåˆå¹¶ï¼Œç„¶åå¯¹æ¯ä¸€è¡Œè·å–ts_codeå’Œintroductionï¼Œts_codeå–å‰6ä½çš„è‚¡ç¥¨ç¼–å·ä½œä¸ºæˆ‘ä»¬çš„æ–‡ä»¶åï¼Œä¿å­˜åˆ°dirç›®å½•ä¸‹ã€‚</p><p>ç„¶è€Œæ‰§è¡Œè¿™æ®µä»£ç åˆ°ç¬¬427è¡Œä¼šæŠ¥é”™ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token number">427</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>  File <span class="token string">"test.py"</span><span class="token punctuation">,</span> line <span class="token number">18</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>    fh<span class="token punctuation">.</span>write<span class="token punctuation">(</span>text<span class="token punctuation">)</span>TypeError<span class="token punctuation">:</span> write<span class="token punctuation">(</span><span class="token punctuation">)</span> argument must be <span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ„æ€æ˜¯è¯´dfä¸­æœ‰çš„è¡Œçš„introductionä¸ºNoneï¼Œå³å•¥ä¹Ÿæ²¡æœ‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åˆ¤æ–­ä¸€ä¸‹äº†ï¼Œå½“introductionå€¼ä¸ºNoneæˆ–è€…ä¸ºâ€™â€™ç©ºå­—ç¬¦ä¸²æ—¶ï¼Œå°±ä¸ä¿å­˜ï¼Œå¹¶ä¸”è¾“å‡ºè‚¡ç¥¨ä»£ç åˆ°ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶ä¸­ã€‚æˆ‘è®¤ä¸ºè‚¡ç¥¨ä»£ç æ˜¯ä¸ä¼šä¸ºç©ºçš„ï¼Œå¦‚æœèƒ½ä¸ºç©ºå°±ç®—å®ƒç‹ ï¼Œæˆ‘å°±è¯¥æ¢å·¥å…·åŒ…äº†ï¼Œæˆ‘è¿™é‡Œå°±ä¸åˆ¤æ–­äº†ã€‚</p><p>é‡æ–°å†™ä¸€ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> tushare <span class="token keyword">as</span> tspro <span class="token operator">=</span> ts<span class="token punctuation">.</span>pro_api<span class="token punctuation">(</span><span class="token string">'c9c184bef0644923bc05e6e096d71fbf929c731163be9db98d858a69'</span><span class="token punctuation">)</span>ssedf <span class="token operator">=</span> pro<span class="token punctuation">.</span>stock_company<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'SSE'</span><span class="token punctuation">,</span> fields<span class="token operator">=</span><span class="token string">'ts_code,introduction'</span><span class="token punctuation">)</span>szsedf <span class="token operator">=</span> pro<span class="token punctuation">.</span>stock_company<span class="token punctuation">(</span>exchange<span class="token operator">=</span><span class="token string">'SZSE'</span><span class="token punctuation">,</span> fields<span class="token operator">=</span><span class="token string">'ts_code,introduction'</span><span class="token punctuation">)</span>df <span class="token operator">=</span> pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>ssedf<span class="token punctuation">,</span> szsedf<span class="token punctuation">]</span><span class="token punctuation">,</span> ignore_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># è¿™æ˜¯ä¸€ä¸ªDataframeæŒ‰åˆ—åˆå¹¶çš„æ“ä½œï¼Œignore_index=Trueè¡¨ç¤ºé‡æ–°æ’åº</span><span class="token builtin">dir</span> <span class="token operator">=</span> <span class="token string">'D:\\Tushareå¯¼å‡º\\'</span> <span class="token comment"># è¿™ä¸ªç›®å½•éœ€è¦è‡ªè¡Œåˆ›å»ºå¹¶æŒ‡å®š</span>empty <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'C:\\Users\\15617\\Desktop\\'</span><span class="token operator">+</span><span class="token string">'ç©ºä¿¡æ¯_Tushare.txt'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>df<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>name <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token string">'ts_code'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span>text <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>i<span class="token punctuation">,</span> <span class="token string">'introduction'</span><span class="token punctuation">]</span><span class="token keyword">if</span> text <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">or</span> text<span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">:</span>empty<span class="token punctuation">.</span>write<span class="token punctuation">(</span>name<span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token keyword">continue</span>fh <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">dir</span><span class="token operator">+</span>name<span class="token operator">+</span><span class="token string">'.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>fh<span class="token punctuation">.</span>write<span class="token punctuation">(</span>text<span class="token punctuation">)</span>fh<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>empty<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œä¸€ä¸‹å³å¯ã€‚è·‘çš„é€Ÿåº¦éå¸¸å¿«ï¼Œæ¯”ç™¾åº¦ç™¾ç§‘å¿«å¾ˆå¤šï¼Œæˆ‘è¿™é‡Œè·‘ä¸‹æ¥ä¸€å…±è·å¾—äº†4637ä¸ªæœ‰æ•ˆæ–‡ä»¶ã€‚</p><p>åç»­å¦‚æœæœ‰å¿…è¦çš„è¯å¯ä»¥æ ¹æ®è‚¡ç¥¨ç¼–å·ï¼Œç»“åˆæˆ‘ä»¬çš„ã€Š2021å¹´ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯è¡¨ã€‹ï¼Œç”¨PythonæŸ¥è¯¢è‚¡ç¥¨ç¼–å·å¯¹åº”çš„å…¬å¸åç§°ï¼Œç„¶åæŠŠç™¾åº¦ç™¾ç§‘çˆ¬å–çš„ç»“æœå’ŒTushareå¯¼å‡ºçš„ç»“æœæ•´åˆèµ·æ¥ã€‚</p><p>ç¡®å®å¾ˆç®€å•ï¼Œeasyï¼å°ä»™å¥³è¦åŠ æ²¹å–”ğŸ˜†ğŸ˜†ğŸ˜†</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»ç™¾åº¦ç™¾ç§‘çˆ¬å–ä¸Šå¸‚å…¬å¸ä»‹ç»</title>
      <link href="/2021/09/16/%E4%BB%8E%E7%99%BE%E5%BA%A6%E7%99%BE%E7%A7%91%E7%88%AC%E5%8F%96%E4%B8%8A%E5%B8%82%E5%85%AC%E5%8F%B8%E4%BB%8B%E7%BB%8D/"/>
      <url>/2021/09/16/%E4%BB%8E%E7%99%BE%E5%BA%A6%E7%99%BE%E7%A7%91%E7%88%AC%E5%8F%96%E4%B8%8A%E5%B8%82%E5%85%AC%E5%8F%B8%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»ç™¾åº¦ç™¾ç§‘çˆ¬å–ä¸Šå¸‚å…¬å¸ä»‹ç»"><a href="#ä»ç™¾åº¦ç™¾ç§‘çˆ¬å–ä¸Šå¸‚å…¬å¸ä»‹ç»" class="headerlink" title="ä»ç™¾åº¦ç™¾ç§‘çˆ¬å–ä¸Šå¸‚å…¬å¸ä»‹ç»"></a>ä»ç™¾åº¦ç™¾ç§‘çˆ¬å–ä¸Šå¸‚å…¬å¸ä»‹ç»</h1><p>æ¥ä¸‹æ¥æˆ‘ä»¬å®ç°ä¸€ä¸ªç¨å¾®å¤æ‚äº›çš„çˆ¬è™«ï¼Œä»ç™¾åº¦ç™¾ç§‘çˆ¬å–ä¸Šå¸‚å…¬å¸ä»‹ç»å†…å®¹ã€‚</p><h2 id="åŸä»£ç "><a href="#åŸä»£ç " class="headerlink" title="åŸä»£ç "></a>åŸä»£ç </h2><p>æœ¬ç€é¿éš¾å°±æ˜“çš„åŸåˆ™ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥è°·æ­Œä»¥ä¸‹â€çˆ¬å–ç™¾åº¦ç™¾ç§‘â€œï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ‰¾åˆ°æœ‰ç”¨çš„ä»£ç ï¼š</p><p><img src="google.png" alt="è°·æ­Œæœç´¢â€œçˆ¬å–ç™¾åº¦ç™¾ç§‘â€"></p><p>ç„¶åç‚¹å¼€ç¬¬ä¸€ä¸ªé“¾æ¥çœ‹ä¸€çœ‹ã€‚è¿™ç¯‡æ–‡ç« å‘Šè¯‰æˆ‘ä»¬åªéœ€è¦åœ¨â€œ<a href="https://link.zhihu.com/?target=https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB">https://baike.baidu.com/item/</a>â€åé¢åŠ ä¸Šä¸€ä¸ªåè¯ï¼Œå°±å¯ä»¥å¾—åˆ°ç™¾åº¦ç™¾ç§‘ä¸‹è¯¥åè¯çš„è¯æ¡ï¼Œç„¶åè¿›è¡Œçˆ¬å–ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸€çœ¼ç™¾åº¦ç™¾ç§‘æµ‹è¯•ä¸€ä¸‹ï¼Œç¡®å®æ˜¯è¿™æ ·çš„ã€‚</p><p>è¿™ç¯‡æ–‡ç« æä¾›äº†è¿™æ ·ä¸€æ®µä»£ç æ¥è¿›è¡ŒæŒ‡å®šæŸ¥è¯¢è¯è¯­çš„çˆ¬å–ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree<span class="token keyword">def</span> <span class="token function">query</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># è¯·æ±‚åœ°å€</span>    url <span class="token operator">=</span> <span class="token string">'https://baike.baidu.com/item/'</span> <span class="token operator">+</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>quote<span class="token punctuation">(</span>content<span class="token punctuation">)</span>    <span class="token comment"># è¯·æ±‚å¤´éƒ¨</span>    headers <span class="token operator">=</span> <span class="token punctuation">{</span>         <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'</span>     <span class="token punctuation">}</span>    <span class="token comment"># åˆ©ç”¨è¯·æ±‚åœ°å€å’Œè¯·æ±‚å¤´éƒ¨æ„é€ è¯·æ±‚å¯¹è±¡</span>    req <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'GET'</span><span class="token punctuation">)</span>    <span class="token comment"># å‘é€è¯·æ±‚ï¼Œè·å¾—å“åº”</span>    response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>req<span class="token punctuation">)</span>    <span class="token comment"># è¯»å–å“åº”ï¼Œè·å¾—æ–‡æœ¬</span>    text <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token comment"># æ„é€  _Element å¯¹è±¡</span>    html <span class="token operator">=</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>text<span class="token punctuation">)</span>    <span class="token comment"># ä½¿ç”¨ xpath åŒ¹é…æ•°æ®ï¼Œå¾—åˆ°åŒ¹é…å­—ç¬¦ä¸²åˆ—è¡¨</span>    sen_list <span class="token operator">=</span> html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[contains(@class,"lemma-summary") or contains(@class,"lemmaWgt-lemmaSummary")]//text()'</span><span class="token punctuation">)</span>     <span class="token comment"># è¿‡æ»¤æ•°æ®ï¼Œå»æ‰ç©ºç™½</span>    sen_list_after_filter <span class="token operator">=</span> <span class="token punctuation">[</span>item<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span> <span class="token keyword">for</span> item <span class="token keyword">in</span> sen_list<span class="token punctuation">]</span>    <span class="token comment"># å°†å­—ç¬¦ä¸²åˆ—è¡¨è¿æˆå­—ç¬¦ä¸²å¹¶è¿”å›</span>    <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>sen_list_after_filter<span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        content <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'æŸ¥è¯¢è¯è¯­ï¼š'</span><span class="token punctuation">)</span>        result <span class="token operator">=</span> query<span class="token punctuation">(</span>content<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æŸ¥è¯¢ç»“æœï¼š%s"</span> <span class="token operator">%</span> result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ®µä»£ç é‡Œé¢å®šä¹‰äº†mainå‡½æ•°ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯åœ¨æœ‰å¤šä¸ªPythonæ–‡ä»¶æ—¶ä¿è¯ä»è¿™é‡Œå¼€å§‹æ‰§è¡Œï¼Œå½“ç„¶è¿™é‡Œå¹¶ç”¨ä¸åˆ°ã€‚</p><p>æˆ‘ä»¬è¿è¡Œä¸€ä¸‹è¿™æ®µä»£ç ï¼Œå‘ç°å®ƒå¯ä»¥çˆ¬å–åˆ°ç™¾åº¦ç™¾ç§‘çš„å‰é¢å‡ æ®µè¯ï¼Œå¯èƒ½ä¸å¤ªå¾ˆç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†æ˜¯è¿˜å±äºå¯ä»¥æŠ¢æ•‘ä¸€ä¸‹ã€‚æˆ‘ä»¬å…ˆè¯»ä¸€ä¸‹ä»£ç è¯•è¯•ã€‚</p><h2 id="åŸç é‡å†™ä¸è§£è¯»"><a href="#åŸç é‡å†™ä¸è§£è¯»" class="headerlink" title="åŸç é‡å†™ä¸è§£è¯»"></a>åŸç é‡å†™ä¸è§£è¯»</h2><p>é¦–å…ˆé‡å†™ä¸€ä¸‹ä»£ç ï¼Œä¾¿äºè°ƒè¯•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etreecontent <span class="token operator">=</span> <span class="token string">'ä»™å¥³'</span><span class="token comment"># è¯·æ±‚åœ°å€</span>url <span class="token operator">=</span> <span class="token string">'https://baike.baidu.com/item/'</span> <span class="token operator">+</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>quote<span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token comment"># è¯·æ±‚å¤´éƒ¨</span>headers <span class="token operator">=</span> <span class="token punctuation">{</span>     <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'</span> <span class="token punctuation">}</span><span class="token comment"># åˆ©ç”¨è¯·æ±‚åœ°å€å’Œè¯·æ±‚å¤´éƒ¨æ„é€ è¯·æ±‚å¯¹è±¡</span>req <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'GET'</span><span class="token punctuation">)</span><span class="token comment"># å‘é€è¯·æ±‚ï¼Œè·å¾—å“åº”</span>response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token comment"># è¯»å–å“åº”ï¼Œè·å¾—æ–‡æœ¬</span>text <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token comment"># æ„é€  _Element å¯¹è±¡</span>html <span class="token operator">=</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token comment"># ä½¿ç”¨ xpath åŒ¹é…æ•°æ®ï¼Œå¾—åˆ°åŒ¹é…å­—ç¬¦ä¸²åˆ—è¡¨</span>sen_list <span class="token operator">=</span> html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[contains(@class,"lemma-summary") or contains(@class,"lemmaWgt-lemmaSummary")]//text()'</span><span class="token punctuation">)</span> <span class="token comment"># è¿‡æ»¤æ•°æ®ï¼Œå»æ‰ç©ºç™½</span>sen_list_after_filter <span class="token operator">=</span> <span class="token punctuation">[</span>item<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span> <span class="token keyword">for</span> item <span class="token keyword">in</span> sen_list<span class="token punctuation">]</span><span class="token comment"># å°†å­—ç¬¦ä¸²åˆ—è¡¨è¿æˆå­—ç¬¦ä¸²å¹¶è¿”å›</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>sen_list_after_filter<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è·‘ä¸€ä¸‹ï¼Œæ˜¯å¯ä»¥è·‘é€šçš„ã€‚å¦‚æœæŠŠâ€ä»™å¥³â€œå­—æ®µæ¢ä¸ºâ€å¹³å®‰é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸â€œï¼Œæ˜¯ä¸æ˜¯ä¹Ÿèƒ½æ­£ç¡®å¾—åˆ°ç»“æœå‘¢ï¼Ÿè¯·å°ä»™å¥³è¯•ä¸€ä¸‹å•¦ã€‚</p><p>è¿™æ®µä»£ç å®šä¹‰äº†å‡½æ•°query()ç”¨äºè·å¾—çˆ¬å–ç»“æœï¼Œæ ¸å¿ƒæ˜¯å‘é€è¯·æ±‚ï¼Œè·å¾—å“åº”çš„è¿™å¥ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># å‘é€è¯·æ±‚ï¼Œè·å¾—å“åº”</span>response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>req<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç„¶åé€šè¿‡è°ƒè¯•å’Œç™¾åº¦ã€æŸ¥é˜…æ–‡æ¡£ã€æŸ¥çœ‹ç½‘é¡µæºç ç­‰ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹è®¤è¯†ï¼š</p><ol><li>reqéœ€è¦æ ¹æ®è¯·æ±‚åœ°å€å’Œè¯·æ±‚å¤´éƒ¨æ¥æ„é€ ã€‚è¯·æ±‚åœ°å€å¾ˆå¥½ç†è§£ï¼Œè¯·æ±‚å¤´éƒ¨ä¸»è¦æ˜¯ç”¨æ¥æ¨¡æ‹Ÿæµè§ˆå™¨è®¿é—®çš„ï¼Œæœ‰å›ºå®šå†™æ³•ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹æ–‡æ¡£ä¾¿çŸ¥ï¼›</li><li>urllib.parse.quote()æ–¹æ³•æ˜¯ç”¨äºå¯¹æ±‰å­—åšç‰¹å®šå¤„ç†ï¼Œä½¿å…¶èƒ½å‡ºç°åœ¨urlé“¾æ¥ä¸­ï¼›</li><li>å¾—åˆ°çš„textæ˜¯åŒ…å«äº†ç½‘é¡µHTMLä»£ç åœ¨å†…çš„å¾ˆé•¿å¾ˆé•¿çš„ä¸€æ®µå­—ç¬¦ä¸²ï¼›</li><li>html.xpath()æ–¹æ³•å®ç°äº†å†…å®¹ç­›é€‰åŠŸèƒ½ï¼Œsen_listæ˜¯ç­›é€‰åå¾—åˆ°çš„ä¸€ä¸ªå……æ»¡æ–‡æœ¬çš„listï¼›</li><li>å¯¹sen_liståšäº†å»ç©ºç™½å’Œæ‹¼æ¥ç„¶åè¾“å‡ºç»“æœã€‚</li></ol><p>å…¶ä¸­html.xpath()çš„ç­›é€‰åŠŸèƒ½æ˜¯é‡‡ç”¨äº†ä¸€ç§å«åšXPathçš„è¯­è¨€ï¼Œæˆ‘ä»¬ä¸ç”¨ç®¡ï¼Œè¿™ä¸å¤ªé‡è¦ï¼Œå³ä½¿åœ¨ç½‘é¡µä¸Šæˆ‘ä»¬ä¹Ÿèƒ½æ‰¾åˆ°çˆ¬å–å…¶ä»–æ–‡å­—å†…å®¹çš„å…³é”®å­—ï¼špara</p><p>ç„¶åæˆ‘ä»¬æŠŠä»£ç é‡Œé¢çš„ç­›é€‰è§„åˆ™ç…§çŒ«ç”»è™ï¼Œæ›¿æ¢ä¸€ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">sen_list <span class="token operator">=</span> html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[contains(@class,"lemma-summary") or contains(@class,"lemmaWgt-lemmaSummary") or contains(@class,"para")]//text()'</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾—åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„å…¨æ–‡çˆ¬å–çš„åŠŸèƒ½å•¦<span class="github-emoji"><span>ğŸ˜™</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f619.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜™</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f619.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜™</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f619.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>æˆ‘ä»¬é‡æ–°å¤åŸä¸€ä¸‹ä»£ç ï¼Œå› ä¸ºä¸€ä¸ªå®Œæ•´çš„query()å‡½æ•°æ˜¯ä¾¿äºæˆ‘ä»¬åé¢è°ƒç”¨çš„ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree<span class="token keyword">def</span> <span class="token function">query</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># è¯·æ±‚åœ°å€</span>    url <span class="token operator">=</span> <span class="token string">'https://baike.baidu.com/item/'</span> <span class="token operator">+</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>quote<span class="token punctuation">(</span>content<span class="token punctuation">)</span>    <span class="token comment"># è¯·æ±‚å¤´éƒ¨</span>    headers <span class="token operator">=</span> <span class="token punctuation">{</span>         <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'</span>     <span class="token punctuation">}</span>    <span class="token comment"># åˆ©ç”¨è¯·æ±‚åœ°å€å’Œè¯·æ±‚å¤´éƒ¨æ„é€ è¯·æ±‚å¯¹è±¡</span>    req <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'GET'</span><span class="token punctuation">)</span>    <span class="token comment"># å‘é€è¯·æ±‚ï¼Œè·å¾—å“åº”</span>    response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>req<span class="token punctuation">)</span>    <span class="token comment"># è¯»å–å“åº”ï¼Œè·å¾—æ–‡æœ¬</span>    text <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token comment"># æ„é€  _Element å¯¹è±¡</span>    html <span class="token operator">=</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>text<span class="token punctuation">)</span>    <span class="token comment"># ä½¿ç”¨ xpath åŒ¹é…æ•°æ®ï¼Œå¾—åˆ°åŒ¹é…å­—ç¬¦ä¸²åˆ—è¡¨</span>    sen_list <span class="token operator">=</span> html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[contains(@class,"lemma-summary") or contains(@class,"lemmaWgt-lemmaSummary") or contains(@class,"para")]//text()'</span><span class="token punctuation">)</span>    <span class="token comment"># è¿‡æ»¤æ•°æ®ï¼Œå»æ‰ç©ºç™½</span>    sen_list_after_filter <span class="token operator">=</span> <span class="token punctuation">[</span>item<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span> <span class="token keyword">for</span> item <span class="token keyword">in</span> sen_list<span class="token punctuation">]</span>    <span class="token comment"># å°†å­—ç¬¦ä¸²åˆ—è¡¨è¿æˆå­—ç¬¦ä¸²å¹¶è¿”å›</span>    <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>sen_list_after_filter<span class="token punctuation">)</span>content <span class="token operator">=</span> <span class="token string">'ä»™å¥³'</span>result <span class="token operator">=</span> query<span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æŸ¥è¯¢ç»“æœï¼š%s"</span> <span class="token operator">%</span> result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼Œå¦‚æœå°ä»™å¥³è®¤ä¸ºæˆ‘ä»¬åªéœ€è¦çˆ¬å–ç¬¬ä¸€æ®µå³å¯ï¼Œé‚£å°±ä¸ç”¨æ”¹é‚£ä¸€å¥å•¦ã€‚</p><h2 id="Pythonè¯»å–è¡¨æ ¼ä¸æ–‡ä»¶ä¿å­˜"><a href="#Pythonè¯»å–è¡¨æ ¼ä¸æ–‡ä»¶ä¿å­˜" class="headerlink" title="Pythonè¯»å–è¡¨æ ¼ä¸æ–‡ä»¶ä¿å­˜"></a>Pythonè¯»å–è¡¨æ ¼ä¸æ–‡ä»¶ä¿å­˜</h2><p>é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬æ€ä¹ˆåšå‘¢ï¼Ÿä¸Šä¸€èŠ‚æˆ‘ä»¬å·²ç»è·å¾—äº†ä¸Šå¸‚å…¬å¸çš„åŸºæœ¬ä¿¡æ¯ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç…§å…¬å¸åç§°ä½œä¸ºå…³é”®å­—ï¼Œå»åˆ†åˆ«çˆ¬å–å°±å¥½äº†ã€‚è¿™é‡Œé¦–å…ˆæ¶‰åŠåˆ°ä¸€ä¸ªé—®é¢˜ï¼šè¯»å–excelå¹¶è·å–ä¸€ç³»åˆ—å­—ç¬¦ä¸²ç±»å‹çš„å…¬å¸åã€‚å› ä¸ºæˆ‘ä»¬éœ€è¦å­—ç¬¦ä¸²ç±»å‹çš„å…¬å¸åå»åšæ‹¼æ¥å’Œæ£€ç´¢ã€‚</p><p>å› ä¸ºå‰é¢<a href="https://mimiyouyou.com/2021/09/06/python-zong-jie-yu-lian-xi/">Pythonæ€»ç»“ä¸ç»ƒä¹ </a>ä¸€èŠ‚å·²ç»åšè¿‡excelè¯»å–çš„ç»ƒä¹ ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥ç»™å‡ºè¯»å–ã€Š2021å¹´ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯è¡¨ã€‹ä¸­çš„å…¬å¸åç§°çš„ä»£ç ï¼Œä¸»è¦å‚è€ƒäº†<a href="https://zhuanlan.zhihu.com/p/38492442">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token string">'2021å¹´ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯è¡¨.xlsx'</span>wb <span class="token operator">=</span> xlrd<span class="token punctuation">.</span>open_workbook<span class="token punctuation">(</span>filename<span class="token operator">=</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token comment">#æ‰“å¼€æ–‡ä»¶</span>sheet1 <span class="token operator">=</span> wb<span class="token punctuation">.</span>sheet_by_index<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">#é€šè¿‡ç´¢å¼•è·å–è¡¨æ ¼</span><span class="token comment"># print(sheet1.name,sheet1.nrows,sheet1.ncols)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> sheet1<span class="token punctuation">.</span>nrows<span class="token punctuation">)</span><span class="token punctuation">:</span>content <span class="token operator">=</span> sheet1<span class="token punctuation">.</span>row<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token comment"># print(content)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç°åœ¨æˆ‘ä»¬å·²ç»å¾—åˆ°äº†contentï¼Œåœ¨å¾ªç¯ä¸­å¯¹contentåˆ†åˆ«è¿›è¡Œquery()è°ƒç”¨å³å¯å¾—åˆ°resultï¼Œå°†resultä¿å­˜ä¸ºæˆ‘ä»¬æƒ³è¦çš„æ ¼å¼å³å¯ã€‚</p><p>ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ä¿å­˜æ–‡æœ¬çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä»¥txtä¸ºä¾‹å­ï¼Œç®€è¦è¯´æ˜ä¸€ä¸‹æ€æ ·æŠŠå­—ç¬¦ä¸²resultä¿å­˜ä¸ºtxtæ–‡æœ¬ï¼Œä¸»è¦å‚è€ƒ<a href="https://blog.csdn.net/qq_22521211/article/details/80052085">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">result <span class="token operator">=</span> <span class="token string">'æˆ‘æ˜¯å¹³å®‰é“¶è¡Œ'</span>fh <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'å¹³å®‰é“¶è¡Œ.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>fh<span class="token punctuation">.</span>write<span class="token punctuation">(</span>result<span class="token punctuation">)</span>fh<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¯•ä¸€ä¸‹ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥æˆåŠŸä¿å­˜ä¸ºtxtå•¦ã€‚</p><p>è‡³æ­¤æˆ‘ä»¬å·²ç»æ‰“é€šäº†ä»æˆ‘ä»¬çš„ã€Š2021å¹´ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯è¡¨ã€‹åˆ°çˆ¬å–ç™¾åº¦ç™¾ç§‘ï¼Œå†åˆ°ä¿å­˜åˆ°æœ¬åœ°çš„æ‰€æœ‰ç¯èŠ‚ï¼ŒæŠŠè¿™äº›ç¯èŠ‚æ‹¼èµ·æ¥å°±å¥½å•¦ã€‚</p><h2 id="æŒ‰ç…§å…¬å¸åçˆ¬å–ç™¾åº¦ç™¾ç§‘"><a href="#æŒ‰ç…§å…¬å¸åçˆ¬å–ç™¾åº¦ç™¾ç§‘" class="headerlink" title="æŒ‰ç…§å…¬å¸åçˆ¬å–ç™¾åº¦ç™¾ç§‘"></a>æŒ‰ç…§å…¬å¸åçˆ¬å–ç™¾åº¦ç™¾ç§‘</h2><p>æˆ‘ä»¬ç°åœ¨æ¥æŠŠæ‰€æœ‰ç¯èŠ‚æ‹¼èµ·æ¥ï¼Œæ€»ä½“æ€è·¯å¦‚ä¸‹ï¼š</p><div id="flowchart-0" class="flow-chart"></div><p>å½“ç„¶è¿˜æœ‰ä¸€äº›ç»†ææœ«èŠ‚çš„é—®é¢˜ï¼Œæ¯”å¦‚txtçš„åç§°éœ€è¦å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œtxtçš„ä½ç½®éœ€è¦è‡ªå·±ç¡®å®šç„¶åæ‹¼æ¥ï¼Œå¼‚å¸¸ç›‘æµ‹ç­‰ç­‰ï¼Œçœ‹ä¸‹é¢çš„è¿™æ®µæ±‡æ€»ä»£ç å³å¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> urllib<span class="token punctuation">.</span>request<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse<span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree<span class="token keyword">import</span> xlrd<span class="token keyword">from</span> datetime <span class="token keyword">import</span> date<span class="token punctuation">,</span>datetime<span class="token keyword">def</span> <span class="token function">query</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># è¯·æ±‚åœ°å€</span>    url <span class="token operator">=</span> <span class="token string">'https://baike.baidu.com/item/'</span> <span class="token operator">+</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>quote<span class="token punctuation">(</span>content<span class="token punctuation">)</span>    <span class="token comment"># è¯·æ±‚å¤´éƒ¨</span>    headers <span class="token operator">=</span> <span class="token punctuation">{</span>         <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'</span>     <span class="token punctuation">}</span>    <span class="token comment"># åˆ©ç”¨è¯·æ±‚åœ°å€å’Œè¯·æ±‚å¤´éƒ¨æ„é€ è¯·æ±‚å¯¹è±¡</span>    req <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'GET'</span><span class="token punctuation">)</span>    <span class="token comment"># å‘é€è¯·æ±‚ï¼Œè·å¾—å“åº”</span>    response <span class="token operator">=</span> urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlopen<span class="token punctuation">(</span>req<span class="token punctuation">)</span>    <span class="token comment"># è¯»å–å“åº”ï¼Œè·å¾—æ–‡æœ¬</span>    text <span class="token operator">=</span> response<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token comment"># æ„é€  _Element å¯¹è±¡</span>    html <span class="token operator">=</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>text<span class="token punctuation">)</span>    <span class="token comment"># ä½¿ç”¨ xpath åŒ¹é…æ•°æ®ï¼Œå¾—åˆ°åŒ¹é…å­—ç¬¦ä¸²åˆ—è¡¨</span>    sen_list <span class="token operator">=</span> html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[contains(@class,"lemma-summary") or contains(@class,"lemmaWgt-lemmaSummary") or contains(@class,"para")]//text()'</span><span class="token punctuation">)</span>    <span class="token comment"># è¿‡æ»¤æ•°æ®ï¼Œå»æ‰ç©ºç™½</span>    sen_list_after_filter <span class="token operator">=</span> <span class="token punctuation">[</span>item<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">for</span> item <span class="token keyword">in</span> sen_list<span class="token punctuation">]</span>    <span class="token comment"># å°†å­—ç¬¦ä¸²åˆ—è¡¨è¿æˆå­—ç¬¦ä¸²å¹¶è¿”å›</span>    <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>sen_list_after_filter<span class="token punctuation">)</span><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token string">'2021å¹´ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯è¡¨.xlsx'</span>wb <span class="token operator">=</span> xlrd<span class="token punctuation">.</span>open_workbook<span class="token punctuation">(</span>filename<span class="token operator">=</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token comment"># æ‰“å¼€è¡¨æ ¼æ–‡ä»¶</span><span class="token builtin">dir</span> <span class="token operator">=</span> <span class="token string">'D:\\çˆ¬å–ç™¾åº¦ç™¾ç§‘\\'</span> <span class="token comment"># è¿™ä¸ªç›®å½•éœ€è¦è‡ªè¡Œåˆ›å»ºå¹¶æŒ‡å®š</span>errors <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'C:\\Users\\15617\\Desktop\\'</span><span class="token operator">+</span><span class="token string">'å¼‚å¸¸ä¿¡æ¯_ç™¾åº¦ç™¾ç§‘.txt'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>empty <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'C:\\Users\\15617\\Desktop\\'</span><span class="token operator">+</span><span class="token string">'ç©ºä¿¡æ¯_ç™¾åº¦ç™¾ç§‘.txt'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>sheet1 <span class="token operator">=</span> wb<span class="token punctuation">.</span>sheet_by_index<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment"># é€šè¿‡ç´¢å¼•è·å–è¡¨æ ¼</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> sheet1<span class="token punctuation">.</span>nrows<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>content <span class="token operator">=</span> sheet1<span class="token punctuation">.</span>row<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token keyword">try</span><span class="token punctuation">:</span>result <span class="token operator">=</span> query<span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">:</span>fh <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">dir</span><span class="token operator">+</span>content<span class="token operator">+</span><span class="token string">'.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>fh<span class="token punctuation">.</span>write<span class="token punctuation">(</span>result<span class="token punctuation">)</span>fh<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>empty<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token keyword">except</span><span class="token punctuation">:</span>errors<span class="token punctuation">.</span>write<span class="token punctuation">(</span>content<span class="token operator">+</span><span class="token string">'\n'</span><span class="token punctuation">)</span>errors<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>empty<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ®µæ±‡æ€»ä»£ç é‡Œé¢æˆ‘ä»¬è¿˜ï¼š</p><ul><li>ä½¿ç”¨äº†try exceptä½œä¸ºå¼‚å¸¸æ£€æµ‹ï¼Œå¦‚æœå‘ç°æœ‰æœªæˆåŠŸçˆ¬å–çš„å…¬å¸ï¼Œå°±æŠŠå…¬å¸åè¾“å‡ºåˆ°å¼‚å¸¸ä¿¡æ¯.txtä¸­ï¼Œæ–¹ä¾¿æˆ‘ä»¬åé¢å›æº¯ï¼›</li><li>è¿˜è¾“å‡ºiä½œä¸ºè¿›åº¦æç¤ºï¼›</li><li>å°†çˆ¬å–ç»“æœä¸ºç©ºçš„å…¬å¸è¾“å‡ºåˆ°ç©ºä¿¡æ¯.txtä¸­ï¼Œæ–¹ä¾¿åç»­å›æº¯ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥ä¿å­˜ä¸ºåˆ«çš„æ ¼å¼ï¼Œå®Œå…¨å–å†³äºå°ä»™å¥³çš„éœ€æ±‚å’Œæ“ä½œä¾¿åˆ©æ€§ï¼›</li><li>ä½¿ç”¨.replace()æ›¿æ¢æ‰çˆ¬å–ç»“æœä¸­çš„ç‰¹æ®Šå­—æ®µã€‚</li></ul><p>æœ€ç»ˆæˆ‘ä»¬å‘ç°è¿˜æœ‰100å¤šä¸ªå…¬å¸æ˜¯ç™¾åº¦ç™¾ç§‘é‡Œé¢æ²¡æœ‰çš„ï¼Œæ²¡æ³•å»çˆ¬å•¦ã€‚æˆ‘è¿™é‡Œè·‘ä¸‹æ¥ä¸€å…±å¾—åˆ°äº†4354ä¸ªæœ‰æ•ˆæ–‡ä»¶ã€‚</p><p>è¿™ä¸€èŠ‚å°±åˆ°è¿™é‡Œå•¦ï¼Œæ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•å‘€<span class="github-emoji"><span>â¤</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>â¤</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>â¤</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">st=&gt;start: å¼€å§‹op=&gt;operation: å®šä¹‰query()å‡½æ•°ï¼Œæ‰“å¼€ã€Š2021å¹´ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯è¡¨ã€‹opx=&gt;operation: è¯»å–ä¸€ä¸ªå…¬å¸åcontentop2=&gt;operation: çˆ¬å–å†…å®¹result=query(content)op3=&gt;operation: ä¿å­˜resultä¸ºtxtcond=&gt;condition: è¯»å®Œæ‰€æœ‰å…¬å¸äº†å—ï¼Ÿe=&gt;end: ç»“æŸst-&gt;op-&gt;opx-&gt;op2-&gt;op3-&gt;condcond(yes)-&gt;econd(no)-&gt;opx</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»ä¸­å•†äº§ä¸šç ”ç©¶é™¢çˆ¬å–2021å¹´Aè‚¡ä¸Šå¸‚ä¼ä¸šåŸºæœ¬ä¿¡æ¯è¡¨</title>
      <link href="/2021/09/15/%E4%BB%8E%E4%B8%AD%E5%95%86%E4%BA%A7%E4%B8%9A%E7%A0%94%E7%A9%B6%E9%99%A2%E7%88%AC%E5%8F%962021%E5%B9%B4A%E8%82%A1%E4%B8%8A%E5%B8%82%E4%BC%81%E4%B8%9A%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E8%A1%A8/"/>
      <url>/2021/09/15/%E4%BB%8E%E4%B8%AD%E5%95%86%E4%BA%A7%E4%B8%9A%E7%A0%94%E7%A9%B6%E9%99%A2%E7%88%AC%E5%8F%962021%E5%B9%B4A%E8%82%A1%E4%B8%8A%E5%B8%82%E4%BC%81%E4%B8%9A%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»ä¸­å•†äº§ä¸šç ”ç©¶é™¢çˆ¬å–2021å¹´Aè‚¡ä¸Šå¸‚ä¼ä¸šåŸºæœ¬ä¿¡æ¯è¡¨"><a href="#ä»ä¸­å•†äº§ä¸šç ”ç©¶é™¢çˆ¬å–2021å¹´Aè‚¡ä¸Šå¸‚ä¼ä¸šåŸºæœ¬ä¿¡æ¯è¡¨" class="headerlink" title="ä»ä¸­å•†äº§ä¸šç ”ç©¶é™¢çˆ¬å–2021å¹´Aè‚¡ä¸Šå¸‚ä¼ä¸šåŸºæœ¬ä¿¡æ¯è¡¨"></a>ä»ä¸­å•†äº§ä¸šç ”ç©¶é™¢çˆ¬å–2021å¹´Aè‚¡ä¸Šå¸‚ä¼ä¸šåŸºæœ¬ä¿¡æ¯è¡¨</h1><p>é€‰è¿™ä¸ªç½‘ç«™æ¥çˆ¬ä¸æ˜¯å› ä¸ºå®ƒæœ‰å¤šå¥½ï¼Œè€Œæ˜¯å› ä¸ºçˆ¬å®ƒå¾ˆç®€å•ï¼Œè·Ÿæˆ‘ä»¬ä¹Ÿæœ‰å…³ç³»ï¼Œå°±å…ˆçˆ¬ç€ç©ä¸€ä¸‹ï¼Œå½“ä½œä¸€ä¸ªå…¥é—¨å§ã€‚</p><h2 id="åŸä»£ç "><a href="#åŸä»£ç " class="headerlink" title="åŸä»£ç "></a>åŸä»£ç </h2><p>æœ¬ç€å…ˆæ˜“åéš¾çš„ç²¾ç¥ï¼Œæˆ‘åœ¨è°·æ­Œæœç´¢äº†â€œpython è·å–ä¸Šå¸‚å…¬å¸ä¿¡æ¯â€ï¼š</p><p><img src="google.png" alt="è°·æ­Œæœç´¢â€œpython è·å–ä¸Šå¸‚å…¬å¸ä¿¡æ¯â€"></p><p>æ‰¾åˆ°äº†<a href="https://zhuanlan.zhihu.com/p/137965211">è¿™ç¯‡åšæ–‡</a>ï¼Œè¿™æ˜¯ä¸€ç¯‡ä»ä¸­å•†äº§ä¸šç ”ç©¶é™¢ç½‘ç«™çˆ¬å–2019å¹´Aè‚¡ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯çš„åšæ–‡ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬<a href="https://s.askci.com/stock/a/0-0?reportTime=2019-12-31&amp;pageNum=1#QueryCondition">åœ¨è¿™é‡Œ</a>å¯ä»¥çœ‹åˆ°2019å¹´Aè‚¡ä¸Šå¸‚å…¬å¸çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¤§è‡´å¦‚ä¸‹å›¾ï¼š</p><p><img src="fig.jpg" alt="2019å¹´Aè‚¡ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯é¡µé¢"></p><p>å¹¶ä¸”æä¾›äº†ä»¥ä¸‹ä¸€æ®µå¾ˆçŸ­çš„ä»£ç æ¥çˆ¬å–ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> timestart_time <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>         <span class="token comment"># è·å–ç¨‹åºå¼€å§‹è¿è¡Œæ—¶é—´</span>df<span class="token operator">=</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span> <span class="token punctuation">)</span>               <span class="token comment"># å®šä¹‰ä¸€ä¸ªç©ºçš„DataFrameç”¨äºå­˜å‚¨æ•°æ®</span><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">201</span><span class="token punctuation">)</span><span class="token punctuation">:</span>       <span class="token comment"># çˆ¬å–å…¨éƒ¨187é¡µæ•°æ®ï¼Œè®¾ç½®ä¸º200é¡µï¼Œç¡®ä¿éƒ½è¦†ç›–</span>        url <span class="token operator">=</span> <span class="token string">'http://s.askci.com/stock/a/?reportTime=2019-12-31&amp;pageNum={i}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token operator">=</span>i<span class="token punctuation">)</span> <span class="token comment"># æ—¥æœŸå¯ä»¥æ”¹ï¼Œå¯è·å–å­£åº¦æ•°æ®</span>        df <span class="token operator">=</span> pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>df<span class="token punctuation">,</span>pd<span class="token punctuation">.</span>read_html<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment"># ç¬¬1ä¸ªè¡¨æ ¼æ•…å¡«[0],ç»è§‚å¯Ÿå‘ç°æ‰€éœ€è¡¨æ ¼æ˜¯ç½‘é¡µä¸­ç¬¬4ä¸ªè¡¨æ ¼ï¼Œæ•…ä¸º[3]ã€‚è·å¾—åçºµå‘è¿½åŠ åˆ°dfä¸­</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>              <span class="token comment"># æ¯éš”0.5ç§’è®¿é—®ä¸€æ¬¡ï¼Œåº”å¯¹åçˆ¬æªæ–½</span>        endtime <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start_time        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æ­£åœ¨è·å–ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯è¡¨ç¬¬'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'é¡µ'</span><span class="token punctuation">,</span><span class="token string">'å·²è¿è¡Œ%.2fç§’'</span> <span class="token operator">%</span> endtime<span class="token punctuation">)</span><span class="token keyword">except</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span>df<span class="token punctuation">[</span><span class="token string">'è‚¡ç¥¨ä»£ç '</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'è‚¡ç¥¨ä»£ç '</span><span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">'str'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>zfill<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>     <span class="token comment"># å°†åŸæœ¬çš„intæ•°æ®ç±»å‹è½¬æ¢ä¸ºæ–‡æœ¬ï¼Œè¡¥é½è‚¡ç¥¨ä»£ç ä¸º6ä½ï¼Œç”¨çš„æ—¶å€™å¿…é¡»åŠ ä¸Š.strå‰ç¼€</span>df<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'åºå·'</span><span class="token punctuation">,</span><span class="token string">'æ‹›è‚¡ä¹¦'</span><span class="token punctuation">,</span><span class="token string">'å…¬å¸è´¢æŠ¥'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>      <span class="token comment"># åˆ é™¤å¤šä½™çš„åˆ—ï¼Œaxis=1ï¼ˆæŒ‰åˆ—æ–¹å‘æ“ä½œï¼‰ã€inplace=Trueï¼ˆä¿®æ”¹å®Œæ•°æ®ï¼Œåœ¨åŸæ•°æ®ä¸Šä¿å­˜ï¼‰</span>df<span class="token punctuation">.</span>to_excel<span class="token punctuation">(</span><span class="token string">r'2019å¹´ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯è¡¨.xlsx'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span><span class="token string">'*******ç›®æ ‡çˆ¬å–å®Œæˆ*******'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¤§è‡´é‡‡ç”¨äº†pandasæ¨¡å—æ¥è¯»å–ç½‘é¡µä¿¡æ¯ï¼ŒæŒ‰ç…§æ¯é¡µç½‘é¡µçš„urlè§„å¾‹æ¥æ¨¡æ‹Ÿè·³è½¬é¡µé¢ï¼Œç„¶ååˆ æ‰æ— æ•ˆä¿¡æ¯ï¼Œä¿å­˜ä¸ºè¡¨æ ¼æ–‡ä»¶ã€‚</p><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°â€œtry+exceptâ€çš„å¼‚å¸¸ç›‘æµ‹æœºåˆ¶ï¼Œæ–¹æ³•é“¾çš„ä½¿ç”¨ï¼Œæ—¶é—´æ¨¡å—çš„ä½¿ç”¨ï¼Œå­—ç¬¦ä¸²å‰é¢åŠ â€œrâ€è¡¨ç¤ºæ— è½¬ä¹‰å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œç­‰ç­‰ã€‚</p><h2 id="ä¿®æ”¹ä»£ç "><a href="#ä¿®æ”¹ä»£ç " class="headerlink" title="ä¿®æ”¹ä»£ç "></a>ä¿®æ”¹ä»£ç </h2><p>ç„¶è€Œè¿™ä»½ä»£ç å·²ç»é™ˆæ—§äº†ï¼Œæˆ‘ä»¬æƒ³è¦æœ€æ–°çš„ä¿¡æ¯æ€ä¹ˆåŠå‘¢ã€‚æ‰“å¼€ä¸­å•†äº§ä¸šç ”ç©¶é™¢é¦–é¡µï¼Œç‚¹å‡»äº§ä¸šæ•°æ®â†’æ•°æ®åº“â†’Aè‚¡æ•°æ®ï¼Œæˆ‘ä»¬æœç„¶æ‰¾åˆ°äº†æœ€æ–°çš„ä¿¡æ¯ã€‚æ›¿æ¢ä¸€ä¸‹åŸä»£ç ä¸­çš„urlå°±å¥½å•¦ã€‚åŒæ ·çš„ï¼ŒæŠŠæœ€å¤§é¡µæ•°ä¹Ÿè¦æ”¹ä¸€ä¸‹ã€‚</p><p>åœ¨è¯•ç€è·‘äº†ä¸€ä¸‹ä¹‹åæˆ‘å‘ç°ï¼Œsleepæ—¶é—´0.5ç§’è¿˜æ˜¯å¤ªçŸ­äº†ï¼Œè·‘ä¸å®Œ200å¤šé¡µå°±è¢«åçˆ¬äº†ï¼Œäºæ˜¯æˆ‘æ”¹åˆ°5ç§’ã€‚é¡ºåˆ©çˆ¬å–å®Œæ¯•ï¼Œå¾—åˆ°è¡¨æ ¼ã€‚</p><p>æˆ‘ä»¬é‡‡ç”¨çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> timestart_time <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>         <span class="token comment"># è·å–ç¨‹åºå¼€å§‹è¿è¡Œæ—¶é—´</span>df<span class="token operator">=</span>pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span> <span class="token punctuation">)</span>               <span class="token comment"># å®šä¹‰ä¸€ä¸ªç©ºçš„DataFrameç”¨äºå­˜å‚¨æ•°æ®</span><span class="token keyword">try</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">226</span><span class="token punctuation">)</span><span class="token punctuation">:</span>       <span class="token comment"># çˆ¬å–å…¨éƒ¨187é¡µæ•°æ®ï¼Œè®¾ç½®ä¸º200é¡µï¼Œç¡®ä¿éƒ½è¦†ç›–</span>        url <span class="token operator">=</span> <span class="token string">'https://s.askci.com/stock/a/0-0?reportTime=2021-06-30&amp;pageNum={i}#QueryCondition'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>i<span class="token operator">=</span>i<span class="token punctuation">)</span> <span class="token comment"># æ—¥æœŸå¯ä»¥æ”¹ï¼Œå¯è·å–å­£åº¦æ•°æ®</span>        df <span class="token operator">=</span> pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>df<span class="token punctuation">,</span>pd<span class="token punctuation">.</span>read_html<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment"># ç¬¬1ä¸ªè¡¨æ ¼æ•…å¡«[0],ç»è§‚å¯Ÿå‘ç°æ‰€éœ€è¡¨æ ¼æ˜¯ç½‘é¡µä¸­ç¬¬4ä¸ªè¡¨æ ¼ï¼Œæ•…ä¸º[3]ã€‚è·å¾—åçºµå‘è¿½åŠ åˆ°dfä¸­</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>              <span class="token comment"># æ¯éš”1ç§’è®¿é—®ä¸€æ¬¡ï¼Œåº”å¯¹åçˆ¬æªæ–½</span>        endtime <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start_time        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æ­£åœ¨è·å–ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯è¡¨ç¬¬'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'é¡µ'</span><span class="token punctuation">,</span><span class="token string">'å·²è¿è¡Œ%.2fç§’'</span> <span class="token operator">%</span> endtime<span class="token punctuation">)</span><span class="token keyword">except</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å‡ºé”™å•¦'</span><span class="token punctuation">)</span>df<span class="token punctuation">[</span><span class="token string">'è‚¡ç¥¨ä»£ç '</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'è‚¡ç¥¨ä»£ç '</span><span class="token punctuation">]</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">'str'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>zfill<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>     <span class="token comment"># å°†åŸæœ¬çš„intæ•°æ®ç±»å‹è½¬æ¢ä¸ºæ–‡æœ¬ï¼Œè¡¥é½è‚¡ç¥¨ä»£ç ä¸º6ä½ï¼Œç”¨çš„æ—¶å€™å¿…é¡»åŠ ä¸Š.strå‰ç¼€</span>df<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'åºå·'</span><span class="token punctuation">,</span><span class="token string">'æ‹›è‚¡ä¹¦'</span><span class="token punctuation">,</span><span class="token string">'å…¬å¸è´¢æŠ¥'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>      <span class="token comment"># åˆ é™¤å¤šä½™çš„åˆ—ï¼Œaxis=1ï¼ˆæŒ‰åˆ—æ–¹å‘æ“ä½œï¼‰ã€inplace=Trueï¼ˆä¿®æ”¹å®Œæ•°æ®ï¼Œåœ¨åŸæ•°æ®ä¸Šä¿å­˜ï¼‰</span>df<span class="token punctuation">.</span>to_excel<span class="token punctuation">(</span><span class="token string">r'2021å¹´ä¸Šå¸‚å…¬å¸åŸºæœ¬ä¿¡æ¯è¡¨.xlsx'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'gbk'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span><span class="token string">'*******ç›®æ ‡çˆ¬å–å®Œæˆ*******'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•å‘€<span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><h2 id="åç»­è®¡åˆ’"><a href="#åç»­è®¡åˆ’" class="headerlink" title="åç»­è®¡åˆ’"></a>åç»­è®¡åˆ’</h2><p>ç»è¿‡ä¸€äº›åˆæ­¥ç ”ç©¶ï¼Œæˆ‘å‘ç°æ¯”è¾ƒç¨³å®šçš„ã€æˆä½“ç³»çš„ä¿¡æ¯æ¥æºåŒ…æ‹¬ï¼š</p><ul><li>ç™¾åº¦ç™¾ç§‘å¯¹ä¸Šå¸‚å…¬å¸çš„ä»‹ç»ï¼›</li><li>æ²ªäº¤æ‰€ã€æ·±äº¤æ‰€ç­‰å®˜æ–¹æ•°æ®åº“ï¼Œæˆ–ä¸œæ–¹è´¢å¯Œã€ç½‘æ˜“è´¢ç»ç­‰è´¢ç»ç½‘ç«™ï¼›</li><li>å…¶ä»–ç ”ç©¶äººå‘˜å…¬å¸ƒçš„æ•°æ®é›†ï¼›</li><li>Tushareã€Akshareç­‰Pythonå¼€æºé‡‘èåº“ã€‚</li></ul><p>ç›®å‰æˆ‘æ„Ÿè§‰å¦‚æœè¦ä»æ¯ä¸ªå…¬å¸çš„å®˜ç½‘å»çˆ¬ç®€ä»‹å¤ªå›°éš¾äº†ï¼Œå› ä¸ºæå…¶ä¸æˆä½“ç³»ï¼Œæ¯ä¸ªå…¬å¸çš„ç®€ä»‹é¡µé¢éƒ½ä¸å°½ç›¸åŒï¼Œæ²¡æœ‰è§„å¾‹å¯è¨€ã€‚</p><p>å…¬å¸è´¢æŠ¥ç¡®å®æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ¸ é“ï¼Œè§£æè´¢æŠ¥éœ€è¦è‡³å°‘ä»¥ä¸‹å·¥ä½œï¼š</p><ul><li>è¶³å¤Ÿå¤§çš„ç¡¬ç›˜ï¼Œå› ä¸ºæˆ‘ä»¬è¦ä¸‹è½½å¾ˆå¤šå¾ˆå¤šçš„æ–‡ä»¶ï¼Œå¤„ç†å¾ˆå¤šå¾ˆå¤šçš„æ–‡ä»¶ï¼›</li><li>Pythonå¯¹PDFæ–‡ä»¶çš„å¤„ç†åŠæ³•ï¼ŒPDFè½¬å…¶ä»–æ ¼å¼çš„åŠæ³•ï¼Œå› ä¸ºè´¢æŠ¥å¤§éƒ¨åˆ†éƒ½æ˜¯PDFæ ¼å¼çš„ã€‚</li></ul><p>åé¢æˆ‘ä»¬çœ‹æƒ…å†µæŠŠè¿™äº›éƒ½çˆ¬ä¸€ä¸‹æˆ–è€…çˆ¬ä¸€éƒ¨åˆ†ã€‚åšå®Œè¿™äº›ï¼Œæˆ‘ä»¬å†ï¼š</p><ol><li>æ ‡å®šæ•°æ®é›†ï¼›</li><li>ä¸NLPç›¸å…³ç ”ç©¶è¿›è¡Œå¯¹æ¥ã€‚</li></ol><p>æˆ‘ä»¬ä¸€ç‚¹ç‚¹çš„åšèµ·æ¥å°±å¥½å•¦ï¼Œéƒ½ä¸éš¾çš„ï¼Œæœ€ç»ˆåªå–å†³äºæˆ‘ä»¬éœ€è¦ä»€ä¹ˆæ ·çš„ä¿¡æ¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¾›ä¸‘æ•™å¸ˆèŠ‚æ‹Ÿèµ å¯¼å¸ˆ</title>
      <link href="/2021/09/09/%E8%BE%9B%E4%B8%91%E6%95%99%E5%B8%88%E8%8A%82%E6%8B%9F%E8%B5%A0%E5%AF%BC%E5%B8%88/"/>
      <url>/2021/09/09/%E8%BE%9B%E4%B8%91%E6%95%99%E5%B8%88%E8%8A%82%E6%8B%9F%E8%B5%A0%E5%AF%BC%E5%B8%88/</url>
      
        <content type="html"><![CDATA[<h1 id="è¾›ä¸‘æ•™å¸ˆèŠ‚æ‹Ÿèµ å¯¼å¸ˆ"><a href="#è¾›ä¸‘æ•™å¸ˆèŠ‚æ‹Ÿèµ å¯¼å¸ˆ" class="headerlink" title="è¾›ä¸‘æ•™å¸ˆèŠ‚æ‹Ÿèµ å¯¼å¸ˆ"></a>è¾›ä¸‘æ•™å¸ˆèŠ‚æ‹Ÿèµ å¯¼å¸ˆ</h1><p>æ²»ä¸šç²¾å‹¤çœŸå¾å¸ˆï¼Œå­¦è´¯ä¸­è¥¿ä¸€å¤§å®¶ã€‚<br>å®‰ä¸­æ¥¼å‰è‚²æ¡ƒæï¼Œç´«å³°å¦ä¸‹æ²ƒæ–°èŠ±ã€‚<br>äººç”Ÿå¾—å¹¸é—»æ•™è¯²ï¼Œæ©å¸ˆçé‡æˆ‘å¥‹å‘ï¼</p>]]></content>
      
      
      <categories>
          
          <category> æ²¹å…ˆç”Ÿé€‰é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonæ€»ç»“ä¸ç»ƒä¹ </title>
      <link href="/2021/09/06/Python%E6%80%BB%E7%BB%93%E4%B8%8E%E7%BB%83%E4%B9%A0/"/>
      <url>/2021/09/06/Python%E6%80%BB%E7%BB%93%E4%B8%8E%E7%BB%83%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="Pythonæ€»ç»“ä¸ç»ƒä¹ "><a href="#Pythonæ€»ç»“ä¸ç»ƒä¹ " class="headerlink" title="Pythonæ€»ç»“ä¸ç»ƒä¹ "></a>Pythonæ€»ç»“ä¸ç»ƒä¹ </h1><p>è‡³æ­¤æˆ‘ä»¬åŸºæœ¬æŠŠPythonä¸­æœ€é‡è¦çš„è¯­æ³•å’Œæ¦‚å¿µä»‹ç»äº†ä¸€éï¼ŒåŒ…æ‹¬å˜é‡çš„å®šä¹‰ä¸åŸºæœ¬è¿ç®—ï¼Œå¾ªç¯ä¸æ¡ä»¶è¯­å¥ï¼Œå‡½æ•°çš„å®šä¹‰å’Œä½¿ç”¨ï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ç­‰ç­‰ã€‚åŸºäºè¿™äº›å†…å®¹æˆ‘ä»¬å·²ç»èƒ½å†™å¾ˆå¤šå¾ˆå¤šç¨‹åºï¼Œå®ç°å¾ˆå¤šå¾ˆå¤šåŠŸèƒ½äº†ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒPythonä¸­è¿˜æœ‰ä¸€äº›æ¦‚å¿µï¼Œå¦‚è¿­ä»£å™¨ä¸ç”Ÿæˆå™¨ã€é”™è¯¯ä¸å¼‚å¸¸å¤„ç†ã€å‘½åç©ºé—´ã€å¤šçº¿ç¨‹ç­‰ç­‰ï¼Œç”±äºä¸æ˜¯æœ€å¸¸ç”¨çš„ï¼Œæ‰€ä»¥æ²¡ä»‹ç»ï¼Œåé¢æˆ‘ä»¬ç¢°åˆ°äº†å†å­¦ã€‚</p><h2 id="ç®€å•ç»ƒä¹ "><a href="#ç®€å•ç»ƒä¹ " class="headerlink" title="ç®€å•ç»ƒä¹ "></a>ç®€å•ç»ƒä¹ </h2><p>æˆ‘ä»¬å…ˆæ¥åšä¸€äº›åªæ¶‰åŠåˆ°åŸºæœ¬è¯­æ³•çš„ç»ƒä¹ é¢˜ï¼Œé”»ç‚¼ä¸€ä¸‹å¯¹åŸºç¡€çŸ¥è¯†å’Œç¼–ç¨‹æ€ç»´ã€‚</p><p>è¯·å°ä»™å¥³å†™ä¸€æ®µPythonä»£ç ï¼Œåˆ†åˆ«å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li>è¾“å…¥ä¸€ä¸ªå¹´ä»½ï¼Œè¯¥ä»£ç å¯ä»¥åˆ¤æ–­å¹¶è¾“å‡ºè¯¥å¹´æ˜¯å¦ä¸ºé—°å¹´ï¼›</li><li>è¾“å‡ºä¸€ä¸ª10è¡Œçš„æ¨è¾‰ä¸‰è§’ï¼›</li><li>ç»™å®šä¸‰æ¡è¾¹é•¿ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥æ„æˆä¸‰è§’å½¢ï¼›</li><li>æ‰¾åˆ°ä¸€ä¸ªå…¨ä¸ºæ•°å­—çš„listä¸­çš„æœ€å¤§å€¼ã€æœ€å°å€¼ã€å‡å€¼ã€ä¸­å€¼ï¼›</li><li>ç»™å®šä¸€ä¸ªæ—¥æœŸçš„å¹´æœˆæ—¥å€¼ï¼Œè¾“å‡ºè¿™ä¸ªæ—¶æœŸæ˜¯å½“å¹´çš„ç¬¬å‡ å¤©ï¼›</li></ul><h2 id="è¿›é˜¶ç»ƒä¹ "><a href="#è¿›é˜¶ç»ƒä¹ " class="headerlink" title="è¿›é˜¶ç»ƒä¹ "></a>è¿›é˜¶ç»ƒä¹ </h2><p>åœ¨æˆ‘ä»¬å¹³æ—¶å†™ç¨‹åºçš„è¿‡ç¨‹ä¸­ï¼Œå¤§éƒ¨åˆ†æ—¶å€™éƒ½æ˜¯é…ç½®ä¸€äº›ç¯å¢ƒï¼Œå®‰è£…ä¸€äº›åŒ…ï¼Œå¯¼å…¥åŒ…ä¸­çš„ä¸€äº›æ¨¡å—ï¼ŒæŸ¥ä¸€ä¸‹è¿™ä¸ªåŒ…çš„æ–‡æ¡£ï¼Œçœ‹çœ‹æŸä¸ªç±»å’Œæ¥å£æ€ä¹ˆç”¨ï¼Œåšä¸€äº›ç®€å•çš„å¤„ç†ï¼Œå†™ä¸€äº›é€»è¾‘ï¼Œç„¶åå°±å¯ä»¥äº†ã€‚</p><p>æ›´å¸¸è§çš„æƒ…å†µæ˜¯æˆ‘ä»¬æƒ³è¦å®ç°æŸä¸ªç®€å•çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å›¾ç‰‡è¯»å–ï¼Œæˆ–è€…æ–‡ä»¶è¯»å–ï¼Œç„¶åå°±å»ç™¾åº¦æˆ–è€…è°·æ­Œæœç´¢â€œPython å›¾ç‰‡è¯»å–â€ï¼Œâ€œPython æ–‡ä»¶è¯»å–â€ï¼Œçœ‹çœ‹åˆ«äººéƒ½æ˜¯æ€ä¹ˆåšçš„ï¼Œç„¶åå¾—åˆ°ä¸€äº›å¯å‘ï¼Œè¯»æ‡‚å¹¶ä¸”è·‘é€šåˆ«äººçš„ä»£ç ï¼Œçœ‹çœ‹åˆ«äººéƒ½ç”¨äº†ä»€ä¹ˆåŒ…ä»€ä¹ˆæ¥å£ï¼Œç„¶åæœ‰é’ˆå¯¹æ€§åœ°å»å®‰è£…å’Œä½¿ç”¨ã€‚</p><p>æ›´å‰æ²¿çš„å†…å®¹æ¯”å¦‚æœ€æ–°çš„ç ”ç©¶åŠ¨æ€ï¼Œç§‘ç ”æˆæœï¼Œæœ€æ–°ç®—æ³•ï¼Œå¯èƒ½å°±éœ€è¦å»è°·æ­Œå­¦æœ¯æœç´¢ç›¸å…³è®ºæ–‡ï¼Œç„¶åæ‰¾æ‰¾ä½œè€…å…¬å¸ƒçš„æºä»£ç å»è·‘ä¸€ä¸‹è¯•è¯•äº†ã€‚</p><p>å¯¹äºä¸€äº›å·¥ç¨‹æ€§çš„é—®é¢˜ï¼Œæ¯”å¦‚ç”¨Pythonæ­å»ºç½‘ç«™ï¼Œå†™è½¯ä»¶ï¼Œçˆ¬è™«ï¼Œæˆ‘ä»¬éœ€è¦å­¦çš„æ˜¯å¯¹åº”æ¡†æ¶ï¼Œæ¯”å¦‚Djangoï¼ŒQtä¹‹ç±»çš„ï¼Œè¿™äº›ä¸œè¥¿å°±ä¸ä»…è¦æ±‚æˆ‘ä»¬è·‘é€šåˆ«äººçš„ä»£ç ï¼Œè¿˜éœ€è¦å¯¹åˆ«äººçš„ä»£ç æˆ–è€…å·¥ç¨‹æœ‰æ¯”è¾ƒæ·±å…¥çš„ç†è§£ï¼Œä¼šå¥—ç”¨åˆ°æˆ‘ä»¬è‡ªå·±çš„ä½¿ç”¨åœºæ™¯ä¸­ï¼Œä¹Ÿè¦æŒæ¡ä¸€äº›å…¶ä»–ç›¸å…³çš„è¯­è¨€å’ŒæŠ€æœ¯ï¼Œæœ‰åˆ†æå’Œæ¢ç´¢èƒ½åŠ›ã€‚</p><p>æ‰€ä»¥å…¶å®æ²¹æ²¹è®¤ä¸ºï¼Œæœ€é‡è¦çš„æ˜¯<strong>ç™¾åº¦çš„èƒ½åŠ›ï¼Œè¯»ä»£ç çš„èƒ½åŠ›ï¼Œå­¦ä¹ çš„èƒ½åŠ›</strong>ï¼Œå†åŠ ä¸Šä¸€ç‚¹<strong>åˆ›é€ æ€§æ€ç»´</strong>ã€‚</p><p>ä»å¹¿ä¹‰è§’åº¦è®²ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®åœ°çŸ¥é“Pythonå‡ ä¹å¯ä»¥åšä»»ä½•ä½ èƒ½åœ¨ç”µè„‘å’Œæ‰‹æœºä¸Šåšçš„äº‹ï¼Œä»¥åŠåœ¨ç”µè„‘å’Œæ‰‹æœºä¸Šç”¨åˆ°çš„ä¸œè¥¿ï¼›</p><p>ä»ç‹­ä¹‰è§’åº¦è®²ï¼Œæˆ‘ä»¬éœ€è¦ç†Ÿæ‚‰è‡ªå·±æœ€å…³æ³¨çš„åº”ç”¨å’ŒåŠŸèƒ½ï¼Œäº†è§£è‡ªå·±éœ€è¦ç”¨çš„é‚£å‡ ä¸ªåŒ…ï¼Œä¿è¯å¯ä»¥ç”¨Pythonå®ç°è‡ªå·±æƒ³è¦çš„åŠŸèƒ½ï¼Œè®©Pythonä¸ºæˆ‘æ‰€ç”¨ã€‚</p><p><img src="python.jpg" alt="Pythonå¯ä»¥åšä»€ä¹ˆï¼Ÿ"></p><p>ä¸ºäº†ç®€å•é”»ç‚¼è¿™æ–¹é¢çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬æ¥åšå‡ ä¸ªå°ç»ƒä¹ å§ã€‚è¯·å°ä»™å¥³åˆ†åˆ«ä»ç½‘ä¸Šæ‰¾Pythonä»£ç å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ul><li>å†’æ³¡æ’åºï¼›</li><li>åœ¨ä¸€ä¸ªexcelè¡¨æ ¼ä¸­å†™ä¸€è¡Œæ•°å­—ï¼Œç„¶åç”¨Pythonè¯»å…¥è¿™è¡Œæ•°å­—ï¼Œå¹¶ä¸”è¾“å‡ºå‡ºæ¥ï¼›</li><li>å°†Pythonè¯»å…¥çš„è¿™è¡Œexcelæ•°å­—ä½¿ç”¨å†’æ³¡æ’åºè¿›è¡Œæ’åºï¼Œç„¶åè¾“å‡ºç»“æœï¼›</li><li>è¯»å…¥ä¸€å¼ å›¾ç‰‡ï¼Œç„¶åå°†è¿™å¼ å›¾ç‰‡è½¬å˜ä¸ºç°åº¦å›¾åƒï¼Œå¹¶ä¸”åˆ†è¾¨ç‡è°ƒæ•´ä¸ºåŸæ¥çš„ä¸€åŠï¼Œå†ä¿å­˜åˆ°æœ¬åœ°ã€‚</li></ul><p>åœ¨æ‰¾ä»£ç ã€å®ç°è¿™äº›åŠŸèƒ½æ—¶å€™ï¼Œè¯·å°ä»™å¥³æ³¨æ„æ€è€ƒä»¥ä¸‹çš„é—®é¢˜ï¼š</p><ul><li>æ‰¾åˆ°çš„ä»£ç èƒ½è·‘é€šå—ï¼Ÿèƒ½è¯»æ‡‚å—ï¼Ÿå‡ºbugäº†æ€ä¹ˆåŠï¼Ÿ</li><li>ä»£ç ç”¨åˆ°äº†å“ªäº›åŒ…ï¼Œå“ªäº›å‡½æ•°ï¼Ÿè¿™äº›å‡½æ•°çš„æ–‡æ¡£æˆ–ä½¿ç”¨è¯´æ˜åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°ï¼Œæœ‰å“ªäº›å‚æ•°ï¼Œåˆ†åˆ«åšä»€ä¹ˆç”¨ï¼Ÿ</li></ul><h2 id="å¥¥å¡å§†å‰ƒåˆ€åŸåˆ™ä¸ç¼–ç¨‹å“²å­¦"><a href="#å¥¥å¡å§†å‰ƒåˆ€åŸåˆ™ä¸ç¼–ç¨‹å“²å­¦" class="headerlink" title="å¥¥å¡å§†å‰ƒåˆ€åŸåˆ™ä¸ç¼–ç¨‹å“²å­¦"></a>å¥¥å¡å§†å‰ƒåˆ€åŸåˆ™ä¸ç¼–ç¨‹å“²å­¦</h2><p>å¥¥å¡å§†å‰ƒåˆ€æ˜¯ä¸€ä¸ªå“²å­¦å‘½é¢˜ï¼Œæœ€åˆç”±14ä¸–çºªè‹±æ ¼å…°ã€åœ£æ–¹æµå„ä¼šä¿®å£«å¥¥å¡å§†çš„å¨å»‰ï¼ˆWilliam of Occamï¼Œçº¦1285å¹´è‡³1349å¹´ï¼‰æå‡ºã€‚ä»–è¯´ï¼š</p><blockquote><p>åˆ‡å‹¿æµªè´¹è¾ƒå¤šä¸œè¥¿å»åšï¼Œç”¨è¾ƒå°‘çš„ä¸œè¥¿ï¼ŒåŒæ ·å¯ä»¥åšå¥½çš„äº‹æƒ…ã€‚</p><p><em>Numquam ponenda est pluralitas sine necessitate.ï¼ˆ</em>é¿é‡è¶‹è½»ï¼‰</p><p><em>Pluralitas non est ponenda sine necessitate.ï¼ˆ</em>é¿ç¹é€ç®€ï¼‰</p><p><em>Frustra fit per plura quod potest fieri per pauciora.ï¼ˆ</em>ä»¥ç®€å¾¡ç¹ï¼‰</p><p><em>Entia non sunt multiplicanda praeter necessitatem.ï¼ˆ</em>é¿è™šå°±å®ï¼‰</p></blockquote><p>å…¶æ ¸å¿ƒæ€æƒ³æ˜¯â€œå¦‚æ— å¿…è¦ï¼Œå‹¿å¢å®ä½“â€ï¼Œâ€œç®€å•çš„å°±æ˜¯æœ€å¥½çš„â€ã€‚è¿™ä¸€æ€æƒ³åœ¨å“²å­¦ã€ç®¡ç†å­¦ã€è¯­è¨€å­¦ç­‰é¢†åŸŸéƒ½æœ‰åº”ç”¨ã€‚</p><p><img src="ockham.png" alt="å¥¥å¡å§†å‰ƒåˆ€åŸåˆ™"></p><p>åœ¨ç¼–ç¨‹æ–¹é¢ï¼Œç»“åˆæˆ‘çš„ç»éªŒï¼Œæˆ‘ä»¬çš„ç¼–ç¨‹å“²å­¦ä¸»è¦æ˜¯ï¼š</p><ul><li>ä¼—æ‰€å‘¨çŸ¥å¤©ä¸‹æ–‡ç« ä¸€å¤§æŠ„ï¼Œå¤©ä¸‹ä»£ç ä¹Ÿæ˜¯ä¸€å¤§æŠ„ï¼Œå…³é”®åœ¨äºå»å“ªé‡ŒæŠ„ï¼ŒæŠ„ä»€ä¹ˆï¼Œæ€ä¹ˆä¸ºæˆ‘æ‰€ç”¨ï¼›</li><li>ä»æœ€ç®€å•çš„åœ°æ–¹å¼€å§‹å†™å’Œå­¦ï¼›</li><li>æ°¸è¿œç”¨æœ€ç®€å•å¿«æ·çš„æ–¹å¼å®ç°æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½ï¼›</li><li>ä¸€è¾¹å†™ï¼Œä¸€è¾¹å­¦ï¼Œå…ˆå†™åå­¦ï¼Œåœ¨å†™ä¸­å­¦ï¼›</li><li>ç§¯è·¬æ­¥ä»¥è‡³åƒé‡Œï¼Œåœ¨æœ€ç®€å•çš„æ ¸å¿ƒæ¨¡å‹ä¸Šæ·»æåŠ å¶ï¼Œæœ€ç»ˆå®ç°æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½ï¼›</li><li>å†™ä»£ç ä»æ¥éƒ½ä¸æ˜¯æœ€å›°éš¾çš„äº‹æƒ…ï¼Œå›°éš¾çš„äº‹æƒ…æ˜¯ç®—æ³•ï¼Œä»£ç æ˜¯æœåŠ¡äººçš„ï¼Œä¸æ˜¯éš¾ä¸ºäººçš„ï¼›</li><li>ä¸è¦é‡å¤é€ è½®å­ï¼Œä¸€ä¸ªåŠŸèƒ½ä¸è¦åå¤å»å†™ï¼Œå³å¦‚æœä¸šç•Œå·²ç»æœ‰å·¥äººçš„è½¯ä»¶æˆ–è€…åº“ï¼Œä½ åˆçŸ¥é“è‡ªå·±å¾ˆéš¾æ¯”äººå®¶å†™çš„æ›´å¥½ï¼Œé‚£å°±ä¸è¦è‡ªå·±å†å†™ä¸€éäº†ï¼Œé™¤éä½ æ˜¯åœ¨å­¦ä¹ è½®å­ã€‚</li></ul><p>æ¯”å¦‚æˆ‘ä»¬æƒ³å†™ä¸€å°è½¦å‡ºæ¥ï¼Œè¦æƒ³çš„ä¸æ˜¯ä¸€ä¸‹å†™ä¸€å°è½¦ï¼Œè€Œæ˜¯å…ˆå†™ä¸€ä¸ªç›’å­ï¼Œå†å¾€ä¸Šé¢åŠ å››ä¸ªè½®å­ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥è¯´å®ç°äº†ä¸€å°ç©å…·è½¦äº†ã€‚</p><p>åœ¨ç©å…·è½¦çš„åŸºç¡€ä¸ŠåŠ ä¸ŠåŠ¨åŠ›æ¨¡å—ï¼Œå®ƒå°±å¯ä»¥è‡ªå·±è·‘èµ·æ¥ï¼Œå†åŠ ä¸Šåˆ¹è½¦ç³»ç»Ÿè½¬å‘ç³»ç»Ÿï¼Œå°±ä¸å¤±ä¸ºä¸€è¾†è½¦äº†ã€‚ç„¶åæˆ‘ä»¬å†è€ƒè™‘è®¾è®¡ï¼Œå†…é¥°ï¼Œç…§æ˜ç­‰ç­‰å…¶ä»–ä¸œè¥¿ï¼Œé€æ¸å®Œå–„ã€‚</p><p>åˆæ¯”å¦‚æˆ‘ä»¬æƒ³å†™ä¸€ä¸ªç½‘ç«™ï¼Œè¦æƒ³çš„ä¹Ÿä¸æ˜¯ä¸€ä¸‹å†™ä¸€ä¸ªç½‘ç«™å‡ºæ¥ï¼Œè€Œæ˜¯å…ˆå†™ä¸€ä¸ªç½‘é¡µå¹¶ä¸”åœ¨æœ¬åœ°æµè§ˆï¼Œç„¶ååœ¨æœåŠ¡å™¨éƒ¨ç½²æˆåŠŸï¼Œç„¶ååœ¨è¿™ä¸ªç½‘é¡µä¸Šé“¾æ¥å…¶ä»–é¡µé¢ï¼Œè¿™æ ·å°±ä¸å¤±ä¸ºä¸€ä¸ªç½‘ç«™äº†ã€‚ç„¶åæˆ‘ä»¬å†è€ƒè™‘é¡µé¢è®¾è®¡ã€‚</p><p>å½“ç„¶å¦‚æœæˆ‘ä»¬ä»ä¸€å¼€å§‹å°±å‘ç°å·²ç»å­˜åœ¨åˆ«äººå‘å¸ƒçš„ç½‘ç«™æ¨¡æ¿ï¼Œæ¡†æ¶ï¼Œé‚£å°±ä¸è¦çŠ¹è±«ï¼Œç›´æ¥ç”¨åˆ«äººçš„ï¼Œåœ¨åˆ«äººçš„åŸºç¡€ä¸Šåšæ”¹åŠ¨ï¼ŒèŠ‚çœè‡ªå·±çš„æ—¶é—´ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç®€å•çš„Pythonå…¥é—¨æ•™å­¦å°±å®Œæˆå•¦ï¼Œä»¥åæœ‰åˆ«çš„å†…å®¹æˆ‘ä»¬å†åšè¡¥å……ã€‚</p><p>æœ€åå¸Œæœ›å°ä»™å¥³èƒ½åœ¨å­¦ä¸­ç”¨ï¼Œåœ¨ç”¨ä¸­å­¦ï¼Œå¤šåŠ¨æ‰‹ï¼Œå­¦çš„å¼€å¿ƒï¼Œç”¨çš„å¼€å¿ƒï¼Œå¿«ä¹ç§‘ç ”ï¼Œå¿«ä¹ç”Ÿæ´»ï¼Œæ²¡æœ‰bugï¼Œæ²¡æœ‰çƒ¦æ¼ï¼</p><p><img src="doit.jpg" alt="You can do it!"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythoné¢å‘å¯¹è±¡</title>
      <link href="/2021/09/04/Python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"/>
      <url>/2021/09/04/Python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="Pythoné¢å‘å¯¹è±¡"><a href="#Pythoné¢å‘å¯¹è±¡" class="headerlink" title="Pythoné¢å‘å¯¹è±¡"></a>Pythoné¢å‘å¯¹è±¡</h1><p>æˆ‘ä»¬å‰é¢ä»‹ç»çš„æ•°æ®ç»“æ„å’Œè¿ç®—éƒ½æ˜¯<strong>é¢å‘è¿‡ç¨‹</strong>çš„ï¼Œè€ŒPythonæœ¬èº«è®¾è®¡ä¹‹åˆå°±æ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œæœ¬èŠ‚æˆ‘ä»¬å­¦ä¹ Pythonä¸­çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚</p><h2 id="é¢å‘è¿‡ç¨‹VSé¢å‘å¯¹è±¡"><a href="#é¢å‘è¿‡ç¨‹VSé¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘è¿‡ç¨‹VSé¢å‘å¯¹è±¡"></a>é¢å‘è¿‡ç¨‹VSé¢å‘å¯¹è±¡</h2><p>é¢å‘è¿‡ç¨‹æ˜¯ä»¥äº‹ä»¶ä¸ºä¸­å¿ƒçš„ç¼–ç¨‹æ€æƒ³ï¼ŒæŒ‰ç…§å®Œæˆè¿™ä»¶äº‹éœ€è¦çš„æ‰€æœ‰æ­¥éª¤ï¼Œå¼ºè°ƒæŒ‰éƒ¨å°±ç­ï¼Œä¸€ä¸ªå‡½æ•°ä¸€ä¸ªå‡½æ•°ã€ä¸€ä¸ªè¯­å¥ä¸€ä¸ªè¯­å¥çš„é¡ºåºæ‰§è¡Œã€‚</p><p>ä»¥ä¸‹äº”å­æ£‹ä¸ºä¾‹ï¼Œä¸€ä¸ªä¸‹äº”å­æ£‹çš„é¢å‘è¿‡ç¨‹ç¨‹åºå¤§çº¦éœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>å¼€å§‹æ¸¸æˆï¼›</li><li>é»‘å­å…ˆè¡Œï¼Œç»˜åˆ¶é»‘å­è½å­åçš„ç”»é¢ï¼›</li><li>åˆ¤æ–­è¾“èµ¢æƒ…å†µï¼Œå¦‚æœé»‘å­èµ¢äº†å°±è·³åˆ°æœ€åä¸€æ­¥ï¼›</li><li>ç™½å­å†è¡Œï¼Œç»˜åˆ¶ç™½å­è½å­åçš„ç”»é¢ï¼›</li><li>åˆ¤æ–­è¾“èµ¢æƒ…å†µï¼Œå¦‚æœç™½å­èµ¢äº†å°±è·³åˆ°æœ€åä¸€æ­¥ï¼›</li><li>è¿”å›ç¬¬äºŒæ­¥ï¼›</li><li>è¾“å‡ºæœ€åç»“æœã€‚</li></ol><p>è€Œé¢å‘å¯¹è±¡çš„äº”å­æ£‹ç¨‹åºä¼šé¦–å…ˆè®¾è®¡ä¸‰ç§äº’ç›¸ç‹¬ç«‹çš„å¯¹è±¡ï¼š</p><ol><li>æ£‹æ‰‹ï¼ŒåŒ…æ‹¬é»‘å­å’Œç™½å­ï¼Œè´Ÿè´£æ¥æ”¶ç”¨æˆ·çš„è¾“å…¥ï¼Œå¹¶å‘ŠçŸ¥æ£‹ç›˜ç³»ç»Ÿæ£‹å­å¸ƒå±€çš„å˜åŒ–ï¼›</li><li>æ£‹ç›˜ç³»ç»Ÿï¼Œè´Ÿè´£æ¥æ”¶æ£‹æ‰‹ä¼ é€’çš„ç”¨æˆ·è½å­æƒ…å†µï¼Œç„¶åç»˜åˆ¶ç”»é¢ï¼Œåœ¨å±å¹•æ˜¾ç¤ºï¼›</li><li>æ¸¸æˆè§„åˆ™ï¼Œè´Ÿè´£æ ¹æ®æ£‹ç›˜æƒ…å†µåˆ¤å®šè¾“èµ¢ã€‚</li></ol><p>çœ‹èµ·æ¥æ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œåªæ˜¯å¯¹é¢å‘è¿‡ç¨‹çš„å†…å®¹åšäº†ä¸€äº›å°è£…ï¼Œç„¶è€Œå¦‚æœæˆ‘ä»¬è¦å†™çš„ä»£ç æ˜¯è¿è¡Œä¸€ä¸ªå…¬å¸å‘¢ï¼Ÿæ¯ä¸ªè¡Œä¸ºæ–¹çš„è¡Œä¸ºè§„åˆ™å’Œå’Œå±æ€§å¯èƒ½éƒ½å¤æ‚åˆ°é¢å‘è¿‡ç¨‹éš¾ä»¥æè¿°ï¼Œæè¿°äº†åˆ«äººä¹Ÿéš¾ä»¥å¿«é€Ÿçœ‹æ‡‚ã€å¿«é€Ÿä¿®æ”¹å’Œæ‰©å±•ã€‚</p><p>é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æå¤§æé«˜äº†ä»£ç çš„å¯æ‰©å±•æ€§å’Œå¤ç”¨æ€§ï¼Œé™ä½äº†ç»´æŠ¤éš¾åº¦ï¼Œåœ¨å†™ä¸€äº›å¤§å‹çš„å·¥ç¨‹æ—¶å…·æœ‰å¾ˆæ˜æ˜¾çš„ä¼˜åŠ¿ï¼ŒäºŒè€…å¯¹æ¯”å¦‚ä¸‹è¡¨ã€‚</p><table><thead><tr><th align="center">é¢å‘è¿‡ç¨‹</th><th align="center">é¢å‘å¯¹è±¡</th></tr></thead><tbody><tr><td align="center">é«˜è€¦åˆ</td><td align="center">ä½è€¦åˆ</td></tr><tr><td align="center">é«˜æ•ˆç‡ï¼Œä½å¼€é”€ï¼Œä½å¯è¯»æ€§</td><td align="center">ä½æ•ˆç‡ï¼Œé«˜å¼€é”€ï¼Œé«˜å¯è¯»æ€§</td></tr><tr><td align="center">éš¾ç»´æŠ¤ï¼Œéš¾æ‰©å±•</td><td align="center">æ˜“ç»´æŠ¤ï¼Œæ˜“æ‰©å±•</td></tr></tbody></table><h2 id="é¢å‘å¯¹è±¡ç®€ä»‹"><a href="#é¢å‘å¯¹è±¡ç®€ä»‹" class="headerlink" title="é¢å‘å¯¹è±¡ç®€ä»‹"></a>é¢å‘å¯¹è±¡ç®€ä»‹</h2><p>é¢å‘å¯¹è±¡æŠ€æœ¯ä¸­ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š</p><ul><li><strong>ç±»ï¼ˆClassï¼‰ï¼š</strong> ç”¨æ¥æè¿°å…·æœ‰ç›¸åŒçš„å±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡çš„é›†åˆã€‚å®ƒå®šä¹‰äº†è¯¥é›†åˆä¸­æ¯ä¸ªå¯¹è±¡æ‰€å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼›</li><li><strong>å¯¹è±¡ï¼ˆObjectï¼‰ï¼š</strong>æ˜¯ç±»çš„å®ä¾‹ï¼›</li><li><strong>æ–¹æ³•ï¼š</strong>ç±»ä¸­å®šä¹‰çš„å‡½æ•°ï¼›</li><li><strong>å®ä¾‹å˜é‡ï¼š</strong>å®ä¾‹å˜é‡æŒ‡çš„æ˜¯åœ¨ä»»æ„ç±»æ–¹æ³•å†…éƒ¨ï¼Œä»¥â€œself.å˜é‡åâ€çš„æ–¹å¼å®šä¹‰çš„å˜é‡ï¼Œå…¶ç‰¹ç‚¹æ˜¯åªä½œç”¨äºè°ƒç”¨æ–¹æ³•çš„å¯¹è±¡ã€‚å¦å¤–ï¼Œå®ä¾‹å˜é‡åªèƒ½é€šè¿‡å¯¹è±¡åè®¿é—®ï¼Œæ— æ³•é€šè¿‡ç±»åè®¿é—®ï¼›</li><li><strong>ç±»å˜é‡ï¼š</strong>ç±»å˜é‡æŒ‡çš„æ˜¯åœ¨ç±»ä¸­ï¼Œä½†åœ¨å„ä¸ªç±»æ–¹æ³•å¤–å®šä¹‰çš„å˜é‡ï¼Œæ‰€æœ‰ç±»çš„å®ä¾‹åŒ–å¯¹è±¡éƒ½åŒæ—¶å…±äº«ç±»å˜é‡ï¼Œå¯ä»¥é€šè¿‡ç±»åæˆ–è€…å¯¹è±¡åè¿›è¡Œè®¿é—®ï¼›</li><li><strong>ä¿æŠ¤ï¼š</strong>åŒ…æ‹¬ä¿æŠ¤å˜é‡å’Œä¿æŠ¤æ–¹æ³•ã€‚ä»¥å•ä¸‹åˆ’çº¿å¼€å¤´ï¼Œè¡¨ç¤ºè¢«ä¿æŠ¤çš„å˜é‡å’Œæ–¹æ³•åªå…è®¸ç±»åŠå…¶å­ç±»ä½¿ç”¨ï¼Œåœ¨ä½¿ç”¨ä¸­ä¸æ™®é€šå˜é‡æ²¡ä»€ä¹ˆåŒºåˆ«ï¼›</li><li><strong>ç§æœ‰ï¼š</strong>åŒ…æ‹¬ç§æœ‰å˜é‡å’Œç§æœ‰æ–¹æ³•ã€‚ç§æœ‰å˜é‡å’Œç§æœ‰æ–¹æ³•åªæœ‰ç±»ä¸­å®šä¹‰çš„æ–¹æ³•å¯ä»¥è®¿é—®ï¼Œå­ç±»ä¸å¯ä»¥è®¿é—®ï¼›</li><li><strong>å®ä¾‹åŒ–ï¼š</strong>åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œç±»çš„å…·ä½“å¯¹è±¡ï¼›</li><li><strong>ç»§æ‰¿ï¼š</strong>å³ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼ˆderived classï¼‰ç»§æ‰¿åŸºç±»ï¼ˆbase classï¼‰çš„å­—æ®µå’Œæ–¹æ³•ã€‚</li></ul><p>æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªç®€å•çš„ç±»ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">People</span><span class="token punctuation">:</span>    <span class="token comment"># id æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»å˜é‡</span>    <span class="token builtin">id</span> <span class="token operator">=</span> <span class="token number">1</span>    <span class="token comment"># å•ä¸‹åˆ’çº¿å¼€å¤´çš„æ˜¯ä¿æŠ¤å˜é‡ï¼Œ_protected1æ˜¯å—ä¿æŠ¤çš„ç±»å˜é‡</span>    <span class="token comment"># ä¿æŠ¤å˜é‡è¡¨ç¤ºåªå…è®¸ç±»åŠå…¶å­ç±»ä½¿ç”¨ï¼Œç„¶è€Œåœ¨ä½¿ç”¨ä¸­ä¸æ™®é€šå˜é‡æ²¡ä»€ä¹ˆåŒºåˆ«</span>    _protected1 <span class="token operator">=</span> <span class="token number">2</span>    <span class="token comment"># åŒä¸‹åˆ’çº¿å¼€å¤´çš„æ˜¯ç§æœ‰å˜é‡ï¼Œ__private1æ˜¯ç§æœ‰çš„ç±»å˜é‡</span>    <span class="token comment"># ç§æœ‰å˜é‡åªæœ‰ç±»ä¸­å®šä¹‰çš„æ–¹æ³•å¯ä»¥è®¿é—®ï¼Œå­ç±»ä¸å¯ä»¥è®¿é—®</span>    __private1 <span class="token operator">=</span> <span class="token number">3</span>    <span class="token comment"># __init__()æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå®åœ¨ä¸€ä¸ªç±»è¿›è¡Œå®ä¾‹åŒ–çš„æ—¶å€™è‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥å‚æ•°</span>    <span class="token comment"># ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´ä¸”ä»¥åŒä¸‹åˆ’çº¿ç»“å°¾çš„å‡½æ•°åœ¨Pythonä¸­è¡¨ç¤ºç‰¹æ®ŠåŠŸèƒ½çš„å‡½æ•°ï¼Œæˆ‘ä»¬åœ¨å†™ä»£ç æ—¶å°½é‡ä¸è¦å†™è¿™ç§å½¢å¼çš„å‡½æ•°å</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> para1<span class="token punctuation">,</span> para2<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># name gender æ˜¯å®ä¾‹å˜é‡</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> para1        self<span class="token punctuation">.</span>gender <span class="token operator">=</span> para2        <span class="token comment"># _protected2æ˜¯å—ä¿æŠ¤çš„å®ä¾‹å˜é‡</span>        self<span class="token punctuation">.</span>_protected2 <span class="token operator">=</span> <span class="token boolean">True</span>        <span class="token comment"># __private2æ˜¯ç§æœ‰çš„ç±»å˜é‡</span>        self<span class="token punctuation">.</span>__private2 <span class="token operator">=</span> <span class="token boolean">True</span>    <span class="token comment"># ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç±»ä¸­å®šä¹‰çš„æ–¹æ³•çš„å‚æ•°éƒ½å¿…é¡»åŒ…å«selfä¸”ä»¥selfå¼€å¤´</span>    <span class="token comment"># selfè¡¨ç¤ºçš„æ˜¯å®ä¾‹åŒ–çš„å¯¹è±¡</span>    <span class="token keyword">def</span> <span class="token function">prtname</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>    <span class="token comment"># ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•</span>    <span class="token keyword">def</span> <span class="token function">prtgender</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>gender<span class="token punctuation">)</span>    <span class="token comment"># ç§æœ‰å˜é‡åªæœ‰ç±»ä¸­å®šä¹‰çš„æ–¹æ³•å¯ä»¥è®¿é—®1</span>    <span class="token keyword">def</span> <span class="token function">prtprivate</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__private1<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__private2<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">_prtgender</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>gender<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__privatefunc</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__private1<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__private2<span class="token punctuation">)</span><span class="token comment"># å®ä¾‹åŒ–Peopleç±»ï¼Œå¾—åˆ°ä¸€ä¸ªå¯¹è±¡x</span>x <span class="token operator">=</span> People<span class="token punctuation">(</span><span class="token string">"gs"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">)</span><span class="token comment"># è°ƒç”¨ç±»å˜é‡å¯ä»¥é€šè¿‡å¯¹è±¡å’Œç±»</span><span class="token keyword">print</span><span class="token punctuation">(</span>People<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>People<span class="token punctuation">.</span>_protected1<span class="token punctuation">)</span><span class="token comment"># ä¸‹é¢æ³¨é‡Šæ‰çš„å‡ å¥æ˜¯é”™è¯¯çš„</span><span class="token comment"># print(People.__private1)</span><span class="token comment"># print(People.name)</span><span class="token comment"># print(People.gender)</span><span class="token comment"># print(People._protected2)</span><span class="token comment"># print(People.__private2)</span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>_protected1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>gender<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>_protected2<span class="token punctuation">)</span><span class="token comment"># ä¸‹é¢æ³¨é‡Šæ‰çš„æ˜¯é”™è¯¯çš„</span><span class="token comment"># print(x.__private1)</span><span class="token comment"># print(x.__private2)</span><span class="token comment"># Pythonå¹¶æ²¡æœ‰ä»è¯­æ³•ä¸Šä¸¥æ ¼ä¿è¯ç§æœ‰å±æ€§æˆ–æ–¹æ³•çš„ç§å¯†æ€§</span><span class="token comment"># Pythonè¿˜æä¾›äº†ä¸€ç§ä½œå¼Šçš„æ–¹æ³•ç”¨äºè®¿é—®ç§æœ‰å˜é‡ï¼ŒPythonå¯„å¸Œæœ›äºä½¿ç”¨è€…è‡ªè§‰éµå®ˆè§„åˆ™å¹¶ä¸ºè‡ªå·±çš„è¡Œä¸ºè´Ÿè´£ã€‚</span><span class="token comment">#â€œWe are all consenting adults hereâ€</span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>_People__private1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>_People__private2<span class="token punctuation">)</span><span class="token comment"># è°ƒç”¨ç±»ä¸­çš„æ–¹æ³•</span>x<span class="token punctuation">.</span>prtname<span class="token punctuation">(</span><span class="token punctuation">)</span>x<span class="token punctuation">.</span>prtgender<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># privateå˜é‡åªæœ‰ç±»ä¸­å®šä¹‰çš„æ–¹æ³•å¯ä»¥è°ƒç”¨</span>x<span class="token punctuation">.</span>prtprivate<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ®µä»£ç çš„æ³¨é‡Šä¸­åŸºæœ¬å†™æ˜äº†å„ç§å˜é‡å’Œå‡½æ•°çš„ç”¨æ³•ã€‚ä¸‹é¢æˆ‘ä»¬å­¦ä¹ ç»§æ‰¿çš„æ¦‚å¿µï¼Œå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£ç±»çš„ç”¨æ³•ã€‚</p><h2 id="ç±»çš„ç»§æ‰¿"><a href="#ç±»çš„ç»§æ‰¿" class="headerlink" title="ç±»çš„ç»§æ‰¿"></a>ç±»çš„ç»§æ‰¿</h2><p>ä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿å¦ä¸€ä¸ªç±»ï¼Œå¦‚ç±»Studentå¯ä»¥ç»§æ‰¿ç±»Peopleï¼Œæ­¤æ—¶Studentç§°ä¸ºå­ç±»ï¼ŒPeopleç§°ä¸ºçˆ¶ç±»ã€‚å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„æ™®é€šå˜é‡ä¸æ–¹æ³•ï¼Œä»¥åŠä¿æŠ¤å˜é‡ä¸æ–¹æ³•ã€‚</p><p>ç°åœ¨æˆ‘ä»¬åŸºäºä¸Šä¸€å°èŠ‚çš„ä»£ç ç»§ç»­å¾€ä¸‹å†™ä¸€ä¸ªPeopleç±»çš„å­ç±»Studentï¼Œçœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç ä¸­ï¼Œä¸ºä»€ä¹ˆæœ‰çš„è°ƒç”¨æ­£ç¡®ï¼Œæœ‰çš„è°ƒç”¨é”™è¯¯ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>People<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> para1<span class="token punctuation">,</span> para2<span class="token punctuation">,</span> para3<span class="token punctuation">)</span><span class="token punctuation">:</span>        People<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">,</span> para1<span class="token punctuation">,</span> para2<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>school <span class="token operator">=</span> para3s <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">"gs"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>school<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>_protected1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>gender<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>_protected2<span class="token punctuation">)</span>s<span class="token punctuation">.</span>prtnames<span class="token punctuation">.</span>_prtgender<span class="token punctuation">(</span><span class="token punctuation">)</span>s<span class="token punctuation">.</span>prtprivate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># ä¸‹é¢æ³¨é‡Šæ‰çš„å‡ å¥æ˜¯é”™è¯¯çš„</span><span class="token comment"># print(s.__private1)</span><span class="token comment"># print(s.__private2)</span><span class="token comment"># s.__privatefunc()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“ç„¶ï¼Œä¸€ä¸ªç±»å¯ä»¥æœ‰å¾ˆå¤šä¸ªå­ç±»ï¼Œå­ç±»è¿˜å¯ä»¥æœ‰å­ç±»ï¼Œå¯ä»¥æ— é™ç»§æ‰¿ä¸‹å»ã€‚</p><p>ä¸€ä¸ªå­ç±»ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªçˆ¶ç±»ï¼Œåœ¨åˆå§‹åŒ–æ—¶éœ€è¦å¯¹å„ä¸ªçˆ¶ç±»éƒ½åšåˆå§‹åŒ–ã€‚</p><p>å¦å¤–å¦‚æœå­ç±»ä¸­å®šä¹‰äº†ä¸çˆ¶ç±»ç›¸åŒåç§°çš„å‡½æ•°ï¼Œåœ¨å­ç±»çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå°±ä¼šä¼˜å…ˆè°ƒç”¨å­ç±»ä¸­çš„è¯¥å‡½æ•°ï¼Œè¿™å°±æ˜¯â€œå¤šæ€â€ã€‚å³ï¼Œå¯¹äºçˆ¶ç±»çš„æ–¹æ³•ï¼Œä¸€ä¸ªå­ç±»å¯ä»¥åšæ— é™ä¿®æ”¹ï¼Œè€Œä¸å½±å“å…¶ä»–å­ç±»ï¼Œä¹Ÿä¸å½±å“ä¾èµ–äºè¯¥çˆ¶ç±»å’Œè¯¥æ–¹æ³•çš„å…¶ä»–å‡½æ•°ã€‚</p><p>ä»¥ä¸€å¼ å›¾ç»“æŸæœ¬èŠ‚è¯¾ç¨‹å§ï¼Œä¸çŸ¥é“å°ä»™å¥³æœ‰æ²¡æœ‰æ‡‚é‚£ä¹ˆä¸€ä¸¢ä¸¢å‘€<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p><img src="oopxxx.png" alt="é¢å‘å¯¹è±¡"></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonä¸­çš„å‡½æ•°</title>
      <link href="/2021/09/02/Python%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0/"/>
      <url>/2021/09/02/Python%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="Pythonä¸­çš„å‡½æ•°"><a href="#Pythonä¸­çš„å‡½æ•°" class="headerlink" title="Pythonä¸­çš„å‡½æ•°"></a>Pythonä¸­çš„å‡½æ•°</h1><p>å‡½æ•°æ˜¯ç»„ç»‡å¥½çš„ï¼Œå¯é‡å¤ä½¿ç”¨çš„ï¼Œç”¨æ¥å®ç°å•ä¸€ï¼Œæˆ–ç›¸å…³è”åŠŸèƒ½çš„ä»£ç æ®µã€‚å‡½æ•°èƒ½æé«˜åº”ç”¨çš„æ¨¡å—æ€§ï¼Œå’Œä»£ç çš„é‡å¤åˆ©ç”¨ç‡ã€‚</p><p>Pythonæä¾›äº†è®¸å¤šå†…å»ºå‡½æ•°ï¼Œæ¯”å¦‚print()ã€‚æˆ‘ä»¬å¯ä»¥è‡ªå·±åˆ›å»ºå‡½æ•°ï¼Œè¿™å°±æ˜¯è‡ªå®šä¹‰å‡½æ•°ã€‚å­¦ä¹ è‡ªå®šä¹‰å‡½æ•°å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£Pythonä¸­çš„å‡½æ•°ã€‚</p><h2 id="è‡ªå®šä¹‰å‡½æ•°"><a href="#è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="è‡ªå®šä¹‰å‡½æ•°"></a>è‡ªå®šä¹‰å‡½æ•°</h2><p>æˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼š</p><ul><li>ä»¥ <strong>def</strong> å…³é”®è¯å¼€å¤´ï¼Œåæ¥å‡½æ•°æ ‡è¯†ç¬¦åç§°å’Œåœ†æ‹¬å·**()**ï¼›</li><li>åœ†æ‹¬å·é‡Œé¢å†™ä¸Šæ­¤è‡ªå®šä¹‰å‚æ•°æ‰§è¡Œæ‰€éœ€è¦çš„å‚æ•°ï¼Œåœ†æ‹¬å·ç»“æŸåè¦è·Ÿå†’å·â€œ**:**â€ï¼›</li><li><strong>return [è¡¨è¾¾å¼]</strong> ç»“æŸå‡½æ•°ï¼Œå¯ä»¥é€‰æ‹©æ€§åœ°è¿”å›ä¸€ä¸ªå€¼ç»™å‡½æ•°è°ƒç”¨æ–¹ï¼Œä¸å¸¦è¡¨è¾¾å¼çš„ return ç›¸å½“äºè¿”å› Noneã€‚</li></ul><p><img src="%E5%87%BD%E6%95%B0.png" alt="è‡ªå®šä¹‰å‡½æ•°"></p><h2 id="ä¸¾ä¸€ä¸ªæ —å­"><a href="#ä¸¾ä¸€ä¸ªæ —å­" class="headerlink" title="ä¸¾ä¸€ä¸ªæ —å­"></a>ä¸¾ä¸€ä¸ªæ —å­</h2><p>æˆ‘ä»¬æ¥å»ºç«‹ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°è¾“å‡ºâ€Beautiful fairy, happy fairy!â€</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">fairy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Beautiful fairy, happy fairy!"</span><span class="token punctuation">)</span>fairy<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•å‘€ï¼Œå°ä»™å¥³<span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><h2 id="å†ä¸¾ä¸€ä¸ªæ —å­"><a href="#å†ä¸¾ä¸€ä¸ªæ —å­" class="headerlink" title="å†ä¸¾ä¸€ä¸ªæ —å­"></a>å†ä¸¾ä¸€ä¸ªæ —å­</h2><p>æˆ‘ä»¬æ¥è‡ªå®šä¹‰ä¸€ä¸ªå…·æœ‰å‚æ•°çš„å‡½æ•°</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">max</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> a <span class="token operator">&gt;</span> b<span class="token punctuation">:</span>        <span class="token keyword">return</span> a    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> b a <span class="token operator">=</span> <span class="token number">4</span>b <span class="token operator">=</span> <span class="token number">5</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç›¸å½“äºæˆ‘ä»¬è‡ªå®šä¹‰çš„ä¸€ä¸ªæ¯”è¾ƒå¤§å°çš„å‡½æ•°å•¦ã€‚</p><h2 id="å¯å˜å¯¹è±¡ä¸ä¸å¯å˜å¯¹è±¡"><a href="#å¯å˜å¯¹è±¡ä¸ä¸å¯å˜å¯¹è±¡" class="headerlink" title="å¯å˜å¯¹è±¡ä¸ä¸å¯å˜å¯¹è±¡"></a>å¯å˜å¯¹è±¡ä¸ä¸å¯å˜å¯¹è±¡</h2><p>åœ¨Pythonä¸­ï¼Œå­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå…ƒç»„ç­‰æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œè€Œåˆ—è¡¨ï¼Œå­—å…¸ç­‰æ˜¯å¯å˜å¯¹è±¡ï¼š</p><ul><li>ä¸å¯å˜å¯¹è±¡åœ¨é‡æ–°èµ‹å€¼æ—¶ï¼Œå¦‚å˜é‡èµ‹å€¼ <strong>a=5</strong> åå†èµ‹å€¼ <strong>a=10</strong>ï¼Œå®é™…æ˜¯æ–°ç”Ÿæˆä¸€ä¸ª int ç±»å‹çš„å¯¹è±¡ 10ï¼Œå†è®© a æŒ‡å‘å®ƒï¼Œè€Œ 5 è¢«ä¸¢å¼ƒï¼Œè€Œéæ”¹å˜ a çš„å€¼ï¼›</li><li>å¯å˜å¯¹è±¡åœ¨é‡æ–°èµ‹å€¼æ—¶ï¼Œå¦‚å˜é‡èµ‹å€¼ <strong>la=[1,2,3,4]</strong> åå†èµ‹å€¼ <strong>la[2]=5</strong> åˆ™æ˜¯å°†laçš„ç¬¬ä¸‰ä¸ªå…ƒç´ å€¼æ›´æ”¹ï¼Œæœ¬èº«laæ²¡æœ‰åŠ¨ï¼Œåªæ˜¯å…¶å†…éƒ¨çš„ä¸€éƒ¨åˆ†å€¼è¢«ä¿®æ”¹äº†ã€‚</li></ul><p>å› æ­¤åœ¨å‡½æ•°è°ƒç”¨ä¸­ä¼ é€’å‚æ•°æ—¶ï¼š</p><ul><li>å¦‚æœä¼ é€’äº†ä¸å¯å˜å¯¹è±¡ï¼Œåˆ™å‡½æ•°ä¸­å¯¹è¯¥å¯¹è±¡åšçš„ä¿®æ”¹ï¼Œä¸ä¼šå½±å“åŸå¯¹è±¡ï¼›</li><li>å¦‚æœä¼ é€’äº†å¯å˜å¯¹è±¡ï¼Œåˆ™å‡½æ•°ä¸­å¯¹è¯¥å¯¹è±¡çš„ä¿®æ”¹ï¼Œä¼šå½±å“åŸå¯¹è±¡ã€‚</li></ul><p>çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­å°±æ˜ç™½å•¦ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">changenum</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>    a <span class="token operator">=</span> <span class="token number">10</span>    <span class="token keyword">return</span><span class="token keyword">def</span> <span class="token function">changelist</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>    x<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">return</span>a <span class="token operator">=</span> <span class="token number">1</span>changenum<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>changelist<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æŒ‡å®šå…³é”®å­—çš„å‡½æ•°è°ƒç”¨"><a href="#æŒ‡å®šå…³é”®å­—çš„å‡½æ•°è°ƒç”¨" class="headerlink" title="æŒ‡å®šå…³é”®å­—çš„å‡½æ•°è°ƒç”¨"></a>æŒ‡å®šå…³é”®å­—çš„å‡½æ•°è°ƒç”¨</h2><p>ä¸Šæ–‡ä¸­æˆ‘ä»¬å†™çš„å‡½æ•°éƒ½æ²¡æœ‰æŒ‡å®šå…³é”®å­—ï¼Œå¯¹å‚æ•°çš„è°ƒç”¨ä¹Ÿæ˜¯æŒ‰é¡ºåºè¾“å…¥å¹¶è°ƒç”¨çš„ã€‚ç°åœ¨æˆ‘ä»¬æ¥çœ‹è¿™æ ·çš„ä¸€ä¸ªä¾‹å­ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">printinfo</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"å§“å: "</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"å¹´é¾„: "</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span>   <span class="token keyword">return</span> printinfo<span class="token punctuation">(</span>age<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">"little fairy"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸Šä»£ç çš„è¾“å‡ºç»“æœåº”è¯¥ä¸ºï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">å§“å:  little fairyå¹´é¾„:  18<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™ä¸ªä¾‹å­å‘Šè¯‰æˆ‘ä»¬ï¼Œå¯ä»¥å€Ÿç”¨å‡½æ•°ä¸­çš„å…³é”®å­—ï¼Œç¡®å®šæŠŠè°ƒç”¨æ—¶çš„å‚æ•°ä¼ é€’ç»™å‡½æ•°é‡Œçš„å“ªä¸ªå˜é‡ï¼Œåˆ¶å®šäº†å…³é”®å­—å°±ä¸ç”¨ä¸¥æ ¼æŒ‰ç…§è°ƒç”¨é¡ºåºã€‚</p><h2 id="ç¼ºçœå‚æ•°"><a href="#ç¼ºçœå‚æ•°" class="headerlink" title="ç¼ºçœå‚æ•°"></a>ç¼ºçœå‚æ•°</h2><p>ç¼ºçœå‚æ•°æŒ‡çš„æ˜¯å‡½æ•°å®šä¹‰æ—¶æ‰€è®¾ç½®çš„é»˜è®¤å‚æ•°å€¼ï¼Œå¦‚æœè°ƒç”¨æ—¶ä¸ä¼ å…¥å¯¹åº”å€¼ï¼Œå°±ä¼šä½¿ç”¨é»˜è®¤å‚æ•°ã€‚æ¥çœ‹ä¾‹å­ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">printinfo</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"å§“å: "</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"å¹´é¾„: "</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span>   <span class="token keyword">return</span> printinfo<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"little fairy"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰çš„printinfo()å‡½æ•°ä¸­çš„ageå‚æ•°å°±è®¾ç½®äº†ç¼ºçœå€¼18ï¼Œå³ä½¿è°ƒç”¨æ—¶ä¸è¾“å…¥ageå‚æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç¼ºçœå€¼ã€‚</p><h2 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h2><p>Pythonä¸­æœ‰ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°å³åŒ¿åå‡½æ•°ï¼Œå®ƒçš„å®šä¹‰å½¢å¼éå¸¸ç®€å•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">lambda</span> <span class="token punctuation">[</span>arg1 <span class="token punctuation">[</span><span class="token punctuation">,</span>arg2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>argn<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>expression<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å†’å·å‰é¢æ˜¯å‡½æ•°å‚æ•°ï¼Œåé¢æ˜¯å‡½æ•°è¿”å›å€¼ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">mysum <span class="token operator">=</span> <span class="token keyword">lambda</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">:</span> arg1 <span class="token operator">+</span> arg2<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"ç›¸åŠ åçš„å€¼ä¸º: "</span><span class="token punctuation">,</span> mysum<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"ç›¸åŠ åçš„å€¼ä¸º: "</span><span class="token punctuation">,</span> mysum<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ˜¯ä¸€ç§åŒ¿åå‡½æ•°ä½¿ç”¨æ–¹å¼ï¼Œè¿˜æœ‰å¦ä¸€ç§æ›´å¸¸è§çš„ä½¿ç”¨æ–¹å¼ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x <span class="token operator">*</span> x<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å…³äºå‡½æ•°æˆ‘ä»¬å°±ä»‹ç»è¿™ä¹ˆå¤šå•¦ï¼Œåé¢æˆ‘ä»¬çœ‹æƒ…å†µå†å­¦ä¹ å§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çˆ±ï¼ˆç½—ä¼ŠÂ·å…‹é‡Œå¤«ç‰¹ï¼‰</title>
      <link href="/2021/09/01/%E7%88%B1%EF%BC%88%E7%BD%97%E4%BC%8A%C2%B7%E5%85%8B%E9%87%8C%E5%A4%AB%E7%89%B9%EF%BC%89/"/>
      <url>/2021/09/01/%E7%88%B1%EF%BC%88%E7%BD%97%E4%BC%8A%C2%B7%E5%85%8B%E9%87%8C%E5%A4%AB%E7%89%B9%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="çˆ±ï¼ˆç½—ä¼ŠÂ·å…‹é‡Œå¤«ç‰¹ï¼‰"><a href="#çˆ±ï¼ˆç½—ä¼ŠÂ·å…‹é‡Œå¤«ç‰¹ï¼‰" class="headerlink" title="çˆ±ï¼ˆç½—ä¼ŠÂ·å…‹é‡Œå¤«ç‰¹ï¼‰"></a>çˆ±ï¼ˆç½—ä¼ŠÂ·å…‹é‡Œå¤«ç‰¹ï¼‰</h1><p>ã€Šçˆ±ã€‹æ˜¯æ˜¯è¯—äººç½—ä¼ŠÂ·å…‹é‡Œå¤«ç‰¹çš„ä¸€é¦–è¯—ã€‚ç½—ä¼Šåœ¨1979å¹´è‡ªè´¹å‡ºç‰ˆäº†ä¸€æœ¬28é¡µçš„è¯—é›†ï¼Œå…¶ä¸­æœ€æœ‰åçš„è¯—å°±æ˜¯ã€Šçˆ±ã€‹ã€‚</p><p>2016å¹´5æœˆ22æ—¥ï¼Œè…¾è®¯è§†é¢‘æ’­å‡º<a href="https://v.qq.com/x/page/w030150d9hg.html">â€œè´è¶ä¸ºä½ æœ—è¯»ç¬¬487æœŸï¼šçˆ± ç½—ä¼Šå…‹é‡Œå¤«ç‰¹ä½œå“â€ã€‚</a></p><h2 id="Love"><a href="#Love" class="headerlink" title="Love"></a>Love</h2><p><strong>by Roy Croft</strong></p><p>I love you,<br>Not only for what you are,<br>But for what I am<br>When I am with you.</p><p>I love you,<br>Not only for what<br>You have made of yourself,<br>But for what<br>You are making of me.<br>I love you<br>For the part of me<br>That you bring out;<br>I love you<br>For putting your hand<br>Into my heaped-up heart<br>And passing over<br>All the foolish, weak things<br>That you canâ€™t help<br>Dimly seeing there,<br>And for drawing out<br>Into the light<br>All the beautiful belongings<br>That no one else had looked<br>Quite far enough to find.<br>I love you because you<br>Are helping me to make<br>Of the lumber of my life<br>Not a tavern<br>But a temple;<br>Out of the works<br>Of my every day<br>Not a reproach<br>But a song.</p><p>I love you<br>Because you have done<br>More than any creed<br>Could have done<br>To make me good<br>And more than any fate<br>Could have done<br>To make me happy.<br>You have done it<br>Without a touch,<br>Without a word,<br>Without a sign.<br>You have done it<br>By being yourself.<br>Perhaps that is what<br>Being a friend means,<br>After all.</p><h2 id="çˆ±"><a href="#çˆ±" class="headerlink" title="çˆ±"></a>çˆ±</h2><p><strong>ç½—ä¼ŠÂ·å…‹é‡Œå¤«ç‰¹</strong></p><p>æˆ‘çˆ±ä½ ï¼Œ<br>ä¸å…‰å› ä¸ºä½ çš„æ ·å­ï¼Œ<br>è¿˜å› ä¸ºï¼Œ<br>å’Œä½ åœ¨ä¸€èµ·æ—¶ï¼Œ<br>æˆ‘çš„æ ·å­ã€‚<br>æˆ‘çˆ±ä½ ï¼Œ<br>ä¸å…‰å› ä¸ºä½ ä¸ºæˆ‘è€Œåšçš„äº‹ï¼Œ<br>è¿˜å› ä¸ºï¼Œ<br>ä¸ºäº†ä½ ï¼Œ<br>æˆ‘èƒ½åšæˆçš„äº‹ã€‚</p><p>æˆ‘çˆ±ä½ ï¼Œ<br>å› ä¸ºä½ èƒ½å”¤å‡ºï¼Œ<br>æˆ‘æœ€çœŸçš„é‚£éƒ¨åˆ†ã€‚<br>æˆ‘çˆ±ä½ ï¼Œ<br>å› ä¸ºä½ ç©¿è¶Šæˆ‘å¿ƒçµçš„æ—·é‡ï¼Œ<br>å¦‚åŒé˜³å…‰ç©¿é€æ°´æ™¶èˆ¬å®¹æ˜“ã€‚<br>æˆ‘çš„å‚»æ°”ï¼Œ<br>æˆ‘çš„å¼±ç‚¹ï¼Œ<br>åœ¨ä½ çš„ç›®å…‰é‡Œå‡ ä¹ä¸å­˜åœ¨ï¼Œ<br>è€Œæˆ‘å¿ƒé‡Œæœ€ç¾ä¸½çš„åœ°æ–¹ï¼Œ<br>å´è¢«ä½ çš„å…‰èŠ’ç…§çš„é€šäº®ã€‚<br>åˆ«äººéƒ½ä¸æ›¾è´¹å¿ƒèµ°é‚£ä¹ˆè¿œï¼Œ<br>åˆ«äººéƒ½è§‰å¾—å¯»æ‰¾å¤ªéº»çƒ¦ï¼Œ<br>æ‰€ä»¥æ²¡äººå‘ç°è¿‡æˆ‘çš„ç¾ä¸½ï¼Œ<br>æ‰€ä»¥æ²¡äººåˆ°è¿‡è¿™é‡Œã€‚<br>æˆ‘çˆ±ä½ ï¼Œ<br>å› ä¸ºä½ å°†æˆ‘çš„ç”Ÿæ´»åŒ–è…æœ½ä¸ºç¥å¥‡ã€‚<br>å› ä¸ºæœ‰ä½ ï¼Œ<br>æˆ‘çš„ç”Ÿå‘½ï¼Œ<br>ä¸å†æ˜¯å¹³å‡¡çš„æ—…åº—ï¼Œ<br>è€Œæˆä¸ºäº†æ¢å¼˜çš„åº™å®‡ï¼Œ<br>æˆ‘æ—¥å¤ä¸€æ—¥çš„å·¥ä½œé‡Œï¼Œ<br>ä¸å†å……æ»¡æŠ±æ€¨ï¼Œ<br>è€Œæ˜¯ç¾å¦™çš„æ—‹å¾‹ã€‚</p><p>æˆ‘çˆ±ä½ ï¼Œ<br>å› ä¸ºä½ æ¯”ä¿¡å¿µæ›´èƒ½ä½¿æˆ‘çš„ç”Ÿæ´»å˜å¾—æ— æ¯”ç¾å¥½ï¼Œ<br>å› ä¸ºä½ æ¯”å‘½è¿æ›´èƒ½ä½¿æˆ‘çš„ç”Ÿæ´»å˜å¾—å……æ»¡æ¬¢ä¹ã€‚<br>è€Œä½ åšå‡ºè¿™ä¸€åˆ‡çš„ä¸€åˆ‡ï¼Œ<br>ä¸è´¹ä¸€ä¸åŠ›æ°”ï¼Œ<br>ä¸€å¥è¨€è¾ï¼Œ<br>ä¸€ä¸ªæš—ç¤ºï¼Œ<br>ä½ åšå‡ºè¿™ä¸€åˆ‡çš„ä¸€åˆ‡ï¼Œ<br>åªæ˜¯å› ä¸ºä½ å°±æ˜¯ä½ ï¼Œ<br>æ¯•ç«Ÿï¼Œ<br>è¿™ä¹Ÿè®¸å°±æ˜¯çˆ±çš„å«ä¹‰ã€‚</p><p><img src="%E7%88%B1.jpg" alt="çˆ± ç½—ä¼ŠÂ·å…‹é‡Œå¤«ç‰¹"></p>]]></content>
      
      
      <categories>
          
          <category> æ‚¦è¯» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¹§é¸ªå¤©Â·åˆ«åç›¼ç›¸é€¢</title>
      <link href="/2021/08/31/%E9%B9%A7%E9%B8%AA%E5%A4%A9%C2%B7%E5%88%AB%E5%90%8E%E7%9B%BC%E7%9B%B8%E9%80%A2/"/>
      <url>/2021/08/31/%E9%B9%A7%E9%B8%AA%E5%A4%A9%C2%B7%E5%88%AB%E5%90%8E%E7%9B%BC%E7%9B%B8%E9%80%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="é¹§é¸ªå¤©Â·åˆ«åç›¼ç›¸é€¢"><a href="#é¹§é¸ªå¤©Â·åˆ«åç›¼ç›¸é€¢" class="headerlink" title="é¹§é¸ªå¤©Â·åˆ«åç›¼ç›¸é€¢"></a>é¹§é¸ªå¤©Â·åˆ«åç›¼ç›¸é€¢</h1><p>èŠŠèŠŠç‰è‡‚ç™½ç´ æ‰‹ï¼Œæ˜çœ¸çš“é½¿æ¨±æ¡ƒå£ã€‚å¾®å¾®ç»†é›¨é‡‘é™µæœˆï¼Œæ–‘æ–‘æ ‘å½±å¤å¤œé£ã€‚<br>ä»åˆ«åï¼Œç›¼ç›¸é€¢ï¼Œå‡ å›é­‚æ¢¦ä¸å›åŒã€‚ä½•å½“å…±èµç§¦æ·®æ°´ï¼Œé£æœˆçšæ´ä¼¼æ¢¦ä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ²¹å…ˆç”Ÿé€‰é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å’èŠ™è“‰ä»™å­</title>
      <link href="/2021/08/31/%E5%92%8F%E8%8A%99%E8%93%89%E4%BB%99%E5%AD%90/"/>
      <url>/2021/08/31/%E5%92%8F%E8%8A%99%E8%93%89%E4%BB%99%E5%AD%90/</url>
      
        <content type="html"><![CDATA[<h1 id="å’èŠ™è“‰ä»™å­"><a href="#å’èŠ™è“‰ä»™å­" class="headerlink" title="å’èŠ™è“‰ä»™å­"></a>å’èŠ™è“‰ä»™å­</h1><p>çš“é½¿æ˜çœ¸è·èŠ±é¢ï¼Œé£˜ç„¶å‡ºæ°´èŠ™è“‰ä»™ã€‚</p><p>å¤©åº­ä»Šæ—¥å¶å¾—æš‡ï¼Œåç€ç´ è¡£æ¸¸äººé—´ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ²¹å…ˆç”Ÿé€‰é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PythonåŸºæœ¬è¯­æ³•</title>
      <link href="/2021/08/27/Python%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
      <url>/2021/08/27/Python%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="PythonåŸºæœ¬è¯­æ³•"><a href="#PythonåŸºæœ¬è¯­æ³•" class="headerlink" title="PythonåŸºæœ¬è¯­æ³•"></a>PythonåŸºæœ¬è¯­æ³•</h1><p>è¿™ä¸€ç« æˆ‘ä»¬ä¸»è¦æ¥å­¦ä¹ Pythonè¯­è¨€ä½¿ç”¨çš„åŸºæœ¬è¯­æ³•ï¼Œä¾¿äºä»¥åè¯»å†™Pythonä»£ç ã€‚å½“ç„¶æˆ‘ä»¬åªå­¦ä¹ æœ€é‡è¦çš„éƒ¨åˆ†ã€‚</p><h2 id="PythonåŸºæœ¬æ•°æ®ç±»å‹å’Œè¿ç®—ç¬¦"><a href="#PythonåŸºæœ¬æ•°æ®ç±»å‹å’Œè¿ç®—ç¬¦" class="headerlink" title="PythonåŸºæœ¬æ•°æ®ç±»å‹å’Œè¿ç®—ç¬¦"></a>PythonåŸºæœ¬æ•°æ®ç±»å‹å’Œè¿ç®—ç¬¦</h2><p>Pythonä¸­çš„<strong>å˜é‡</strong>éœ€è¦å…ˆ<strong>å£°æ˜</strong>åä½¿ç”¨ã€‚çœ‹ä¸‹é¢ä¸€æ®µä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">counter <span class="token operator">=</span> <span class="token number">100</span>          <span class="token comment"># æ•´å‹å˜é‡ int</span>miles   <span class="token operator">=</span> <span class="token number">1000.0</span>       <span class="token comment"># æµ®ç‚¹å‹å˜é‡ float</span>name    <span class="token operator">=</span> <span class="token string">"fairy"</span>      <span class="token comment"># å­—ç¬¦ä¸² strï¼Œæ³¨æ„å­—ç¬¦ä¸²æ—¢å¯ä»¥ç”¨åŒå¼•å·ï¼Œä¹Ÿå¯ä»¥ç”¨å•å¼•å·ï¼Œ"fairy"å’Œ'fairy'åœ¨pythoné‡Œæ˜¯ç­‰åŒçš„ </span>flag    <span class="token operator">=</span> <span class="token boolean">True</span>   <span class="token comment"># å¸ƒå°”ç±»å‹ boolï¼Œå…¶å€¼ä»…å¯ä»¥ä¸ºTrueæˆ–False</span><span class="token keyword">print</span> <span class="token punctuation">(</span>counter<span class="token punctuation">)</span><span class="token keyword">print</span> <span class="token punctuation">(</span>miles<span class="token punctuation">)</span><span class="token keyword">print</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œè¯¥ä»£ç å¯ä»¥å¾—åˆ°ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">(base) PS C:\Users\15617&gt; 100(base) PS C:\Users\15617&gt; 1000.0(base) PS C:\Users\15617&gt; fairy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿™æ®µä»£ç ä¸­<strong>å£°æ˜</strong>å¹¶<strong>èµ‹å€¼</strong>äº†æ•´å‹å˜é‡counterï¼Œæµ®ç‚¹å‹å˜é‡milesï¼Œå­—ç¬¦ä¸²ç±»å‹å˜é‡nameï¼Œå’Œå¸ƒå°”ï¼ˆBoolï¼‰ç±»å‹çš„å˜é‡flagï¼Œç„¶åè°ƒç”¨Pythonè‡ªå¸¦çš„print<strong>å‡½æ•°</strong>è¾“å‡ºå„å˜é‡ã€‚å‡½æ•°çš„æ¦‚å¿µæˆ‘ä»¬åé¢ä¼šè®²ï¼Œè¿™é‡Œåªä½¿ç”¨ä¸è®¨è®ºã€‚</p><p>æ³¨æ„å¸ƒå°”ç±»å‹å˜é‡çš„å€¼ä»…å¯ä¸ºTrueæˆ–Falseï¼Œåœ¨è¿ç®—å’Œåˆ¤æ–­ä¸­ç­‰ä»·äº1å’Œ0ï¼Œç”¨äºæ ‡è®°â€œæ˜¯â€å’Œâ€œéâ€ã€‚</p><p>æ•´å‹ã€æµ®ç‚¹å‹å¯ä»¥ç”¨<strong>è¿ç®—ç¬¦</strong>è¿›è¡Œå„ç§è¿ç®—ï¼Œå¦‚ä»¥ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a <span class="token operator">=</span> <span class="token number">10</span>b <span class="token operator">=</span> <span class="token number">21</span>c <span class="token operator">=</span> a <span class="token comment"># "="æ˜¯èµ‹å€¼ç¬¦å·ï¼Œä¹Ÿæ˜¯ä¸€ç§è¿ç®—ç¬¦</span>c <span class="token operator">=</span> a <span class="token operator">+</span> b <span class="token comment"># åŠ æ³•</span>c <span class="token operator">=</span> a <span class="token operator">-</span> b <span class="token comment"># å‡æ³•</span>c <span class="token operator">=</span> a <span class="token operator">*</span> b <span class="token comment"># ä¹˜æ³•</span>c <span class="token operator">=</span> a <span class="token operator">/</span> b <span class="token comment"># é™¤æ³•</span>c <span class="token operator">=</span> a <span class="token operator">%</span> b <span class="token comment"># å–æ¨¡ï¼Œè¿”å›aé™¤ä»¥bå¾—åˆ°çš„ä½™æ•°</span>c <span class="token operator">=</span> a <span class="token operator">**</span> b <span class="token comment"># å¹‚è¿ç®—ï¼Œè¿”å›açš„bæ¬¡å¹‚</span>c <span class="token operator">=</span> a <span class="token operator">//</span> b <span class="token comment"># æ•´é™¤è¿ç®—ï¼Œå°†a/bçš„å•†å‘ä¸‹å–æ•´ï¼Œä¾‹å¦‚ï¼Œ9/2=4.5,9//2=4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å­—ç¬¦ä¸²å¸¸è§çš„è¿ç®—ç¬¦å’Œè¿ç®—å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a <span class="token operator">=</span> <span class="token string">"mi"</span>b <span class="token operator">=</span> <span class="token string">"Xiao mi"</span>c <span class="token operator">=</span> b <span class="token operator">+</span> a <span class="token comment"># å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå¾—åˆ°çš„cä¸ºæ–°å­—ç¬¦ä¸²"Xiao mimi"</span>c <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># é€šè¿‡ç´¢å¼•è·å–å­—ç¬¦ï¼Œå¾—åˆ°çš„å­—ç¬¦c="i"ï¼Œå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ä»å·¦åˆ°å³ç´¢å¼•åˆ†åˆ«ä¸º0ï¼Œ1ï¼Œ2ï¼Œ...</span>c <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token comment"># å­—ç¬¦ä¸²æˆªå–ï¼Œè¿™é‡Œæˆªå–äº†ç¬¬0~4ä¸ªå­—ç¬¦ï¼Œå¾—åˆ°çš„å­—ç¬¦ä¸²c="Xiao "ï¼Œæ³¨æ„ä¸åŒ…æ‹¬ç¬¬5ä¸ªå­—ç¬¦ï¼Œæ³¨æ„ç©ºæ ¼ä¹Ÿæ˜¯å­—ç¬¦</span>c <span class="token operator">=</span> a <span class="token keyword">in</span> b <span class="token comment"># æˆå‘˜è¿ç®—ï¼Œå¦‚æœå­—ç¬¦ä¸²aå­˜åœ¨äºå­—ç¬¦ä¸²bä¸­ï¼Œåˆ™cä¸ºå¸ƒå°”ç±»å‹çš„Trueï¼Œå¦åˆ™ä¸ºFalse</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å’ªå’ªå¯ä»¥è¯•ç€æ›´æ”¹ä¸€ä¸‹å‚æ•°æˆ–è€…a, bçš„å€¼ï¼Œè¿è¡Œä¸€ä¸‹ä»£ç ï¼Œè¾“å‡ºcçš„å€¼ï¼Œçœ‹çœ‹æ˜¯å¦ç¬¦åˆè‡ªå·±çš„é¢„æœŸã€‚</p><p><strong>æ€»ç»“ä¸å»¶ç”³ï¼š</strong></p><ul><li>è¿™ä¸€èŠ‚æˆ‘ä»¬å­¦ä¹ äº†åŸºæœ¬å˜é‡çš„å£°æ˜å’Œè®¡ç®—ï¼ŒåŒ…æ‹¬æ•´æ•°ã€æµ®ç‚¹æ•°ã€å­—ç¬¦ä¸²ã€å¸ƒå°”ç±»å‹ç­‰ï¼ŒåŠ å‡ä¹˜é™¤æ¨¡ï¼Œå­—ç¬¦ä¸²çš„æŸ¥è¯¢æ‹¼æ¥ç­‰ç­‰ï¼›</li><li>Pythonä¸­çš„ä¸€åˆ‡è¿ç®—æœ€ç»ˆéƒ½è¦è½åˆ°å˜é‡çš„è¿ç®—ä¸Šæ¥ï¼Œæ‰€ä»¥å¦‚æœæƒ³å¯¹å˜é‡åšæŸç§å¤„ç†è€Œä¸çŸ¥é“è¯¥æ€ä¹ˆå¤„ç†ï¼Œå°±å¯ä»¥ç™¾åº¦æˆ–è€…è°·æ­Œå•¦ã€‚</li></ul><p><strong>å°ç»ƒä¹ :</strong></p><p>ç°åœ¨æˆ‘ä»¬æ¥åšä¸¤ä¸ªå°ç»ƒä¹ ï¼Œå·©å›ºä¸€ä¸‹å­¦åˆ°çš„çŸ¥è¯†ï¼š</p><ul><li>å·²çŸ¥ä¸‰è§’å½¢çš„ä¸‰è¾¹é•¿a=5, b=6, c=7ï¼Œæ€æ ·åœ¨Pythonä¸­è®¡ç®—ä¸‰è§’å½¢çš„é¢ç§¯ï¼Ÿï¼ˆæç¤ºï¼Œå¯ä»¥é‡‡ç”¨æµ·ä¼¦å…¬å¼ï¼‰</li><li>å‡è®¾ç°åœ¨å˜é‡x=10ï¼Œy=20ï¼Œæ€æ ·åœ¨Pythonä¸­æŠŠxå’Œyçš„å€¼äº¤æ¢ï¼Ÿ</li></ul><h2 id="Pythoné€»è¾‘è¿ç®—"><a href="#Pythoné€»è¾‘è¿ç®—" class="headerlink" title="Pythoné€»è¾‘è¿ç®—"></a>Pythoné€»è¾‘è¿ç®—</h2><p>å‡è®¾xä¸º10ï¼Œyä¸º20ï¼ŒPythonä¸­å¸¸è§çš„é€»è¾‘è¿ç®—ç¬¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><table><thead><tr><th>è¿ç®—ç¬¦</th><th>é€»è¾‘è¡¨è¾¾å¼</th><th>æè¿°</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>and</td><td>x and y</td><td>å¸ƒå°”â€ä¸â€ - å¦‚æœ x ä¸º Falseï¼Œx and y è¿”å› x çš„å€¼ï¼Œå¦åˆ™è¿”å› y çš„è®¡ç®—å€¼ã€‚</td><td>(x and y) è¿”å› 20</td></tr><tr><td>or</td><td>x or y</td><td>å¸ƒå°”â€æˆ–â€ - å¦‚æœ x æ˜¯ Trueï¼Œå®ƒè¿”å› x çš„å€¼ï¼Œå¦åˆ™å®ƒè¿”å› y çš„è®¡ç®—å€¼ã€‚</td><td>(x or y) è¿”å› 10</td></tr><tr><td>not</td><td>not x</td><td>å¸ƒå°”â€éâ€ - å¦‚æœ x ä¸º Trueï¼Œè¿”å› False ã€‚å¦‚æœ x ä¸º Falseï¼Œå®ƒè¿”å› Trueã€‚</td><td>not(x and y) è¿”å› False</td></tr></tbody></table><p>ä¸‹é¢è¿™æ®µä»£ç è¯´æ˜ä¸€åˆ‡å•¦ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a <span class="token operator">=</span> <span class="token number">10</span>b <span class="token operator">=</span> <span class="token number">20</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> a <span class="token keyword">and</span> b <span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"1 - å˜é‡ a å’Œ b éƒ½ä¸º true"</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"1 - å˜é‡ a å’Œ b æœ‰ä¸€ä¸ªä¸ä¸º true"</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> a <span class="token keyword">or</span> b <span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"2 - å˜é‡ a å’Œ b éƒ½ä¸º trueï¼Œæˆ–å…¶ä¸­ä¸€ä¸ªå˜é‡ä¸º true"</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"2 - å˜é‡ a å’Œ b éƒ½ä¸ä¸º true"</span><span class="token punctuation">)</span> <span class="token comment"># ä¿®æ”¹å˜é‡ a çš„å€¼</span>a <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">if</span> <span class="token punctuation">(</span> a <span class="token keyword">and</span> b <span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"3 - å˜é‡ a å’Œ b éƒ½ä¸º true"</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"3 - å˜é‡ a å’Œ b æœ‰ä¸€ä¸ªä¸ä¸º true"</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> a <span class="token keyword">or</span> b <span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"4 - å˜é‡ a å’Œ b éƒ½ä¸º trueï¼Œæˆ–å…¶ä¸­ä¸€ä¸ªå˜é‡ä¸º true"</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"4 - å˜é‡ a å’Œ b éƒ½ä¸ä¸º true"</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token keyword">not</span><span class="token punctuation">(</span> a <span class="token keyword">and</span> b <span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"5 - å˜é‡ a å’Œ b éƒ½ä¸º falseï¼Œæˆ–å…¶ä¸­ä¸€ä¸ªå˜é‡ä¸º false"</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>   <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"5 - å˜é‡ a å’Œ b éƒ½ä¸º true"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Python-æ•°æ®ç±»å‹è½¬æ¢"><a href="#Python-æ•°æ®ç±»å‹è½¬æ¢" class="headerlink" title="Python æ•°æ®ç±»å‹è½¬æ¢"></a>Python æ•°æ®ç±»å‹è½¬æ¢</h2><p>Pythonä¸­çš„æ•°æ®å¯ä»¥è¿›è¡Œæ•°æ®ç±»å‹è½¬æ¢ï¼Œéœ€è¦åˆ†åˆ«é‡‡ç”¨int float str boolè¿™æ ·çš„å…³é”®å­—ã€‚å¦‚ä»¥ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a <span class="token operator">=</span> <span class="token number">520</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>a <span class="token operator">=</span> <span class="token number">13.14</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>a <span class="token operator">=</span> <span class="token string">'9.99'</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>a <span class="token operator">=</span> <span class="token boolean">True</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åšæ•°æ®ç±»å‹è½¬æ¢åªéœ€è¦ä½¿ç”¨å…³é”®å­—æ‹¬å·+å‚æ•°çš„å½¢å¼å³å¯ã€‚æ³¨æ„ç”±ä¸€ä¸ªæµ®ç‚¹æ•°æ„æˆçš„å­—ç¬¦ä¸²è½¬ä¸ºæ•´æ•°æ—¶ï¼Œéœ€è¦å…ˆè½¬ä¸ºæµ®ç‚¹æ•°ï¼Œå†è½¬ä¸ºæ•´æ•°ã€‚</p><h2 id="PythonåŸºæœ¬æ•°æ®ç»“æ„"><a href="#PythonåŸºæœ¬æ•°æ®ç»“æ„" class="headerlink" title="PythonåŸºæœ¬æ•°æ®ç»“æ„"></a>PythonåŸºæœ¬æ•°æ®ç»“æ„</h2><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬å­¦çš„æ˜¯åŸºæœ¬å˜é‡çš„èµ‹å€¼å’Œè¿ç®—è§„åˆ™ï¼Œç„¶è€Œä¸€ä¸ªå˜é‡ä¸€ä¸ªå˜é‡å‘½åå¤ªæ…¢äº†ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€å¤§æ‰¹æ•°æ®éœ€è¦å­˜å‚¨ï¼Œå°±å¾ˆéš¾ç»™ä¸€ä¸ªä¸€ä¸ªæ•°æ®éƒ½åˆ†åˆ«è®¾ç½®å˜é‡æ¥å­˜å‚¨ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦æ•°æ®ç»“æ„æ¥è¿›è¡Œç»Ÿä¸€æ“ä½œå’Œå¤„ç†ã€‚</p><p>Pythonä¸­æœ‰å››ç§åŸºæœ¬çš„æ•°æ®ç»“æ„ï¼šåˆ—è¡¨ï¼Œå…ƒç»„ï¼Œå­—å…¸ï¼Œé›†åˆï¼Œå¦‚ä¸‹é¢çš„ä»£ç æ‰€å®šä¹‰çš„ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token builtin">list</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Xmm"</span><span class="token punctuation">,</span> <span class="token number">1994</span><span class="token punctuation">,</span> <span class="token number">4.16</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">]</span> <span class="token comment"># åˆ—è¡¨ä¸­çš„å…ƒç´ å¯ä»¥ä¸ºä¸Šä¸€èŠ‚è®²çš„å„ç§æ•°æ®ç±»å‹</span><span class="token builtin">tuple</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"Gs"</span><span class="token punctuation">,</span> <span class="token number">1995</span><span class="token punctuation">,</span> <span class="token number">2.28</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># å…ƒç»„å’Œåˆ—è¡¨ä¸€æ ·ï¼ŒåŒºåˆ«ä»…ä»…åœ¨äºå…ƒç»„ä¸­çš„å€¼å®šä¹‰å¥½ä¹‹åæ— æ³•æ›´æ”¹</span>dictionary <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"name"</span><span class="token punctuation">:</span><span class="token string">"è·Ÿæ²¹æ²¹å­¦Python"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token number">8.15</span><span class="token punctuation">,</span> <span class="token string">"site"</span><span class="token punctuation">:</span><span class="token string">"formi_python"</span><span class="token punctuation">}</span> <span class="token comment"># å­—å…¸ç”¨äºå»ºç«‹è‡ªå®šä¹‰çš„å¯¹åº”å…³ç³»ï¼Œæ¯ç»„å¯¹åº”å…³ç³»åŒ…å«ä¸€ä¸ªkeyä¸€ä¸ªvalueï¼Œåœ¨å†’å·å‰å;keyå’Œvalueçš„å€¼å‡å¯ä¸ºä¸Šä¸€èŠ‚è®²çš„å„ç§æ•°æ®ç±»å‹</span><span class="token builtin">set</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'pear'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'banana'</span><span class="token punctuation">}</span><span class="token comment"># é›†åˆæ˜¯ä¸€ä¸ªæ— åºçš„ä¸é‡å¤å…ƒç´ é›†ï¼Œæ¯ä¸ªå…ƒç´ å¯ä¸ºä¸Šä¸€èŠ‚è®²çš„å„ç§æ•°æ®ç±»å‹ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬åªä»‹ç»æœ€å¸¸è§çš„æ•°æ®ç»“æ„listçš„æœ€å¸¸è§çš„ç”¨æ³•ï¼Œåˆ«çš„æ•°æ®ç»“æ„æˆ‘ä»¬çŸ¥é“æœ‰å®ƒä»¬çš„ä¸»è¦ç‰¹æ€§å°±å¥½å•¦ï¼Œéœ€è¦ç”¨çš„æ—¶å€™å†å­¦ä¹ ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token builtin">list</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'white'</span><span class="token punctuation">,</span> <span class="token string">'black'</span><span class="token punctuation">]</span> <span class="token comment"># ä¸€ä¸ªåŒ…å«7ä¸ªå­—ç¬¦ä¸²çš„åˆ—è¡¨</span><span class="token comment"># åˆ—è¡¨æŸ¥è¯¢</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># è¾“å‡ºlist[0]ï¼Œå³ç¬¬0ä¸ªå…ƒç´ 'red'</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># è¾“å‡ºlist[2]ï¼Œå³ç¬¬2ä¸ªå…ƒç´ 'blue'</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># è¾“å‡ºç¬¬-1ä¸ªå…ƒç´ ï¼Œå³å€’æ•°ç¬¬ä¸€ä¸ªå…ƒç´ 'black'</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># è¾“å‡ºç¬¬-2ä¸ªå…ƒç´ ï¼Œå³'white'ï¼Œå…¶ä»–ä»¥æ­¤ç±»æ¨</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># è¾“å‡ºç¬¬1~3ä¸ªå…ƒç´ ï¼Œå³['green', 'blue', 'yellow']ï¼Œæ³¨æ„å¾—åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ªæ–°çš„list</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># è¾“å‡ºç¬¬1~å€’æ•°ç¬¬3ä¸ªå…ƒç´ ï¼Œå³['green', 'blue', 'yellow']ï¼Œæ³¨æ„å¾—åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ªæ–°çš„list</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># è¾“å‡ºç¬¬3ä¸ªä»¥åŠåé¢çš„æ‰€æœ‰å…ƒç´ ï¼Œå³['yellow', 'white', 'black']ï¼Œæ³¨æ„å¾—åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ªæ–°çš„list</span><span class="token comment"># åˆ—è¡¨ä¿®æ”¹</span><span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'pink'</span> <span class="token comment"># å°†ç¬¬2ä¸ªå…ƒç´ èµ‹å€¼ä¸º'pink'</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span> <span class="token comment"># çŒœçŒœè¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span><span class="token builtin">list</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'orange'</span><span class="token punctuation">)</span> <span class="token comment"># åœ¨åˆ—è¡¨æœ«å°¾åŠ å…¥å…ƒç´ 'orange'</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span> <span class="token comment"># çŒœçŒœè¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span><span class="token keyword">del</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">#åˆ é™¤åˆ—è¡¨ç¬¬2ä¸ªå…ƒç´ </span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span> <span class="token comment"># çŒœçŒœè¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</span><span class="token comment"># åˆ—è¡¨è„šæœ¬æ“ä½œç¬¦</span>list1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>list2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token keyword">print</span><span class="token punctuation">(</span>list1 <span class="token operator">+</span> list2<span class="token punctuation">)</span> <span class="token comment"># "+"å¯ä»¥å°†list1å’Œlist2æ‹¼æ¥ä¸ºæ–°çš„list</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token keyword">in</span> list1<span class="token punctuation">)</span> <span class="token comment"># "in"å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºä¸€ä¸ªlistä¸­ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„Trueæˆ–Falseï¼Œè¿™é‡Œè¾“å‡ºTrue</span><span class="token comment"># åˆ—è¡¨å¸¸ç”¨å‡½æ•°</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># len()å‡½æ•°å¯ä»¥å¾—åˆ°åˆ—è¡¨ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œè¿”å›å€¼æ˜¯æ•´å‹</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># max()å‡½æ•°è¿”å›listä¸­å…ƒç´ çš„æœ€å¤§å€¼</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># min()å‡½æ•°è¿”å›listä¸­å…ƒç´ çš„æœ€å°å€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯•ç€è¿è¡Œä¸€ä¸‹è¿™æ®µä»£ç ï¼Œçœ‹å¾—åˆ°çš„æ•ˆæœå’Œæˆ‘ä»¬é¢„æœŸçš„ä¸€æ ·ä¸ä¸€æ ·å§~</p><p>æ³¨æ„è¿™é‡Œéƒ½æ˜¯ç”¨print()å‡½æ•°å°†ç»“æœç›´æ¥è¾“å‡ºå‡ºæ¥äº†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŠŠç»“æœèµ‹ç»™æ–°çš„å˜é‡ã€‚</p><p><strong>æ€»ç»“ä¸å»¶ç”³ï¼š</strong></p><ul><li>è¿™ä¸€èŠ‚æˆ‘ä»¬å­¦ä¹ äº†åŸºæœ¬æ•°æ®ç»“æ„åŠæ“ä½œï¼Œä¸»è¦æ˜¯listçš„æ“ä½œï¼Œæ•°æ®ç»“æ„ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿å¤§è§„æ¨¡å¤„ç†æ•°æ®è€Œå­˜åœ¨çš„ï¼›</li><li>æ¯ä¸ªæ•°æ®ç»“æ„åœ¨Pythonä¸­éƒ½æœ‰è®¸å¤šå·²ç»å†™å¥½çš„<strong>å‡½æ•°</strong>å¯ä»¥è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚len(), max(), min()ç­‰ï¼Œæ¯”è¾ƒå…±æ€§çš„åŠŸèƒ½åŸºæœ¬éƒ½ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å»å®ç°ï¼Œç™¾åº¦æˆ–è€…è°·æ­Œä¸€ä¸‹å°±ä¼šç”¨å•¦ã€‚</li></ul><p><strong>å°ç»ƒä¹ ï¼š</strong></p><ul><li>è¯·å’ªå’ªåŒå­¦åœ¨Pythonä¸­å£°æ˜ä¸€ä¸ªé•¿åº¦ä¸º10çš„listï¼Œå‰ä¸¤ä¸ªå…ƒç´ åˆ†åˆ«ä¸ºæ•°å­—0å’Œ1ã€‚ç„¶åé€šè¿‡è®¡ç®—å¾—åˆ°å…¶ä»–å…ƒç´ çš„å€¼ï¼Œè¦æ±‚ä»ç¬¬ä¸‰ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯ä¸ªå…ƒç´ éƒ½ç­‰äºå‰ä¸¤ä¸ªå…ƒç´ ä¹‹å’Œã€‚å³â€œæ–æ³¢é‚£å¥‘æ•°åˆ—â€ã€‚</li><li>å¯¹ä¸Šè¿°å¾—åˆ°çš„æ–æ³¢é‚£å¥‘æ•°åˆ—listè¿›è¡Œç¿»è½¬ã€‚</li></ul><h2 id="Pythonæ¡ä»¶è¯­å¥"><a href="#Pythonæ¡ä»¶è¯­å¥" class="headerlink" title="Pythonæ¡ä»¶è¯­å¥"></a>Pythonæ¡ä»¶è¯­å¥</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬åªåœ¨ä¸€å®šæ¡ä»¶ä¸‹æ‰åšè¿ç®—å’Œå¤„ç†ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æ¡ä»¶è¯­å¥ã€‚</p><p>Pythonä¸­çš„æ¡ä»¶è¯­å¥ifç”¨æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">age <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥ä½ å®¶çŒªçŒªçš„å¹´é¾„: "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token keyword">if</span> age <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ä½ æ˜¯åœ¨é€—æˆ‘å§!"</span><span class="token punctuation">)</span><span class="token keyword">elif</span> age <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ç›¸å½“äº 14 å²çš„äººã€‚"</span><span class="token punctuation">)</span><span class="token keyword">elif</span> age <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ç›¸å½“äº 22 å²çš„äººã€‚"</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    human <span class="token operator">=</span> <span class="token number">22</span> <span class="token operator">+</span> <span class="token punctuation">(</span>age <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">5</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å¯¹åº”äººç±»å¹´é¾„: "</span><span class="token punctuation">,</span> human<span class="token punctuation">)</span> <span class="token comment">### é€€å‡ºæç¤º</span><span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"ç‚¹å‡» enter é”®é€€å‡º"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¯”è¾ƒç®€å•æ˜“æ‡‚ã€‚</p><h2 id="Python-forå¾ªç¯è¯­å¥"><a href="#Python-forå¾ªç¯è¯­å¥" class="headerlink" title="Python forå¾ªç¯è¯­å¥"></a>Python forå¾ªç¯è¯­å¥</h2><p>å¾ªç¯è¯­å¥æˆ‘ä»¬ä¹‹å‰åœ¨å­¦å†™ä¹˜æ³•å£è¯€è¡¨çš„æ—¶å€™æœ‰è¿‡æ¥è§¦äº†ï¼Œè¿™é‡Œå†ç»†è‡´çœ‹ä¸€ä¸‹ã€‚</p><p>å…ˆæ¥çœ‹æˆ‘ä»¬ç†Ÿæ‚‰çš„forå¾ªç¯ï¼Œå®ƒçš„ä¸€èˆ¬æ ¼å¼å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> iterating_var <span class="token keyword">in</span> sequence<span class="token punctuation">:</span>    statements<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å®ƒçš„æ‰§è¡Œæµç¨‹å›¾æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="for.jpg" alt="forå¾ªç¯æ‰§è¡Œæµç¨‹å›¾"></p><p>ä¸‹é¢è¿™ä»½ä»£ç é‡Œçš„ä¸¤ä¸ªä¾‹å­æ˜¯forå¾ªç¯æœ€å¸¸ç”¨çš„ç”¨æ³•ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">characters_of_fairy <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"beautiful"</span><span class="token punctuation">,</span> <span class="token string">"clever"</span><span class="token punctuation">,</span> <span class="token string">"lovely"</span><span class="token punctuation">,</span> <span class="token string">"ambitious"</span><span class="token punctuation">]</span><span class="token keyword">for</span> character <span class="token keyword">in</span> characters_of_fairy<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>character<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>characters_of_fairy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>characters_of_fairy<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Python-whileå¾ªç¯"><a href="#Python-whileå¾ªç¯" class="headerlink" title="Python whileå¾ªç¯"></a>Python whileå¾ªç¯</h2><p>whileå¾ªç¯ä¸forå¾ªç¯å¤§åŒå°å¼‚ï¼š</p><p><img src="while.jpg" alt="whileå¾ªç¯æ‰§è¡Œæµç¨‹å›¾"></p><p>ä¸‹é¢è¿™ä¸ªä¾‹å­æ¼”ç¤ºäº†ä½¿ç”¨whileå¾ªç¯ä»1ç´¯åŠ åˆ°100ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>counter <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">while</span> counter <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">:</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token builtin">sum</span> <span class="token operator">+</span> counter    counter <span class="token operator">+=</span> <span class="token number">1</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">sum</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ˜¯ä¸æ˜¯å¾ˆç®€å•å‘€<span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><h2 id="Python-å¾ªç¯åµŒå¥—"><a href="#Python-å¾ªç¯åµŒå¥—" class="headerlink" title="Python å¾ªç¯åµŒå¥—"></a>Python å¾ªç¯åµŒå¥—</h2><p>Pythonçš„å¾ªç¯åµŒå¥—æˆ‘ä»¬å‰é¢ä¹Ÿå·²ç»è®¤è¯†è¿‡äº†ï¼Œå®ƒæ˜¯æŠŠå†…å±‚å¾ªç¯å½“ä½œäº†å¤–å±‚å¾ªç¯çš„å¾ªç¯ä½“ã€‚Pythonå…è®¸ä»»æ„å±‚æ•°çš„å¾ªç¯åµŒå¥—ï¼Œä¾‹å¦‚åŒå±‚forå¾ªç¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> iterating_var <span class="token keyword">in</span> sequence<span class="token punctuation">:</span>   <span class="token keyword">for</span> iterating_var <span class="token keyword">in</span> sequence<span class="token punctuation">:</span>      statements<span class="token punctuation">(</span>s<span class="token punctuation">)</span>   statements<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åŒå±‚whileå¾ªç¯ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">while</span> expression<span class="token punctuation">:</span>   <span class="token keyword">while</span> expression<span class="token punctuation">:</span>      statement<span class="token punctuation">(</span>s<span class="token punctuation">)</span>   statement<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åŒå±‚å¾ªç¯çš„æ‰§è¡Œæµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="double.png" alt="åŒå±‚å¾ªç¯æ‰§è¡Œæµç¨‹å›¾"></p><p>å½“ç„¶forå¾ªç¯ä¹Ÿå¯ä»¥å’Œwhileå¾ªç¯äº’ç›¸åµŒå¥—ã€‚</p><p>ä½œä¸ºä¸€ä¸ªå°ç»ƒä¹ ï¼Œæˆ‘ä»¬å†æ¥å¤ä¹ ä¸€ä¸‹Pythonæ­£å‘å’Œåå‘è¾“å‡ºä¹˜æ³•å£è¯€è¡¨å§<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><h2 id="break-continue-ä¸-pass"><a href="#break-continue-ä¸-pass" class="headerlink" title="break, continue ä¸ pass"></a>break, continue ä¸ pass</h2><p>åœ¨å¾ªç¯è¯­å¥ä¸­è¿˜æœ‰ä¸¤ä¸ªå¸¸ç”¨çš„å…³é”®å­—ï¼Œåˆ†åˆ«æ˜¯breakå’Œcontinueã€‚å…¶ä¸­breakç”¨äºç«‹åˆ»ç»“æŸå½“å‰å¾ªç¯è½¬è€Œæ‰§è¡Œåé¢çš„è¯­å¥ï¼Œcontinueç”¨äºç»“æŸæœ¬è½®å¾ªç¯ï¼Œç»§ç»­ä¸‹ä¸€è½®å¾ªç¯ã€‚æˆ‘ä»¬é€šè¿‡ä¸‹é¢è¿™ä¸¤ä¸ªä¾‹å­æ¥ç†è§£ï¼š</p><p>breakè¯­å¥ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">n <span class="token operator">=</span> <span class="token number">5</span><span class="token keyword">while</span> n <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>    n <span class="token operator">-=</span> <span class="token number">1</span>    <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>        <span class="token keyword">break</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å¾ªç¯ç»“æŸã€‚'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>continueè¯­å¥ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">n <span class="token operator">=</span> <span class="token number">5</span><span class="token keyword">while</span> n <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>    n <span class="token operator">-=</span> <span class="token number">1</span>    <span class="token keyword">if</span> n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>        <span class="token keyword">continue</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å¾ªç¯ç»“æŸã€‚'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å°ä»™å¥³å¯ä»¥åˆ†åˆ«æ‰§è¡Œè¿™ä¸¤ä»½ä»£ç ï¼Œçœ‹çœ‹ç»“æœæœ‰ä»€ä¹ˆä¸åŒå‘¢<span class="github-emoji"><span>ğŸ˜œ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f61c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ˜œ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f61c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>è€Œpassè¯­å¥è¡¨ç¤ºç©ºè¯­å¥ï¼Œä»€ä¹ˆä¹Ÿä¸åšï¼Œå®ƒçš„ä½œç”¨æ˜¯å ä½ã€‚å› ä¸ºæˆ‘ä»¬çŸ¥é“Pythoné‡Œé¢çš„å¾ªç¯ä¸å¯ä»¥æ²¡æœ‰å¾ªç¯ä½“ï¼Œifè¯­å¥ä¹Ÿä¸å¯ä»¥æ²¡æœ‰åˆ¤å®šæˆåŠŸåçš„æ‰§è¡Œå†…å®¹ï¼Œè‡ªå®šä¹‰å‡½æ•°ä¹Ÿä¸å¯ä»¥ä¸ºç©ºï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç©ºå¾ªç¯ï¼Œæˆ–è€…ç©ºå‡½æ•°ï¼Œæˆ–è€…ç©ºçš„ifè¯­å¥ï¼Œå°±éœ€è¦ç”¨åˆ°passï¼š</p><p>å¦‚ä»¥ä¸‹è¯­å¥æ˜¯åˆæ³•çš„ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span><span class="token keyword">if</span> <span class="token number">3</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span><span class="token keyword">def</span> <span class="token function">mymax</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è€Œä»¥ä¸‹è¯­å¥æ˜¯éæ³•çš„ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">if</span> <span class="token number">3</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token keyword">def</span> <span class="token function">mymax</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¤§ç»ƒä¹ "><a href="#å¤§ç»ƒä¹ " class="headerlink" title="å¤§ç»ƒä¹ "></a>å¤§ç»ƒä¹ </h2><p>è¯·å’ªå’ªå°æœ‹å‹ç”¨Pythonè¯­è¨€åˆ¤æ–­å¹¶è¾“å‡º2~100ä»¥å†…çš„æ‰€æœ‰ç´ æ•°ã€‚</p><p>ä¼šåšè¿™ä¸ªé¢˜ç›®æˆ–è€…è¯»æ‡‚ä¸‹é¢è¿™æ®µä»£ç ï¼Œæœ¬æ–‡çš„å†…å®¹å°±å…¨éƒ½ç†è§£åˆ°ä½å•¦ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">i <span class="token operator">=</span> <span class="token number">2</span><span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    j <span class="token operator">=</span> <span class="token number">2</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>i<span class="token operator">/</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      <span class="token keyword">if</span> i<span class="token operator">%</span>j <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token keyword">break</span>      j <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">1</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&gt;</span> i<span class="token operator">/</span>j<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>    i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¯å¢ƒæ­å»ºä¸Pythonå…¥é—¨</title>
      <link href="/2021/08/27/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%B8%8EPython%E5%85%A5%E9%97%A8/"/>
      <url>/2021/08/27/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%B8%8EPython%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="ç¯å¢ƒæ­å»ºä¸Pythonå…¥é—¨"><a href="#ç¯å¢ƒæ­å»ºä¸Pythonå…¥é—¨" class="headerlink" title="ç¯å¢ƒæ­å»ºä¸Pythonå…¥é—¨"></a>ç¯å¢ƒæ­å»ºä¸Pythonå…¥é—¨</h1><p>æœ¬æ–‡æˆ‘ä»¬å…ˆäº†è§£ä»€ä¹ˆæ˜¯Pythonï¼Œç„¶ååœ¨Windowsä¸Šæ­å»ºPythonç¯å¢ƒï¼Œå­¦ä¼šå¦‚ä½•è¿è¡ŒPythonä»£ç ï¼Œå†è·‘å‡ ä¸ªæ ·ä¾‹ä»£ç åšæµ‹è¯•ï¼Œæ„Ÿå—ä¸€ä¸‹Pythonçš„é­…åŠ›ã€‚</p><h2 id="Pythonæ˜¯ä»€ä¹ˆ"><a href="#Pythonæ˜¯ä»€ä¹ˆ" class="headerlink" title="Pythonæ˜¯ä»€ä¹ˆ"></a>Pythonæ˜¯ä»€ä¹ˆ</h2><p>è®¡ç®—æœºä¸Šçš„å„ç§è½¯ä»¶éƒ½æ˜¯ç”¨ç¼–ç¨‹è¯­è¨€å†™æˆçš„ï¼Œç¼–ç¨‹è¯­è¨€å¯ä»¥æ²Ÿé€šäººä¸è®¡ç®—æœºï¼Œä¾¿äºäººä»¬æ›´å¥½åœ°ä½¿ç”¨è®¡ç®—æœºçš„ç®—åŠ›å’Œèµ„æºã€‚</p><p>Pythonè¯­è¨€æ­£æ˜¯å½“å‰æœ€æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸»è¦ç‰¹ç‚¹æ˜¯ç®€å•æ˜äº†ã€åŠŸèƒ½å¼ºå¤§ã€æ‰©å±•æ€§å¼ºï¼Œåªæœ‰ä½ æƒ³ä¸åˆ°ï¼Œæ²¡æœ‰å®ƒåšä¸åˆ°ã€‚</p><p>Pythonåœ¨å„ç§å·¥ç¨‹å’Œç§‘ç ”é¢†åŸŸéƒ½æœ‰åº”ç”¨ï¼Œå°¤å…¶åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œå‡ ä¹å å„æ–­åœ°ä½ã€‚</p><p>Python3ç›®å‰æ­£åœ¨å®Œå…¨å–ä»£Python2ï¼ŒäºŒè€…å¤§åŒå°å¼‚ï¼Œå› æ­¤æˆ‘ä»¬åªå­¦ä¹ Python3ï¼Œä¹Ÿåªç”¨Python3ï¼Œæœ¬æ–‡ä¸­çš„æ‰€æœ‰Pythonå‡æŒ‡Python3. </p><p>æˆ‘ä»¬åé¢è¦åšçš„çˆ¬è™«ã€NLPç­‰å†…å®¹éƒ½æ˜¯åŸºäºPythonè¯­è¨€çš„ï¼Œæ‰€ä»¥å¯¹Pythonæœ‰åŸºæœ¬äº†è§£æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</p><h2 id="å®‰è£…Anaconda"><a href="#å®‰è£…Anaconda" class="headerlink" title="å®‰è£…Anaconda"></a>å®‰è£…Anaconda</h2><p>æˆ‘ä»¬é€šè¿‡å®‰è£…Anacondaæ¥æ­å»ºPythonç¯å¢ƒã€‚</p><p>Anacondaæ˜¯å½“å‰æœ€æµè¡Œçš„Pythonå‘è¡Œç‰ˆæœ¬ï¼Œå…¶ä¸­åŒ…å«äº†Pythonå’Œè®¸å¤šå¸¸ç”¨å·¥å…·åŒ…åŠå…¶ä¾èµ–ï¼Œè¿˜æä¾›äº†condaã€pipç­‰å·¥å…·ç”¨äºç¯å¢ƒå’ŒåŒ…ç®¡ç†ï¼Œååˆ†æ–¹ä¾¿ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åœ¨<a href="https://www.anaconda.com/products/individual#Downloads">è¿™é‡Œ</a>ä¸‹è½½æœ€æ–°çš„å®‰è£…åŒ…ï¼Œå»ºè®®ä¸‹è½½Windows 64 bitç‰ˆæœ¬å®‰è£…åŒ…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="anaconda.png" alt="Anacondaä¸‹è½½"></p><p>å®‰è£…å®Œæˆåæ¥æµ‹è¯•ä¸€ä¸‹ã€‚æŒ‰ä¸‹Windowsé”®ï¼Œæ‰¾åˆ°Anaconda3 (64-bit) æ–‡ä»¶å¤¹ï¼Œç„¶åæ‰“å¼€**Anaconda Powershell Prompt (Anaconda3)**ï¼Œè¾“å…¥Pythonï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">(base) PS C:\Users\15617&gt; python<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>Anaconda Powershell Prompt (Anaconda3)å°±æ˜¯æˆ‘ä»¬åé¢ç»å¸¸è¦ç”¨åˆ°çš„PowerShellï¼Œè¿™æ˜¯Anacondaæä¾›ç»™æˆ‘ä»¬çš„ã€‚</p><p>ç„¶åæŒ‰ä¸‹å›è½¦ï¼Œçœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹è¾“å‡ºå³å¯è¡¨æ˜Anacondaå®‰è£…æˆåŠŸï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">(base) PS C:\Users\15617&gt; pythonPython 3.8.3 (default, Jul  2 2020, 17:30:36) [MSC v.1916 64 bit (AMD64)] :: Anaconda, Inc. on win32Type "help", "copyright", "credits" or "license" for more information.&gt;&gt;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç°åœ¨å¯ä»¥å…³é—­PowerShelläº†ã€‚</p><h2 id="å®‰è£…Sublime-Text-3"><a href="#å®‰è£…Sublime-Text-3" class="headerlink" title="å®‰è£…Sublime Text 3"></a>å®‰è£…Sublime Text 3</h2><p>å®‰è£…å®Œäº†Pythonç¯å¢ƒï¼Œæˆ‘ä»¬ç°åœ¨éœ€è¦ä¸€ä¸ªç¼–è¾‘å™¨æ¥å†™Pythonä»£ç ï¼Œè¿™é‡Œæ¨èçš„æ˜¯Sublime Text 3ï¼Œä¹Ÿæ˜¯æ²¹æ²¹æœ€å–œæ¬¢çš„ä»£ç å’Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚</p><p>Sublime Text3çš„ç‰¹ç‚¹æ˜¯ç®€æ´è½»ä¾¿ç¾è§‚å¹¶ä¸”å…è´¹ã€‚å”¯ä¸€ç¼ºç‚¹æ˜¯å¶å°”ä¼šå¼¹å‡ºæ¥è´­ä¹°æç¤ºæ¡†ï¼ŒæŒ‰Escå¿½ç•¥å³å¯ã€‚</p><p>å¦‚ä¸‹å›¾ï¼Œå¯ä»¥åœ¨<a href="https://www.sublimetext.com/3">è¿™é‡Œ</a>ä¸‹è½½Windows 64 bitç‰ˆæœ¬å®‰è£…åŒ…ã€‚</p><p><img src="sublime.png" alt="Sublime Text 3ä¸‹è½½"></p><p>å®‰è£…è¿˜æ˜¯å»ºè®®å®‰è£…åœ¨Dç›˜ï¼Œå®‰è£…å®Œæˆååœ¨æ¡Œé¢ä¸Šä¼šå‡ºç°Sublime Text 3çš„å›¾æ ‡ï¼Œæ‰“å¼€å³å¯ä½¿ç”¨ã€‚</p><h2 id="å’ªå’ªçš„ç¬¬ä¸€ä¸ªPythonä»£ç "><a href="#å’ªå’ªçš„ç¬¬ä¸€ä¸ªPythonä»£ç " class="headerlink" title="å’ªå’ªçš„ç¬¬ä¸€ä¸ªPythonä»£ç "></a>å’ªå’ªçš„ç¬¬ä¸€ä¸ªPythonä»£ç </h2><p>ç°åœ¨æˆ‘ä»¬æ¥å†™ç¬¬ä¸€ä¸ªPythonä»£ç ã€‚ </p><p>æ‰“å¼€Sublime Text 3ï¼Œåœ¨é”®ç›˜ä¸ŠæŒ‰<strong>Ctrl+N</strong>ï¼Œè¿™æ ·å°±æ–°å»ºäº†ä¸€ä¸ªæ–‡ä»¶ã€‚åœ¨æ–‡ä»¶ä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼Œåªæœ‰ä¸€å¥è¯ï¼Œè°ƒç”¨printå‡½æ•°è¾“å‡ºåŒå¼•å·å¼•èµ·æ¥çš„å­—ç¬¦ä¸²ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Beautiful fairy, happy fairy!"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶ååœ¨é”®ç›˜ä¸ŠæŒ‰<strong>Ctrl+S</strong>ï¼Œåœ¨<strong>å¦å­˜ä¸º</strong>æ¡†ä¸­é€‰æ‹©ä¸€ä¸ªç›®å½•ï¼Œè¿™é‡Œä½œä¸ºç¤ºä¾‹é€‰çš„æ˜¯Eç›˜100datasetæ–‡ä»¶å¤¹ã€‚</p><p>ç„¶ååœ¨æ–‡ä»¶åä¸€æ è¾“å…¥<strong>test.py</strong>ï¼Œç‚¹å‡»ä¿å­˜ã€‚æ³¨æ„ï¼Œç›®å½•åº”å°½é‡é¿å…ä¸­æ–‡åã€‚</p><p>ä»£ç å†™å®Œäº†ï¼Œç°åœ¨æˆ‘ä»¬æ¥æ‰§è¡Œè¿™ä»½åä¸º<strong>test.py</strong>çš„ä»£ç ã€‚é¦–å…ˆéœ€è¦æ‰“å¼€<strong>PowerShell</strong>å¹¶åˆ‡æ¢ç›®å½•ã€‚</p><p>åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰“å¼€ä½ åˆšæ‰é€‰æ‹©çš„ç›®å½•ï¼Œåœ¨åœ°å€æ å•å‡»é¼ æ ‡ï¼Œç„¶å<strong>Ctrl+C</strong>å¯ä»¥å¤åˆ¶å½“å‰ç›®å½•ä½ç½®ï¼Œå¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬å¤åˆ¶äº†Eç›˜100datasetæ–‡ä»¶å¤¹çš„ä½ç½®ï¼š</p><p><img src="path.png" alt="æ‰§è¡Œç›®å½•"></p><p>ç„¶åä¾ç…§ä¸Šéƒ¨åˆ†è®²çš„æ–¹å¼ï¼Œæ‰“å¼€PowerShellï¼Œåœ¨å…¶ä¸­è¾“å…¥â€cd â€œï¼Œç„¶å<strong>Ctrl+V</strong>ç²˜è´´æˆ‘ä»¬åˆšæ‰å¤åˆ¶çš„ç›®å½•ä½ç½®ï¼Œå†å›è½¦ï¼Œå³å¯å°†PowerShellçš„å·¥ä½œç›®å½•è½¬ç§»åˆ°æˆ‘ä»¬ä»£ç çš„ä½ç½®ä¸‹ï¼Œå¦‚è¿™é‡Œæˆ‘ä»¬è½¬ç§»åˆ°äº†â€E:\100datasetâ€çš„ä½ç½®ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">(base) PS C:\Users\15617&gt; cd E:\100dataset<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»£ç äº†ã€‚åœ¨PowerShellä¸­è¾“å…¥**â€python â€œ+å¾…æ‰§è¡Œçš„.pyæ–‡ä»¶å**ï¼Œè¿™é‡Œåº”è¯¥æ˜¯â€œpython test.pyâ€ï¼Œå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">(base) PS E:\100dataset&gt; python test.py<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶åæŒ‰ä¸‹å›è½¦é”®ï¼Œç„¶åä½ å°±å¯ä»¥çœ‹åˆ°PowerShellçª—å£åœ¨ç©ºç™½è¡Œè¾“å‡ºçš„å­—ç¬¦ä¸²å•¦ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">(base) PS E:\100dataset&gt; Beautiful fairy, happy fairy!<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ã€‚å½“ç„¶ï¼Œå­—ç¬¦ä¸²å¯ä»¥æ˜¯å…¶ä»–ä»»ä½•å†…å®¹ã€‚</p><h2 id="Pythonè¾“å‡ºä¹ä¹ä¹˜æ³•å£è¯€è¡¨"><a href="#Pythonè¾“å‡ºä¹ä¹ä¹˜æ³•å£è¯€è¡¨" class="headerlink" title="Pythonè¾“å‡ºä¹ä¹ä¹˜æ³•å£è¯€è¡¨"></a>Pythonè¾“å‡ºä¹ä¹ä¹˜æ³•å£è¯€è¡¨</h2><p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚å°†test.pyä¸­çš„å†…å®¹å…¨éƒ¨åˆ æ‰ï¼Œè¾“å…¥ä»¥ä¸‹å†…å®¹ï¼ˆå¯ä»¥å¤åˆ¶ç²˜è´´ï¼‰ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'{}x{}={}\t'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> i<span class="token punctuation">,</span> i<span class="token operator">*</span>j<span class="token punctuation">)</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶ååœ¨PowerShellçª—å£å†æ¬¡è¾“å…¥ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">(base) PS E:\100dataset&gt; python test.py<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¹¶æŒ‰ä¸‹å›è½¦ï¼Œæ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾—åˆ°äº†ä¸€ä¸ªä¹ä¹ä¹˜æ³•å£è¯€è¡¨ï¼Ÿè¯•ç€è¯»ä¸€ä¸‹ä»£ç ï¼Œèƒ½è¯»æ‡‚å®ƒçš„é€»è¾‘å—ï¼Ÿ</p><h2 id="Pythonè¾“å‡ºå¿ƒå½¢"><a href="#Pythonè¾“å‡ºå¿ƒå½¢" class="headerlink" title="Pythonè¾“å‡ºå¿ƒå½¢"></a>Pythonè¾“å‡ºå¿ƒå½¢</h2><p>å°†<strong>test.py</strong>ä¸­çš„å†…å®¹å…¨éƒ¨åˆ æ‰ï¼Œè¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> timewords <span class="token operator">=</span> <span class="token string">"lovemi"</span><span class="token keyword">for</span> item <span class="token keyword">in</span> words<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span><span class="token punctuation">(</span>x<span class="token operator">-</span>y<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token builtin">len</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token operator">*</span><span class="token number">0.05</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token operator">+</span><span class="token punctuation">(</span>y<span class="token operator">*</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">3</span><span class="token operator">-</span><span class="token punctuation">(</span>x<span class="token operator">*</span><span class="token number">0.05</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span><span class="token operator">*</span><span class="token punctuation">(</span>y<span class="token operator">*</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">3</span> <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token string">' '</span><span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> y <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥åŒæ ·çš„æ–¹å¼è¿è¡Œï¼Œæ˜¯ä¸æ˜¯å¾—åˆ°äº†ä¸€ä¸ªå¿ƒå½¢ï¼Ÿè¿™æ®µä»£ç æ¯”è¾ƒå¤æ‚ï¼Œä¸éœ€è¦æŒæ¡ï¼Œåªæ˜¯æƒ³å±•ç¤ºä¸€ä¸‹Pythonè¯­è¨€çš„å¼ºå¤§å’Œç²¾å¦™ã€‚</p><p>ç»™å’ªå’ªæ¯”ä¸ªâ¤å“¦~</p><h2 id="Pythonå°æ¸¸æˆï¼šè´ªåƒè›‡"><a href="#Pythonå°æ¸¸æˆï¼šè´ªåƒè›‡" class="headerlink" title="Pythonå°æ¸¸æˆï¼šè´ªåƒè›‡"></a>Pythonå°æ¸¸æˆï¼šè´ªåƒè›‡</h2><p>è¿è¡Œè¿™ä¸ªå°æ¸¸æˆçš„ä»£ç éœ€è¦å…ˆå®‰è£…ä¸€ä¸ªåä¸º<strong>pygame</strong>çš„åŒ…ï¼Œåœ¨PowerShellä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹å¹¶å›è½¦å°±å¯ä»¥ä½¿ç”¨pipå®‰è£…æ–°çš„å·¥å…·åŒ…äº†ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">(base) PS C:\Users\15617&gt; pip install pygame<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ‘ä»¬ä»¥åè¿˜ä¼šç”¨pipå®‰è£…å’Œç®¡ç†å…¶ä»–å·¥å…·åŒ…ã€‚ç­‰å¾…å®‰è£…å®Œæˆï¼Œç„¶ååœ¨test.pyä¸­è¾“å…¥ä»¥ä¸‹ä»£ç å¹¶ä»¥å‰è¿°æ–¹å¼è¿è¡Œï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> random<span class="token keyword">import</span> pygame<span class="token keyword">import</span> sys<span class="token keyword">from</span> pygame<span class="token punctuation">.</span><span class="token builtin">locals</span> <span class="token keyword">import</span> <span class="token operator">*</span> Snakespeed <span class="token operator">=</span> <span class="token number">17</span>Window_Width <span class="token operator">=</span> <span class="token number">1600</span>Window_Height <span class="token operator">=</span> <span class="token number">1000</span>Cell_Size <span class="token operator">=</span> <span class="token number">20</span>  <span class="token comment"># Width and height of the cells</span><span class="token comment"># Ensuring that the cells fit perfectly in the window. eg if cell size was</span><span class="token comment"># 10     and window width or windowheight were 15 only 1.5 cells would</span><span class="token comment"># fit.</span><span class="token keyword">assert</span> Window_Width <span class="token operator">%</span> Cell_Size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"Window width must be a multiple of cell size."</span><span class="token comment"># Ensuring that only whole integer number of cells fit perfectly in the window.</span><span class="token keyword">assert</span> Window_Height <span class="token operator">%</span> Cell_Size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"Window height must be a multiple of cell size."</span>Cell_W <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>Window_Width <span class="token operator">/</span> Cell_Size<span class="token punctuation">)</span>  <span class="token comment"># Cell Width</span>Cell_H <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>Window_Height <span class="token operator">/</span> Cell_Size<span class="token punctuation">)</span>  <span class="token comment"># Cellc Height</span>  White <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span>Black <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>Red <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># Defining element colors for the program.</span>Green <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>DARKGreen <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">155</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>DARKGRAY <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>YELLOW <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>Red_DARK <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>BLUE <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span>BLUE_DARK <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span>  BGCOLOR <span class="token operator">=</span> Black  <span class="token comment"># Background color</span>  UP <span class="token operator">=</span> <span class="token string">'up'</span>DOWN <span class="token operator">=</span> <span class="token string">'down'</span>      <span class="token comment"># Defining keyboard keys.</span>LEFT <span class="token operator">=</span> <span class="token string">'left'</span>RIGHT <span class="token operator">=</span> <span class="token string">'right'</span> HEAD <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># Syntactic sugar: index of the snake's head</span>  <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">global</span> SnakespeedCLOCK<span class="token punctuation">,</span> DISPLAYSURF<span class="token punctuation">,</span> BASICFONT     pygame<span class="token punctuation">.</span>init<span class="token punctuation">(</span><span class="token punctuation">)</span>    SnakespeedCLOCK <span class="token operator">=</span> pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>Clock<span class="token punctuation">(</span><span class="token punctuation">)</span>    DISPLAYSURF <span class="token operator">=</span> pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_mode<span class="token punctuation">(</span><span class="token punctuation">(</span>Window_Width<span class="token punctuation">,</span> Window_Height<span class="token punctuation">)</span><span class="token punctuation">)</span>    BASICFONT <span class="token operator">=</span> pygame<span class="token punctuation">.</span>font<span class="token punctuation">.</span>Font<span class="token punctuation">(</span><span class="token string">'freesansbold.ttf'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>set_caption<span class="token punctuation">(</span><span class="token string">'Snake'</span><span class="token punctuation">)</span>     showStartScreen<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        runGame<span class="token punctuation">(</span><span class="token punctuation">)</span>        showGameOverScreen<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">def</span> <span class="token function">runGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># Set a random start point.</span>    startx <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> Cell_W <span class="token operator">-</span> <span class="token number">6</span><span class="token punctuation">)</span>    starty <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> Cell_H <span class="token operator">-</span> <span class="token number">6</span><span class="token punctuation">)</span>    wormCoords <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">'x'</span><span class="token punctuation">:</span> startx<span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">:</span> starty<span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span><span class="token string">'x'</span><span class="token punctuation">:</span> startx <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">:</span> starty<span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span><span class="token string">'x'</span><span class="token punctuation">:</span> startx <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">:</span> starty<span class="token punctuation">}</span><span class="token punctuation">]</span>    direction <span class="token operator">=</span> RIGHT     <span class="token comment"># Start the apple in a random place.</span>    apple <span class="token operator">=</span> getRandomLocation<span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>  <span class="token comment"># main game loop</span>        <span class="token keyword">for</span> event <span class="token keyword">in</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># event handling loop</span>            <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> QUIT<span class="token punctuation">:</span>                terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">elif</span> event<span class="token punctuation">.</span><span class="token builtin">type</span> <span class="token operator">==</span> KEYDOWN<span class="token punctuation">:</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_LEFT<span class="token punctuation">)</span> <span class="token keyword">and</span> direction <span class="token operator">!=</span> RIGHT<span class="token punctuation">:</span>                    direction <span class="token operator">=</span> LEFT                <span class="token keyword">elif</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_RIGHT<span class="token punctuation">)</span> <span class="token keyword">and</span> direction <span class="token operator">!=</span> LEFT<span class="token punctuation">:</span>                    direction <span class="token operator">=</span> RIGHT                <span class="token keyword">elif</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_UP<span class="token punctuation">)</span> <span class="token keyword">and</span> direction <span class="token operator">!=</span> DOWN<span class="token punctuation">:</span>                    direction <span class="token operator">=</span> UP                <span class="token keyword">elif</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_DOWN<span class="token punctuation">)</span> <span class="token keyword">and</span> direction <span class="token operator">!=</span> UP<span class="token punctuation">:</span>                    direction <span class="token operator">=</span> DOWN                <span class="token keyword">elif</span> event<span class="token punctuation">.</span>key <span class="token operator">==</span> K_ESCAPE<span class="token punctuation">:</span>                    terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>         <span class="token comment"># check if the Snake has hit itself or the edge</span>        <span class="token keyword">if</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">or</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">==</span> Cell_W <span class="token keyword">or</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">or</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">==</span> Cell_H<span class="token punctuation">:</span>            <span class="token keyword">return</span>  <span class="token comment"># game over</span>        <span class="token keyword">for</span> wormBody <span class="token keyword">in</span> wormCoords<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> wormBody<span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">==</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token keyword">and</span> wormBody<span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">==</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                <span class="token keyword">return</span>  <span class="token comment"># game over</span>         <span class="token comment"># check if Snake has eaten an apply</span>        <span class="token keyword">if</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">==</span> apple<span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token keyword">and</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">==</span> apple<span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            <span class="token comment"># don't remove worm's tail segment</span>            apple <span class="token operator">=</span> getRandomLocation<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># set a new apple somewhere</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">del</span> wormCoords<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token comment"># remove worm's tail segment</span>         <span class="token comment"># move the worm by adding a segment in the direction it is moving</span>        <span class="token keyword">if</span> direction <span class="token operator">==</span> UP<span class="token punctuation">:</span>            newHead <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'x'</span><span class="token punctuation">:</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                       <span class="token string">'y'</span><span class="token punctuation">:</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span>        <span class="token keyword">elif</span> direction <span class="token operator">==</span> DOWN<span class="token punctuation">:</span>            newHead <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'x'</span><span class="token punctuation">:</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                       <span class="token string">'y'</span><span class="token punctuation">:</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span>        <span class="token keyword">elif</span> direction <span class="token operator">==</span> LEFT<span class="token punctuation">:</span>            newHead <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'x'</span><span class="token punctuation">:</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span>                <span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">:</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>        <span class="token keyword">elif</span> direction <span class="token operator">==</span> RIGHT<span class="token punctuation">:</span>            newHead <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'x'</span><span class="token punctuation">:</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span>                <span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">:</span> wormCoords<span class="token punctuation">[</span>HEAD<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>        wormCoords<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> newHead<span class="token punctuation">)</span>        DISPLAYSURF<span class="token punctuation">.</span>fill<span class="token punctuation">(</span>BGCOLOR<span class="token punctuation">)</span>        drawGrid<span class="token punctuation">(</span><span class="token punctuation">)</span>        drawWorm<span class="token punctuation">(</span>wormCoords<span class="token punctuation">)</span>        drawApple<span class="token punctuation">(</span>apple<span class="token punctuation">)</span>        drawScore<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>wormCoords<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span>        pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>        SnakespeedCLOCK<span class="token punctuation">.</span>tick<span class="token punctuation">(</span>Snakespeed<span class="token punctuation">)</span>  <span class="token keyword">def</span> <span class="token function">drawPressKeyMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    pressKeySurf <span class="token operator">=</span> BASICFONT<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'Press a key to play.'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> White<span class="token punctuation">)</span>    pressKeyRect <span class="token operator">=</span> pressKeySurf<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>    pressKeyRect<span class="token punctuation">.</span>topleft <span class="token operator">=</span> <span class="token punctuation">(</span>Window_Width <span class="token operator">-</span> <span class="token number">200</span><span class="token punctuation">,</span> Window_Height <span class="token operator">-</span> <span class="token number">30</span><span class="token punctuation">)</span>    DISPLAYSURF<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>pressKeySurf<span class="token punctuation">,</span> pressKeyRect<span class="token punctuation">)</span>  <span class="token keyword">def</span> <span class="token function">checkForKeyPress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span>QUIT<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>        terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>    keyUpEvents <span class="token operator">=</span> pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span>KEYUP<span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>keyUpEvents<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token boolean">None</span>    <span class="token keyword">if</span> keyUpEvents<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>key <span class="token operator">==</span> K_ESCAPE<span class="token punctuation">:</span>        terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> keyUpEvents<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>key  <span class="token keyword">def</span> <span class="token function">showStartScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    titleFont <span class="token operator">=</span> pygame<span class="token punctuation">.</span>font<span class="token punctuation">.</span>Font<span class="token punctuation">(</span><span class="token string">'freesansbold.ttf'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>    titleSurf1 <span class="token operator">=</span> titleFont<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'Snake!'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> White<span class="token punctuation">,</span> DARKGreen<span class="token punctuation">)</span>    degrees1 <span class="token operator">=</span> <span class="token number">0</span>    degrees2 <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        DISPLAYSURF<span class="token punctuation">.</span>fill<span class="token punctuation">(</span>BGCOLOR<span class="token punctuation">)</span>        rotatedSurf1 <span class="token operator">=</span> pygame<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>rotate<span class="token punctuation">(</span>titleSurf1<span class="token punctuation">,</span> degrees1<span class="token punctuation">)</span>        rotatedRect1 <span class="token operator">=</span> rotatedSurf1<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>        rotatedRect1<span class="token punctuation">.</span>center <span class="token operator">=</span> <span class="token punctuation">(</span>Window_Width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> Window_Height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>        DISPLAYSURF<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>rotatedSurf1<span class="token punctuation">,</span> rotatedRect1<span class="token punctuation">)</span>         drawPressKeyMsg<span class="token punctuation">(</span><span class="token punctuation">)</span>         <span class="token keyword">if</span> checkForKeyPress<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># clear event queue</span>            <span class="token keyword">return</span>        pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>        SnakespeedCLOCK<span class="token punctuation">.</span>tick<span class="token punctuation">(</span>Snakespeed<span class="token punctuation">)</span>        degrees1 <span class="token operator">+=</span> <span class="token number">3</span>  <span class="token comment"># rotate by 3 degrees each frame</span>        degrees2 <span class="token operator">+=</span> <span class="token number">7</span>  <span class="token comment"># rotate by 7 degrees each frame</span>  <span class="token keyword">def</span> <span class="token function">terminate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    pygame<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">def</span> <span class="token function">getRandomLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token string">'x'</span><span class="token punctuation">:</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Cell_W <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">:</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Cell_H <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span>  <span class="token keyword">def</span> <span class="token function">showGameOverScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    gameOverFont <span class="token operator">=</span> pygame<span class="token punctuation">.</span>font<span class="token punctuation">.</span>Font<span class="token punctuation">(</span><span class="token string">'freesansbold.ttf'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>    gameSurf <span class="token operator">=</span> gameOverFont<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'Game'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> White<span class="token punctuation">)</span>    overSurf <span class="token operator">=</span> gameOverFont<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'Over'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> White<span class="token punctuation">)</span>    gameRect <span class="token operator">=</span> gameSurf<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>    overRect <span class="token operator">=</span> overSurf<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>    gameRect<span class="token punctuation">.</span>midtop <span class="token operator">=</span> <span class="token punctuation">(</span>Window_Width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>    overRect<span class="token punctuation">.</span>midtop <span class="token operator">=</span> <span class="token punctuation">(</span>Window_Width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> gameRect<span class="token punctuation">.</span>height <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token number">25</span><span class="token punctuation">)</span>     DISPLAYSURF<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>gameSurf<span class="token punctuation">,</span> gameRect<span class="token punctuation">)</span>    DISPLAYSURF<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>overSurf<span class="token punctuation">,</span> overRect<span class="token punctuation">)</span>    drawPressKeyMsg<span class="token punctuation">(</span><span class="token punctuation">)</span>    pygame<span class="token punctuation">.</span>display<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">)</span>    pygame<span class="token punctuation">.</span>time<span class="token punctuation">.</span>wait<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>    checkForKeyPress<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># clear out any key presses in the event queue</span>     <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> checkForKeyPress<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            pygame<span class="token punctuation">.</span>event<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># clear event queue</span>            <span class="token keyword">return</span>  <span class="token keyword">def</span> <span class="token function">drawScore</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">:</span>    scoreSurf <span class="token operator">=</span> BASICFONT<span class="token punctuation">.</span>render<span class="token punctuation">(</span><span class="token string">'Score: %s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> White<span class="token punctuation">)</span>    scoreRect <span class="token operator">=</span> scoreSurf<span class="token punctuation">.</span>get_rect<span class="token punctuation">(</span><span class="token punctuation">)</span>    scoreRect<span class="token punctuation">.</span>topleft <span class="token operator">=</span> <span class="token punctuation">(</span>Window_Width <span class="token operator">-</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>    DISPLAYSURF<span class="token punctuation">.</span>blit<span class="token punctuation">(</span>scoreSurf<span class="token punctuation">,</span> scoreRect<span class="token punctuation">)</span>  <span class="token keyword">def</span> <span class="token function">drawWorm</span><span class="token punctuation">(</span>wormCoords<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> coord <span class="token keyword">in</span> wormCoords<span class="token punctuation">:</span>        x <span class="token operator">=</span> coord<span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">*</span> Cell_Size        y <span class="token operator">=</span> coord<span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">*</span> Cell_Size        wormSegmentRect <span class="token operator">=</span> pygame<span class="token punctuation">.</span>Rect<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> Cell_Size<span class="token punctuation">,</span> Cell_Size<span class="token punctuation">)</span>        pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>rect<span class="token punctuation">(</span>DISPLAYSURF<span class="token punctuation">,</span> DARKGreen<span class="token punctuation">,</span> wormSegmentRect<span class="token punctuation">)</span>        wormInnerSegmentRect <span class="token operator">=</span> pygame<span class="token punctuation">.</span>Rect<span class="token punctuation">(</span>            x <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">,</span> y <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">,</span> Cell_Size <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">,</span> Cell_Size <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">)</span>        pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>rect<span class="token punctuation">(</span>DISPLAYSURF<span class="token punctuation">,</span> Green<span class="token punctuation">,</span> wormInnerSegmentRect<span class="token punctuation">)</span>  <span class="token keyword">def</span> <span class="token function">drawApple</span><span class="token punctuation">(</span>coord<span class="token punctuation">)</span><span class="token punctuation">:</span>    x <span class="token operator">=</span> coord<span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">]</span> <span class="token operator">*</span> Cell_Size    y <span class="token operator">=</span> coord<span class="token punctuation">[</span><span class="token string">'y'</span><span class="token punctuation">]</span> <span class="token operator">*</span> Cell_Size    appleRect <span class="token operator">=</span> pygame<span class="token punctuation">.</span>Rect<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> Cell_Size<span class="token punctuation">,</span> Cell_Size<span class="token punctuation">)</span>    pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>rect<span class="token punctuation">(</span>DISPLAYSURF<span class="token punctuation">,</span> Red<span class="token punctuation">,</span> appleRect<span class="token punctuation">)</span>  <span class="token keyword">def</span> <span class="token function">drawGrid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Window_Width<span class="token punctuation">,</span> Cell_Size<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># draw vertical lines</span>        pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>line<span class="token punctuation">(</span>DISPLAYSURF<span class="token punctuation">,</span> DARKGRAY<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> Window_Height<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> y <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Window_Height<span class="token punctuation">,</span> Cell_Size<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># draw horizontal lines</span>        pygame<span class="token punctuation">.</span>draw<span class="token punctuation">.</span>line<span class="token punctuation">(</span>DISPLAYSURF<span class="token punctuation">,</span> DARKGRAY<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>Window_Width<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        main<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">except</span> SystemExit<span class="token punctuation">:</span>        <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ï¼Œä»£ç ä¸­â€#â€åé¢çš„éƒ¨åˆ†ä¸º<strong>æ³¨é‡Š</strong>ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿è¯»è€…é˜…è¯»ä»£ç è€Œå­˜åœ¨çš„ï¼Œä¸å…·å¤‡è¯­æ³•æ„ä¹‰ã€‚</p><p>åœ¨æ“ä½œç•Œé¢æŒ‰ä¸‹é”®ç›˜ä¸Šçš„æ–¹å‘é”®ä¸Šä¸‹å·¦å³ï¼Œå°±å¯ä»¥æ§åˆ¶è´ªåƒè›‡çš„ç§»åŠ¨æ–¹å‘ã€‚æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆæœ‰è¶£~</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦Python </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
